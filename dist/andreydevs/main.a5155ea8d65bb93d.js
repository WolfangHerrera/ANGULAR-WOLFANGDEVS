"use strict";(self.webpackChunkandreydevs=self.webpackChunkandreydevs||[]).push([[179],{714:(dt,Ce,F)=>{var M=F(6593),z=F(4769),se=F(7030),ee=F(5861),Q=F(6814),oe=F(8680);function ce(Ne,rt){1&Ne&&(z.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),z._uU(4,"Loading..."),z.qZA()()()())}const ke=function(Ne){return{opacity:Ne}},xe=[{path:"",loadChildren:()=>F.e(189).then(F.bind(F,9189)).then(Ne=>Ne.WolfangdevsModule)},{path:"shared/pdf",component:(()=>{class Ne{constructor(){this.zoomPDF=.5,this.disableSpinner=!1,this.pdfUrl="https://wolfangdevs-assets.s3.us-east-1.amazonaws.com/CV.pdf",this.setZoomLevel()}ngOnInit(){this.getPDF()}setZoomLevel(){window.innerWidth<768&&(this.zoomPDF=1.15)}getPDF(){var $e=this;return(0,ee.Z)(function*(){const Je=yield fetch($e.pdfUrl,{method:"GET",headers:{"Content-Type":"application/pdf"},mode:"cors"});if(!Je.ok)throw new Error(`No se pudo obtener el PDF: ${Je.statusText}`);const Be=yield Je.blob();$e.pdfUrl=URL.createObjectURL(Be)})()}onPdfLoadComplete($e){$e&&setTimeout(()=>{this.disableSpinner=!0},1500)}zoomIn(){this.zoomPDF+=.05}zoomOut(){this.zoomPDF-=.05}downloadFile(){var $e=this;return(0,ee.Z)(function*(){const Be=new XMLHttpRequest;Be.open("GET",$e.pdfUrl,!0),Be.responseType="blob",Be.onload=function(){if(200===Be.status){const cn=new Blob([Be.response],{type:"application/pdf"}),lt=document.createElement("a");lt.href=window.URL.createObjectURL(cn),lt.download="CV - Wolfang Herrera.pdf",lt.click()}},Be.send()})()}static#e=this.\u0275fac=function(Je){return new(Je||Ne)};static#t=this.\u0275cmp=z.Xpm({type:Ne,selectors:[["app-pdf"]],decls:10,vars:8,consts:[["class","m-0 vh-100 row justify-content-evenly align-items-center",4,"ngIf"],[1,"pdf-container","vh-100",3,"ngStyle"],[1,"zoom-controls"],[1,"btn","btn-dark","rounded-3","p-1",3,"click"],["src","assets/plus.svg","alt","Zoom In","width","20px"],["src","assets/minus.svg","alt","Zoom Out","width","20px"],["src","assets/download.svg","alt","Download","width","20px"],[2,"width","100vw","height","100vh",3,"src","render-text","original-size","zoom","after-load-complete"],[1,"m-0","vh-100","row","justify-content-evenly","align-items-center"],[1,"text-center"],["role","status",1,"spinner-border","text-light"],[1,"visually-hidden"]],template:function(Je,Be){1&Je&&(z.YNc(0,ce,5,0,"div",0),z.TgZ(1,"div",1)(2,"div",2)(3,"button",3),z.NdJ("click",function(){return Be.zoomIn()}),z._UZ(4,"img",4),z.qZA(),z.TgZ(5,"button",3),z.NdJ("click",function(){return Be.zoomOut()}),z._UZ(6,"img",5),z.qZA(),z.TgZ(7,"button",3),z.NdJ("click",function(){return Be.downloadFile()}),z._UZ(8,"img",6),z.qZA()(),z.TgZ(9,"pdf-viewer",7),z.NdJ("after-load-complete",function(lt){return Be.onPdfLoadComplete(lt)}),z.qZA()()),2&Je&&(z.Q6J("ngIf",!Be.disableSpinner),z.xp6(1),z.Q6J("ngStyle",z.VKq(6,ke,Be.disableSpinner?"100":"0")),z.xp6(8),z.Q6J("src",Be.pdfUrl)("render-text",!0)("original-size",!1)("zoom",Be.zoomPDF))},dependencies:[Q.O5,Q.PC,oe.rQ],styles:[".pdf-container[_ngcontent-%COMP%]{top:0;left:0;right:0;overflow:hidden}.zoom-controls[_ngcontent-%COMP%]{position:absolute;bottom:50vh;right:20px;display:flex;flex-direction:column;gap:10px;z-index:10}"]})}return Ne})()},{path:"**",redirectTo:""}];let ae=(()=>{class Ne{static#e=this.\u0275fac=function(Je){return new(Je||Ne)};static#t=this.\u0275mod=z.oAB({type:Ne});static#n=this.\u0275inj=z.cJS({imports:[se.Bz.forRoot(xe,{preloadingStrategy:se.wm}),se.Bz]})}return Ne})(),he=(()=>{class Ne{static#e=this.\u0275fac=function(Je){return new(Je||Ne)};static#t=this.\u0275cmp=z.Xpm({type:Ne,selectors:[["app-root"]],decls:1,vars:0,template:function(Je,Be){1&Je&&z._UZ(0,"router-outlet")},dependencies:[se.lC]})}return Ne})();var q=F(4911),Te=F(8504),fe=F(2438),st=F(2096),qe=F(5211),Ct=F(8645),vt=F(5592),qt=F(2420);const Ge=new vt.y(qt.Z);var _e=F(3019),ct=F(7398),Ye=F(2181),ge=F(4664),Ue=F(3168),we=F(4674),ht=F(4829),et=F(9360);const si={connector:()=>new Ct.x};function Ir(Ne,rt=si){const{connector:$e}=rt;return(0,et.e)((Je,Be)=>{const cn=$e();(0,ht.Xf)(Ne(function ot(Ne){return new vt.y(rt=>Ne.subscribe(rt))}(cn))).subscribe(Be),Be.add(Je.subscribe(cn))})}var X=F(8180),le=F(9397),Ee=F(4352),pe=F(8251),De=F(975),Et=F(1631);function Mt(Ne,rt){return rt?$e=>(0,qe.z)(rt.pipe((0,X.q)(1),function Le(){return(0,et.e)((Ne,rt)=>{Ne.subscribe((0,pe.x)(rt,qt.Z))})}()),$e.pipe(Mt(Ne))):(0,Et.z)(($e,Je)=>(0,ht.Xf)(Ne($e,Je)).pipe((0,X.q)(1),(0,De.h)($e)))}var qn=F(671);const wt="Service workers are disabled or not supported by this browser";class it{constructor(rt){if(this.serviceWorker=rt,rt){const Je=(0,fe.R)(rt,"controllerchange").pipe((0,ct.U)(()=>rt.controller)),Be=(0,q.P)(()=>(0,st.of)(rt.controller)),cn=(0,qe.z)(Be,Je);this.worker=cn.pipe((0,Ye.h)(Vt=>!!Vt)),this.registration=this.worker.pipe((0,ge.w)(()=>rt.getRegistration()));const is=(0,fe.R)(rt,"message").pipe((0,ct.U)(Vt=>Vt.data)).pipe((0,Ye.h)(Vt=>Vt&&Vt.type)).pipe(function on(Ne){return Ne?rt=>Ir(Ne)(rt):rt=>function pi(Ne,rt){const $e=(0,we.m)(Ne)?Ne:()=>Ne;return(0,we.m)(rt)?Ir(rt,{connector:$e}):Je=>new Ue.c(Je,$e)}(new Ct.x)(rt)}());is.connect(),this.events=is}else this.worker=this.events=this.registration=function bt(Ne){return(0,q.P)(()=>(0,Te._)(new Error(Ne)))}(wt)}postMessage(rt,$e){return this.worker.pipe((0,X.q)(1),(0,le.b)(Je=>{Je.postMessage({action:rt,...$e})})).toPromise().then(()=>{})}postMessageWithOperation(rt,$e,Je){const Be=this.waitForOperationCompleted(Je),cn=this.postMessage(rt,$e);return Promise.all([cn,Be]).then(([,lt])=>lt)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(rt){let $e;return $e="string"==typeof rt?Je=>Je.type===rt:Je=>rt.includes(Je.type),this.events.pipe((0,Ye.h)($e))}nextEventOfType(rt){return this.eventsOfType(rt).pipe((0,X.q)(1))}waitForOperationCompleted(rt){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Ye.h)($e=>$e.nonce===rt),(0,X.q)(1),(0,ct.U)($e=>{if(void 0!==$e.result)return $e.result;throw new Error($e.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let ln=(()=>{class Ne{get isEnabled(){return this.sw.isEnabled}constructor($e){if(this.sw=$e,this.pushManager=null,this.subscriptionChanges=new Ct.x,!$e.isEnabled)return this.messages=Ge,this.notificationClicks=Ge,void(this.subscription=Ge);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ct.U)(Be=>Be.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ct.U)(Be=>Be.data)),this.pushManager=this.sw.registration.pipe((0,ct.U)(Be=>Be.pushManager));const Je=this.pushManager.pipe((0,ge.w)(Be=>Be.getSubscription()));this.subscription=(0,_e.T)(Je,this.subscriptionChanges)}requestSubscription($e){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(wt));const Je={userVisibleOnly:!0};let Be=this.decodeBase64($e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),cn=new Uint8Array(new ArrayBuffer(Be.length));for(let lt=0;lt<Be.length;lt++)cn[lt]=Be.charCodeAt(lt);return Je.applicationServerKey=cn,this.pushManager.pipe((0,ge.w)(lt=>lt.subscribe(Je)),(0,X.q)(1)).toPromise().then(lt=>(this.subscriptionChanges.next(lt),lt))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,X.q)(1),(0,ge.w)(Je=>{if(null===Je)throw new Error("Not subscribed to push notifications.");return Je.unsubscribe().then(Be=>{if(!Be)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(wt))}decodeBase64($e){return atob($e)}static#e=this.\u0275fac=function(Je){return new(Je||Ne)(z.LFG(it))};static#t=this.\u0275prov=z.Yz7({token:Ne,factory:Ne.\u0275fac})}return Ne})(),pt=(()=>{class Ne{get isEnabled(){return this.sw.isEnabled}constructor($e){if(this.sw=$e,!$e.isEnabled)return this.versionUpdates=Ge,this.available=Ge,this.activated=Ge,void(this.unrecoverable=Ge);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,Ye.h)(Je=>"VERSION_READY"===Je.type),(0,ct.U)(Je=>({type:"UPDATE_AVAILABLE",current:Je.currentVersion,available:Je.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(wt));const $e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:$e},$e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(wt));const $e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:$e},$e)}static#e=this.\u0275fac=function(Je){return new(Je||Ne)(z.LFG(it))};static#t=this.\u0275prov=z.Yz7({token:Ne,factory:Ne.\u0275fac})}return Ne})();const Nn=new z.OlP("NGSW_REGISTER_SCRIPT");function tt(Ne,rt,$e,Je){return()=>{if(!(0,Q.NF)(Je)||!("serviceWorker"in navigator)||!1===$e.enabled)return;let Be;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof $e.registrationStrategy)Be=$e.registrationStrategy();else{const[lt,...bn]=($e.registrationStrategy||"registerWhenStable:30000").split(":");switch(lt){case"registerImmediately":Be=(0,st.of)(null);break;case"registerWithDelay":Be=Li(+bn[0]||0);break;case"registerWhenStable":Be=bn[0]?(0,_e.T)(Ni(Ne),Li(+bn[0])):Ni(Ne);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${$e.registrationStrategy}`)}}Ne.get(z.R0b).runOutsideAngular(()=>Be.pipe((0,X.q)(1)).subscribe(()=>navigator.serviceWorker.register(rt,{scope:$e.scope}).catch(lt=>console.error("Service worker registration failed with:",lt))))}}function Li(Ne){return(0,st.of)(null).pipe(function at(Ne,rt=Ee.z){const $e=function $t(Ne=0,rt,$e=Ee.P){let Je=-1;return null!=rt&&((0,qn.K)(rt)?$e=rt:Je=rt),new vt.y(Be=>{let cn=function yt(Ne){return Ne instanceof Date&&!isNaN(Ne)}(Ne)?+Ne-$e.now():Ne;cn<0&&(cn=0);let lt=0;return $e.schedule(function(){Be.closed||(Be.next(lt++),0<=Je?this.schedule(void 0,Je):Be.complete())},cn)})}(Ne,rt);return Mt(()=>$e)}(Ne))}function Ni(Ne){return Ne.get(z.z2F).isStable.pipe((0,Ye.h)($e=>$e))}function un(Ne,rt){return new it((0,Q.NF)(rt)&&!1!==Ne.enabled?navigator.serviceWorker:void 0)}class Wn{}function oi(Ne,rt={}){return(0,z.MR2)([ln,pt,{provide:Nn,useValue:Ne},{provide:Wn,useValue:rt},{provide:it,useFactory:un,deps:[Wn,z.Lbi]},{provide:z.ip1,useFactory:tt,deps:[z.zs3,Nn,Wn,z.Lbi],multi:!0}])}let gt=(()=>{class Ne{static register($e,Je={}){return{ngModule:Ne,providers:[oi($e,Je)]}}static#e=this.\u0275fac=function(Je){return new(Je||Ne)};static#t=this.\u0275mod=z.oAB({type:Ne});static#n=this.\u0275inj=z.cJS({providers:[ln,pt]})}return Ne})(),Tt=(()=>{class Ne{static#e=this.\u0275fac=function(Je){return new(Je||Ne)};static#t=this.\u0275mod=z.oAB({type:Ne,bootstrap:[he]});static#n=this.\u0275inj=z.cJS({imports:[M.b2,ae,gt.register("ngsw-worker.js",{enabled:!(0,z.X6Q)(),registrationStrategy:"registerWhenStable:30000"})]})}return Ne})();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("ngsw-worker.js").then(Ne=>{console.log("Service Worker registrado con \xe9xito:",Ne)}).catch(Ne=>{console.error("Error al registrar el Service Worker:",Ne)})}),M.q6().bootstrapModule(Tt).catch(Ne=>console.error(Ne))},5619:(dt,Ce,F)=>{F.d(Ce,{X:()=>z});var M=F(8645);class z extends M.x{constructor(ee){super(),this._value=ee}get value(){return this.getValue()}_subscribe(ee){const Q=super._subscribe(ee);return!Q.closed&&ee.next(this._value),Q}getValue(){const{hasError:ee,thrownError:Q,_value:oe}=this;if(ee)throw Q;return this._throwIfClosed(),oe}next(ee){super.next(this._value=ee)}}},5592:(dt,Ce,F)=>{F.d(Ce,{y:()=>ke});var M=F(305),z=F(7394),se=F(4850),ee=F(8407),Q=F(2653),oe=F(4674),ce=F(1441);let ke=(()=>{class he{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const fe=new he;return fe.source=this,fe.operator=Te,fe}subscribe(Te,fe,st){const qe=function ae(he){return he&&he instanceof M.Lv||function xe(he){return he&&(0,oe.m)(he.next)&&(0,oe.m)(he.error)&&(0,oe.m)(he.complete)}(he)&&(0,z.Nn)(he)}(Te)?Te:new M.Hp(Te,fe,st);return(0,ce.x)(()=>{const{operator:Ct,source:vt}=this;qe.add(Ct?Ct.call(qe,vt):vt?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(fe){Te.error(fe)}}forEach(Te,fe){return new(fe=Re(fe))((st,qe)=>{const Ct=new M.Hp({next:vt=>{try{Te(vt)}catch(qt){qe(qt),Ct.unsubscribe()}},error:qe,complete:st});this.subscribe(Ct)})}_subscribe(Te){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Te)}[se.L](){return this}pipe(...Te){return(0,ee.U)(Te)(this)}toPromise(Te){return new(Te=Re(Te))((fe,st)=>{let qe;this.subscribe(Ct=>qe=Ct,Ct=>st(Ct),()=>fe(qe))})}}return he.create=q=>new he(q),he})();function Re(he){var q;return null!==(q=he??Q.config.Promise)&&void 0!==q?q:Promise}},8645:(dt,Ce,F)=>{F.d(Ce,{x:()=>ce});var M=F(5592),z=F(7394);const ee=(0,F(2306).d)(Re=>function(){Re(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Q=F(9039),oe=F(1441);let ce=(()=>{class Re extends M.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const he=new ke(this,this);return he.operator=ae,he}_throwIfClosed(){if(this.closed)throw new ee}next(ae){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(ae)}})}error(ae){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:he}=this;for(;he.length;)he.shift().error(ae)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:he,isStopped:q,observers:Te}=this;return he||q?z.Lc:(this.currentObservers=null,Te.push(ae),new z.w0(()=>{this.currentObservers=null,(0,Q.P)(Te,ae)}))}_checkFinalizedStatuses(ae){const{hasError:he,thrownError:q,isStopped:Te}=this;he?ae.error(q):Te&&ae.complete()}asObservable(){const ae=new M.y;return ae.source=this,ae}}return Re.create=(xe,ae)=>new ke(xe,ae),Re})();class ke extends ce{constructor(xe,ae){super(),this.destination=xe,this.source=ae}next(xe){var ae,he;null===(he=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===he||he.call(ae,xe)}error(xe){var ae,he;null===(he=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===he||he.call(ae,xe)}complete(){var xe,ae;null===(ae=null===(xe=this.destination)||void 0===xe?void 0:xe.complete)||void 0===ae||ae.call(xe)}_subscribe(xe){var ae,he;return null!==(he=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(xe))&&void 0!==he?he:z.Lc}}},305:(dt,Ce,F)=>{F.d(Ce,{Hp:()=>st,Lv:()=>he});var M=F(4674),z=F(7394),se=F(2653),ee=F(3894),Q=F(2420);const oe=Re("C",void 0,void 0);function Re(Ge,Ve,_e){return{kind:Ge,value:Ve,error:_e}}var xe=F(7599),ae=F(1441);class he extends z.w0{constructor(Ve){super(),this.isStopped=!1,Ve?(this.destination=Ve,(0,z.Nn)(Ve)&&Ve.add(this)):this.destination=qt}static create(Ve,_e,ct){return new st(Ve,_e,ct)}next(Ve){this.isStopped?vt(function ke(Ge){return Re("N",Ge,void 0)}(Ve),this):this._next(Ve)}error(Ve){this.isStopped?vt(function ce(Ge){return Re("E",void 0,Ge)}(Ve),this):(this.isStopped=!0,this._error(Ve))}complete(){this.isStopped?vt(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ve){this.destination.next(Ve)}_error(Ve){try{this.destination.error(Ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const q=Function.prototype.bind;function Te(Ge,Ve){return q.call(Ge,Ve)}class fe{constructor(Ve){this.partialObserver=Ve}next(Ve){const{partialObserver:_e}=this;if(_e.next)try{_e.next(Ve)}catch(ct){qe(ct)}}error(Ve){const{partialObserver:_e}=this;if(_e.error)try{_e.error(Ve)}catch(ct){qe(ct)}else qe(Ve)}complete(){const{partialObserver:Ve}=this;if(Ve.complete)try{Ve.complete()}catch(_e){qe(_e)}}}class st extends he{constructor(Ve,_e,ct){let Ye;if(super(),(0,M.m)(Ve)||!Ve)Ye={next:Ve??void 0,error:_e??void 0,complete:ct??void 0};else{let ge;this&&se.config.useDeprecatedNextContext?(ge=Object.create(Ve),ge.unsubscribe=()=>this.unsubscribe(),Ye={next:Ve.next&&Te(Ve.next,ge),error:Ve.error&&Te(Ve.error,ge),complete:Ve.complete&&Te(Ve.complete,ge)}):Ye=Ve}this.destination=new fe(Ye)}}function qe(Ge){se.config.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Ge):(0,ee.h)(Ge)}function vt(Ge,Ve){const{onStoppedNotification:_e}=se.config;_e&&xe.z.setTimeout(()=>_e(Ge,Ve))}const qt={closed:!0,next:Q.Z,error:function Ct(Ge){throw Ge},complete:Q.Z}},7394:(dt,Ce,F)=>{F.d(Ce,{Lc:()=>oe,w0:()=>Q,Nn:()=>ce});var M=F(4674);const se=(0,F(2306).d)(Re=>function(ae){Re(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((he,q)=>`${q+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var ee=F(9039);class Q{constructor(xe){this.initialTeardown=xe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let xe;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const Te of ae)Te.remove(this);else ae.remove(this);const{initialTeardown:he}=this;if((0,M.m)(he))try{he()}catch(Te){xe=Te instanceof se?Te.errors:[Te]}const{_finalizers:q}=this;if(q){this._finalizers=null;for(const Te of q)try{ke(Te)}catch(fe){xe=xe??[],fe instanceof se?xe=[...xe,...fe.errors]:xe.push(fe)}}if(xe)throw new se(xe)}}add(xe){var ae;if(xe&&xe!==this)if(this.closed)ke(xe);else{if(xe instanceof Q){if(xe.closed||xe._hasParent(this))return;xe._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(xe)}}_hasParent(xe){const{_parentage:ae}=this;return ae===xe||Array.isArray(ae)&&ae.includes(xe)}_addParent(xe){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(xe),ae):ae?[ae,xe]:xe}_removeParent(xe){const{_parentage:ae}=this;ae===xe?this._parentage=null:Array.isArray(ae)&&(0,ee.P)(ae,xe)}remove(xe){const{_finalizers:ae}=this;ae&&(0,ee.P)(ae,xe),xe instanceof Q&&xe._removeParent(this)}}Q.EMPTY=(()=>{const Re=new Q;return Re.closed=!0,Re})();const oe=Q.EMPTY;function ce(Re){return Re instanceof Q||Re&&"closed"in Re&&(0,M.m)(Re.remove)&&(0,M.m)(Re.add)&&(0,M.m)(Re.unsubscribe)}function ke(Re){(0,M.m)(Re)?Re():Re.unsubscribe()}},2653:(dt,Ce,F)=>{F.d(Ce,{config:()=>M});const M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3168:(dt,Ce,F)=>{F.d(Ce,{c:()=>oe});var M=F(5592),z=F(7394),se=F(6196),ee=F(8251),Q=F(9360);class oe extends M.y{constructor(ke,Re){super(),this.source=ke,this.subjectFactory=Re,this._subject=null,this._refCount=0,this._connection=null,(0,Q.A)(ke)&&(this.lift=ke.lift)}_subscribe(ke){return this.getSubject().subscribe(ke)}getSubject(){const ke=this._subject;return(!ke||ke.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ke}=this;this._subject=this._connection=null,ke?.unsubscribe()}connect(){let ke=this._connection;if(!ke){ke=this._connection=new z.w0;const Re=this.getSubject();ke.add(this.source.subscribe((0,ee.x)(Re,void 0,()=>{this._teardown(),Re.complete()},xe=>{this._teardown(),Re.error(xe)},()=>this._teardown()))),ke.closed&&(this._connection=null,ke=z.w0.EMPTY)}return ke}refCount(){return(0,se.x)()(this)}}},5211:(dt,Ce,F)=>{F.d(Ce,{z:()=>Q});var M=F(7537),se=F(9940),ee=F(7715);function Q(...oe){return function z(){return(0,M.J)(1)}()((0,ee.D)(oe,(0,se.yG)(oe)))}},4911:(dt,Ce,F)=>{F.d(Ce,{P:()=>se});var M=F(5592),z=F(4829);function se(ee){return new M.y(Q=>{(0,z.Xf)(ee()).subscribe(Q)})}},6232:(dt,Ce,F)=>{F.d(Ce,{E:()=>z});const z=new(F(5592).y)(Q=>Q.complete())},7715:(dt,Ce,F)=>{F.d(Ce,{D:()=>ct});var M=F(4829),z=F(7103),se=F(9360),ee=F(8251);function Q(Ye,ge=0){return(0,se.e)((Ue,we)=>{Ue.subscribe((0,ee.x)(we,ht=>(0,z.f)(we,Ye,()=>we.next(ht),ge),()=>(0,z.f)(we,Ye,()=>we.complete(),ge),ht=>(0,z.f)(we,Ye,()=>we.error(ht),ge)))})}function oe(Ye,ge=0){return(0,se.e)((Ue,we)=>{we.add(Ye.schedule(()=>Ue.subscribe(we),ge))})}var Re=F(5592),ae=F(4971),he=F(4674);function Te(Ye,ge){if(!Ye)throw new Error("Iterable cannot be null");return new Re.y(Ue=>{(0,z.f)(Ue,ge,()=>{const we=Ye[Symbol.asyncIterator]();(0,z.f)(Ue,ge,()=>{we.next().then(ht=>{ht.done?Ue.complete():Ue.next(ht.value)})},0,!0)})})}var fe=F(8382),st=F(4026),qe=F(4266),Ct=F(3664),vt=F(5726),qt=F(9853),Ge=F(541);function ct(Ye,ge){return ge?function _e(Ye,ge){if(null!=Ye){if((0,fe.c)(Ye))return function ce(Ye,ge){return(0,M.Xf)(Ye).pipe(oe(ge),Q(ge))}(Ye,ge);if((0,qe.z)(Ye))return function xe(Ye,ge){return new Re.y(Ue=>{let we=0;return ge.schedule(function(){we===Ye.length?Ue.complete():(Ue.next(Ye[we++]),Ue.closed||this.schedule())})})}(Ye,ge);if((0,st.t)(Ye))return function ke(Ye,ge){return(0,M.Xf)(Ye).pipe(oe(ge),Q(ge))}(Ye,ge);if((0,vt.D)(Ye))return Te(Ye,ge);if((0,Ct.T)(Ye))return function q(Ye,ge){return new Re.y(Ue=>{let we;return(0,z.f)(Ue,ge,()=>{we=Ye[ae.h](),(0,z.f)(Ue,ge,()=>{let ht,et;try{({value:ht,done:et}=we.next())}catch(ot){return void Ue.error(ot)}et?Ue.complete():Ue.next(ht)},0,!0)}),()=>(0,he.m)(we?.return)&&we.return()})}(Ye,ge);if((0,Ge.L)(Ye))return function Ve(Ye,ge){return Te((0,Ge.Q)(Ye),ge)}(Ye,ge)}throw(0,qt.z)(Ye)}(Ye,ge):(0,M.Xf)(Ye)}},2438:(dt,Ce,F)=>{F.d(Ce,{R:()=>xe});var M=F(4829),z=F(5592),se=F(1631),ee=F(4266),Q=F(4674),oe=F(7400);const ce=["addListener","removeListener"],ke=["addEventListener","removeEventListener"],Re=["on","off"];function xe(fe,st,qe,Ct){if((0,Q.m)(qe)&&(Ct=qe,qe=void 0),Ct)return xe(fe,st,qe).pipe((0,oe.Z)(Ct));const[vt,qt]=function Te(fe){return(0,Q.m)(fe.addEventListener)&&(0,Q.m)(fe.removeEventListener)}(fe)?ke.map(Ge=>Ve=>fe[Ge](st,Ve,qe)):function he(fe){return(0,Q.m)(fe.addListener)&&(0,Q.m)(fe.removeListener)}(fe)?ce.map(ae(fe,st)):function q(fe){return(0,Q.m)(fe.on)&&(0,Q.m)(fe.off)}(fe)?Re.map(ae(fe,st)):[];if(!vt&&(0,ee.z)(fe))return(0,se.z)(Ge=>xe(Ge,st,qe))((0,M.Xf)(fe));if(!vt)throw new TypeError("Invalid event target");return new z.y(Ge=>{const Ve=(..._e)=>Ge.next(1<_e.length?_e:_e[0]);return vt(Ve),()=>qt(Ve)})}function ae(fe,st){return qe=>Ct=>fe[qe](st,Ct)}},4829:(dt,Ce,F)=>{F.d(Ce,{Xf:()=>q});var M=F(7582),z=F(4266),se=F(4026),ee=F(5592),Q=F(8382),oe=F(5726),ce=F(9853),ke=F(3664),Re=F(541),xe=F(4674),ae=F(3894),he=F(4850);function q(Ge){if(Ge instanceof ee.y)return Ge;if(null!=Ge){if((0,Q.c)(Ge))return function Te(Ge){return new ee.y(Ve=>{const _e=Ge[he.L]();if((0,xe.m)(_e.subscribe))return _e.subscribe(Ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ge);if((0,z.z)(Ge))return function fe(Ge){return new ee.y(Ve=>{for(let _e=0;_e<Ge.length&&!Ve.closed;_e++)Ve.next(Ge[_e]);Ve.complete()})}(Ge);if((0,se.t)(Ge))return function st(Ge){return new ee.y(Ve=>{Ge.then(_e=>{Ve.closed||(Ve.next(_e),Ve.complete())},_e=>Ve.error(_e)).then(null,ae.h)})}(Ge);if((0,oe.D)(Ge))return Ct(Ge);if((0,ke.T)(Ge))return function qe(Ge){return new ee.y(Ve=>{for(const _e of Ge)if(Ve.next(_e),Ve.closed)return;Ve.complete()})}(Ge);if((0,Re.L)(Ge))return function vt(Ge){return Ct((0,Re.Q)(Ge))}(Ge)}throw(0,ce.z)(Ge)}function Ct(Ge){return new ee.y(Ve=>{(function qt(Ge,Ve){var _e,ct,Ye,ge;return(0,M.mG)(this,void 0,void 0,function*(){try{for(_e=(0,M.KL)(Ge);!(ct=yield _e.next()).done;)if(Ve.next(ct.value),Ve.closed)return}catch(Ue){Ye={error:Ue}}finally{try{ct&&!ct.done&&(ge=_e.return)&&(yield ge.call(_e))}finally{if(Ye)throw Ye.error}}Ve.complete()})})(Ge,Ve).catch(_e=>Ve.error(_e))})}},3019:(dt,Ce,F)=>{F.d(Ce,{T:()=>oe});var M=F(7537),z=F(4829),se=F(6232),ee=F(9940),Q=F(7715);function oe(...ce){const ke=(0,ee.yG)(ce),Re=(0,ee._6)(ce,1/0),xe=ce;return xe.length?1===xe.length?(0,z.Xf)(xe[0]):(0,M.J)(Re)((0,Q.D)(xe,ke)):se.E}},2096:(dt,Ce,F)=>{F.d(Ce,{of:()=>se});var M=F(9940),z=F(7715);function se(...ee){const Q=(0,M.yG)(ee);return(0,z.D)(ee,Q)}},8504:(dt,Ce,F)=>{F.d(Ce,{_:()=>se});var M=F(5592),z=F(4674);function se(ee,Q){const oe=(0,z.m)(ee)?ee:()=>ee,ce=ke=>ke.error(oe());return new M.y(Q?ke=>Q.schedule(ce,0,ke):ce)}},8251:(dt,Ce,F)=>{F.d(Ce,{x:()=>z});var M=F(305);function z(ee,Q,oe,ce,ke){return new se(ee,Q,oe,ce,ke)}class se extends M.Lv{constructor(Q,oe,ce,ke,Re,xe){super(Q),this.onFinalize=Re,this.shouldUnsubscribe=xe,this._next=oe?function(ae){try{oe(ae)}catch(he){Q.error(he)}}:super._next,this._error=ke?function(ae){try{ke(ae)}catch(he){Q.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(ae){Q.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Q;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(Q=this.onFinalize)||void 0===Q||Q.call(this))}}}},2181:(dt,Ce,F)=>{F.d(Ce,{h:()=>se});var M=F(9360),z=F(8251);function se(ee,Q){return(0,M.e)((oe,ce)=>{let ke=0;oe.subscribe((0,z.x)(ce,Re=>ee.call(Q,Re,ke++)&&ce.next(Re)))})}},7398:(dt,Ce,F)=>{F.d(Ce,{U:()=>se});var M=F(9360),z=F(8251);function se(ee,Q){return(0,M.e)((oe,ce)=>{let ke=0;oe.subscribe((0,z.x)(ce,Re=>{ce.next(ee.call(Q,Re,ke++))}))})}},975:(dt,Ce,F)=>{F.d(Ce,{h:()=>z});var M=F(7398);function z(se){return(0,M.U)(()=>se)}},7537:(dt,Ce,F)=>{F.d(Ce,{J:()=>se});var M=F(1631),z=F(2737);function se(ee=1/0){return(0,M.z)(z.y,ee)}},1631:(dt,Ce,F)=>{F.d(Ce,{z:()=>ke});var M=F(7398),z=F(4829),se=F(9360),ee=F(7103),Q=F(8251),ce=F(4674);function ke(Re,xe,ae=1/0){return(0,ce.m)(xe)?ke((he,q)=>(0,M.U)((Te,fe)=>xe(he,Te,q,fe))((0,z.Xf)(Re(he,q))),ae):("number"==typeof xe&&(ae=xe),(0,se.e)((he,q)=>function oe(Re,xe,ae,he,q,Te,fe,st){const qe=[];let Ct=0,vt=0,qt=!1;const Ge=()=>{qt&&!qe.length&&!Ct&&xe.complete()},Ve=ct=>Ct<he?_e(ct):qe.push(ct),_e=ct=>{Te&&xe.next(ct),Ct++;let Ye=!1;(0,z.Xf)(ae(ct,vt++)).subscribe((0,Q.x)(xe,ge=>{q?.(ge),Te?Ve(ge):xe.next(ge)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Ct--;qe.length&&Ct<he;){const ge=qe.shift();fe?(0,ee.f)(xe,fe,()=>_e(ge)):_e(ge)}Ge()}catch(ge){xe.error(ge)}}))};return Re.subscribe((0,Q.x)(xe,Ve,()=>{qt=!0,Ge()})),()=>{st?.()}}(he,q,Re,ae)))}},6196:(dt,Ce,F)=>{F.d(Ce,{x:()=>se});var M=F(9360),z=F(8251);function se(){return(0,M.e)((ee,Q)=>{let oe=null;ee._refCount++;const ce=(0,z.x)(Q,void 0,void 0,void 0,()=>{if(!ee||ee._refCount<=0||0<--ee._refCount)return void(oe=null);const ke=ee._connection,Re=oe;oe=null,ke&&(!Re||ke===Re)&&ke.unsubscribe(),Q.unsubscribe()});ee.subscribe(ce),ce.closed||(oe=ee.connect())})}},4664:(dt,Ce,F)=>{F.d(Ce,{w:()=>ee});var M=F(4829),z=F(9360),se=F(8251);function ee(Q,oe){return(0,z.e)((ce,ke)=>{let Re=null,xe=0,ae=!1;const he=()=>ae&&!Re&&ke.complete();ce.subscribe((0,se.x)(ke,q=>{Re?.unsubscribe();let Te=0;const fe=xe++;(0,M.Xf)(Q(q,fe)).subscribe(Re=(0,se.x)(ke,st=>ke.next(oe?oe(q,st,fe,Te++):st),()=>{Re=null,he()}))},()=>{ae=!0,he()}))})}},8180:(dt,Ce,F)=>{F.d(Ce,{q:()=>ee});var M=F(6232),z=F(9360),se=F(8251);function ee(Q){return Q<=0?()=>M.E:(0,z.e)((oe,ce)=>{let ke=0;oe.subscribe((0,se.x)(ce,Re=>{++ke<=Q&&(ce.next(Re),Q<=ke&&ce.complete())}))})}},9773:(dt,Ce,F)=>{F.d(Ce,{R:()=>Q});var M=F(9360),z=F(8251),se=F(4829),ee=F(2420);function Q(oe){return(0,M.e)((ce,ke)=>{(0,se.Xf)(oe).subscribe((0,z.x)(ke,()=>ke.complete(),ee.Z)),!ke.closed&&ce.subscribe(ke)})}},9397:(dt,Ce,F)=>{F.d(Ce,{b:()=>Q});var M=F(4674),z=F(9360),se=F(8251),ee=F(2737);function Q(oe,ce,ke){const Re=(0,M.m)(oe)||ce||ke?{next:oe,error:ce,complete:ke}:oe;return Re?(0,z.e)((xe,ae)=>{var he;null===(he=Re.subscribe)||void 0===he||he.call(Re);let q=!0;xe.subscribe((0,se.x)(ae,Te=>{var fe;null===(fe=Re.next)||void 0===fe||fe.call(Re,Te),ae.next(Te)},()=>{var Te;q=!1,null===(Te=Re.complete)||void 0===Te||Te.call(Re),ae.complete()},Te=>{var fe;q=!1,null===(fe=Re.error)||void 0===fe||fe.call(Re,Te),ae.error(Te)},()=>{var Te,fe;q&&(null===(Te=Re.unsubscribe)||void 0===Te||Te.call(Re)),null===(fe=Re.finalize)||void 0===fe||fe.call(Re)}))}):ee.y}},4352:(dt,Ce,F)=>{F.d(Ce,{P:()=>xe,z:()=>Re});var M=F(7394);class z extends M.w0{constructor(he,q){super()}schedule(he,q=0){return this}}const se={setInterval(ae,he,...q){const{delegate:Te}=se;return Te?.setInterval?Te.setInterval(ae,he,...q):setInterval(ae,he,...q)},clearInterval(ae){const{delegate:he}=se;return(he?.clearInterval||clearInterval)(ae)},delegate:void 0};var ee=F(9039);const oe={now:()=>(oe.delegate||Date).now(),delegate:void 0};class ce{constructor(he,q=ce.now){this.schedulerActionCtor=he,this.now=q}schedule(he,q=0,Te){return new this.schedulerActionCtor(this,he).schedule(Te,q)}}ce.now=oe.now;const Re=new class ke extends ce{constructor(he,q=ce.now){super(he,q),this.actions=[],this._active=!1}flush(he){const{actions:q}=this;if(this._active)return void q.push(he);let Te;this._active=!0;do{if(Te=he.execute(he.state,he.delay))break}while(he=q.shift());if(this._active=!1,Te){for(;he=q.shift();)he.unsubscribe();throw Te}}}(class Q extends z{constructor(he,q){super(he,q),this.scheduler=he,this.work=q,this.pending=!1}schedule(he,q=0){var Te;if(this.closed)return this;this.state=he;const fe=this.id,st=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(st,fe,q)),this.pending=!0,this.delay=q,this.id=null!==(Te=this.id)&&void 0!==Te?Te:this.requestAsyncId(st,this.id,q),this}requestAsyncId(he,q,Te=0){return se.setInterval(he.flush.bind(he,this),Te)}recycleAsyncId(he,q,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return q;null!=q&&se.clearInterval(q)}execute(he,q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(he,q);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,q){let fe,Te=!1;try{this.work(he)}catch(st){Te=!0,fe=st||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:he,scheduler:q}=this,{actions:Te}=q;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(Te,this),null!=he&&(this.id=this.recycleAsyncId(q,he,null)),this.delay=null,super.unsubscribe()}}}),xe=Re},7599:(dt,Ce,F)=>{F.d(Ce,{z:()=>M});const M={setTimeout(z,se,...ee){const{delegate:Q}=M;return Q?.setTimeout?Q.setTimeout(z,se,...ee):setTimeout(z,se,...ee)},clearTimeout(z){const{delegate:se}=M;return(se?.clearTimeout||clearTimeout)(z)},delegate:void 0}},4971:(dt,Ce,F)=>{F.d(Ce,{h:()=>z});const z=function M(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(dt,Ce,F)=>{F.d(Ce,{L:()=>M});const M="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(dt,Ce,F)=>{F.d(Ce,{_6:()=>oe,jO:()=>ee,yG:()=>Q});var M=F(4674),z=F(671);function se(ce){return ce[ce.length-1]}function ee(ce){return(0,M.m)(se(ce))?ce.pop():void 0}function Q(ce){return(0,z.K)(se(ce))?ce.pop():void 0}function oe(ce,ke){return"number"==typeof se(ce)?ce.pop():ke}},7453:(dt,Ce,F)=>{F.d(Ce,{D:()=>Q});const{isArray:M}=Array,{getPrototypeOf:z,prototype:se,keys:ee}=Object;function Q(ce){if(1===ce.length){const ke=ce[0];if(M(ke))return{args:ke,keys:null};if(function oe(ce){return ce&&"object"==typeof ce&&z(ce)===se}(ke)){const Re=ee(ke);return{args:Re.map(xe=>ke[xe]),keys:Re}}}return{args:ce,keys:null}}},9039:(dt,Ce,F)=>{function M(z,se){if(z){const ee=z.indexOf(se);0<=ee&&z.splice(ee,1)}}F.d(Ce,{P:()=>M})},2306:(dt,Ce,F)=>{function M(z){const ee=z(Q=>{Error.call(Q),Q.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}F.d(Ce,{d:()=>M})},2714:(dt,Ce,F)=>{function M(z,se){return z.reduce((ee,Q,oe)=>(ee[Q]=se[oe],ee),{})}F.d(Ce,{n:()=>M})},1441:(dt,Ce,F)=>{F.d(Ce,{O:()=>ee,x:()=>se});var M=F(2653);let z=null;function se(Q){if(M.config.useDeprecatedSynchronousErrorHandling){const oe=!z;if(oe&&(z={errorThrown:!1,error:null}),Q(),oe){const{errorThrown:ce,error:ke}=z;if(z=null,ce)throw ke}}else Q()}function ee(Q){M.config.useDeprecatedSynchronousErrorHandling&&z&&(z.errorThrown=!0,z.error=Q)}},7103:(dt,Ce,F)=>{function M(z,se,ee,Q=0,oe=!1){const ce=se.schedule(function(){ee(),oe?z.add(this.schedule(null,Q)):this.unsubscribe()},Q);if(z.add(ce),!oe)return ce}F.d(Ce,{f:()=>M})},2737:(dt,Ce,F)=>{function M(z){return z}F.d(Ce,{y:()=>M})},4266:(dt,Ce,F)=>{F.d(Ce,{z:()=>M});const M=z=>z&&"number"==typeof z.length&&"function"!=typeof z},5726:(dt,Ce,F)=>{F.d(Ce,{D:()=>z});var M=F(4674);function z(se){return Symbol.asyncIterator&&(0,M.m)(se?.[Symbol.asyncIterator])}},4674:(dt,Ce,F)=>{function M(z){return"function"==typeof z}F.d(Ce,{m:()=>M})},8382:(dt,Ce,F)=>{F.d(Ce,{c:()=>se});var M=F(4850),z=F(4674);function se(ee){return(0,z.m)(ee[M.L])}},3664:(dt,Ce,F)=>{F.d(Ce,{T:()=>se});var M=F(4971),z=F(4674);function se(ee){return(0,z.m)(ee?.[M.h])}},4026:(dt,Ce,F)=>{F.d(Ce,{t:()=>z});var M=F(4674);function z(se){return(0,M.m)(se?.then)}},541:(dt,Ce,F)=>{F.d(Ce,{L:()=>ee,Q:()=>se});var M=F(7582),z=F(4674);function se(Q){return(0,M.FC)(this,arguments,function*(){const ce=Q.getReader();try{for(;;){const{value:ke,done:Re}=yield(0,M.qq)(ce.read());if(Re)return yield(0,M.qq)(void 0);yield yield(0,M.qq)(ke)}}finally{ce.releaseLock()}})}function ee(Q){return(0,z.m)(Q?.getReader)}},671:(dt,Ce,F)=>{F.d(Ce,{K:()=>z});var M=F(4674);function z(se){return se&&(0,M.m)(se.schedule)}},9360:(dt,Ce,F)=>{F.d(Ce,{A:()=>z,e:()=>se});var M=F(4674);function z(ee){return(0,M.m)(ee?.lift)}function se(ee){return Q=>{if(z(Q))return Q.lift(function(oe){try{return ee(oe,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(dt,Ce,F)=>{F.d(Ce,{Z:()=>ee});var M=F(7398);const{isArray:z}=Array;function ee(Q){return(0,M.U)(oe=>function se(Q,oe){return z(oe)?Q(...oe):Q(oe)}(Q,oe))}},2420:(dt,Ce,F)=>{function M(){}F.d(Ce,{Z:()=>M})},8407:(dt,Ce,F)=>{F.d(Ce,{U:()=>se,z:()=>z});var M=F(2737);function z(...ee){return se(ee)}function se(ee){return 0===ee.length?M.y:1===ee.length?ee[0]:function(oe){return ee.reduce((ce,ke)=>ke(ce),oe)}}},3894:(dt,Ce,F)=>{F.d(Ce,{h:()=>se});var M=F(2653),z=F(7599);function se(ee){z.z.setTimeout(()=>{const{onUnhandledError:Q}=M.config;if(!Q)throw ee;Q(ee)})}},9853:(dt,Ce,F)=>{function M(z){return new TypeError(`You provided ${null!==z&&"object"==typeof z?"an invalid object":`'${z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ce,{z:()=>M})},6814:(dt,Ce,F)=>{F.d(Ce,{Do:()=>st,EM:()=>gr,HT:()=>ee,JF:()=>sr,K0:()=>oe,Mx:()=>Fi,NF:()=>In,O5:()=>Rs,PC:()=>Mn,PM:()=>Hn,S$:()=>q,V_:()=>ke,Ye:()=>qe,b0:()=>fe,bD:()=>Ke,ez:()=>fn,q:()=>se,sg:()=>Gi,w_:()=>Q});var M=F(4769);let z=null;function se(){return z}function ee(_){z||(z=_)}class Q{}const oe=new M.OlP("DocumentToken");let ce=(()=>{class _{historyGo(S){throw new Error("Not implemented")}static#e=this.\u0275fac=function(P){return new(P||_)};static#t=this.\u0275prov=M.Yz7({token:_,factory:function(){return(0,M.f3M)(Re)},providedIn:"platform"})}return _})();const ke=new M.OlP("Location Initialized");let Re=(()=>{class _ extends ce{constructor(){super(),this._doc=(0,M.f3M)(oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(S){const P=se().getGlobalEventTarget(this._doc,"window");return P.addEventListener("popstate",S,!1),()=>P.removeEventListener("popstate",S)}onHashChange(S){const P=se().getGlobalEventTarget(this._doc,"window");return P.addEventListener("hashchange",S,!1),()=>P.removeEventListener("hashchange",S)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(S){this._location.pathname=S}pushState(S,P,V){this._history.pushState(S,P,V)}replaceState(S,P,V){this._history.replaceState(S,P,V)}forward(){this._history.forward()}back(){this._history.back()}historyGo(S=0){this._history.go(S)}getState(){return this._history.state}static#e=this.\u0275fac=function(P){return new(P||_)};static#t=this.\u0275prov=M.Yz7({token:_,factory:function(){return new _},providedIn:"platform"})}return _})();function xe(_,R){if(0==_.length)return R;if(0==R.length)return _;let S=0;return _.endsWith("/")&&S++,R.startsWith("/")&&S++,2==S?_+R.substring(1):1==S?_+R:_+"/"+R}function ae(_){const R=_.match(/#|\?|$/),S=R&&R.index||_.length;return _.slice(0,S-("/"===_[S-1]?1:0))+_.slice(S)}function he(_){return _&&"?"!==_[0]?"?"+_:_}let q=(()=>{class _{historyGo(S){throw new Error("Not implemented")}static#e=this.\u0275fac=function(P){return new(P||_)};static#t=this.\u0275prov=M.Yz7({token:_,factory:function(){return(0,M.f3M)(fe)},providedIn:"root"})}return _})();const Te=new M.OlP("appBaseHref");let fe=(()=>{class _ extends q{constructor(S,P){super(),this._platformLocation=S,this._removeListenerFns=[],this._baseHref=P??this._platformLocation.getBaseHrefFromDOM()??(0,M.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}prepareExternalUrl(S){return xe(this._baseHref,S)}path(S=!1){const P=this._platformLocation.pathname+he(this._platformLocation.search),V=this._platformLocation.hash;return V&&S?`${P}${V}`:P}pushState(S,P,V,te){const Se=this.prepareExternalUrl(V+he(te));this._platformLocation.pushState(S,P,Se)}replaceState(S,P,V,te){const Se=this.prepareExternalUrl(V+he(te));this._platformLocation.replaceState(S,P,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(S=0){this._platformLocation.historyGo?.(S)}static#e=this.\u0275fac=function(P){return new(P||_)(M.LFG(ce),M.LFG(Te,8))};static#t=this.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})(),st=(()=>{class _ extends q{constructor(S,P){super(),this._platformLocation=S,this._baseHref="",this._removeListenerFns=[],null!=P&&(this._baseHref=P)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}path(S=!1){let P=this._platformLocation.hash;return null==P&&(P="#"),P.length>0?P.substring(1):P}prepareExternalUrl(S){const P=xe(this._baseHref,S);return P.length>0?"#"+P:P}pushState(S,P,V,te){let Se=this.prepareExternalUrl(V+he(te));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.pushState(S,P,Se)}replaceState(S,P,V,te){let Se=this.prepareExternalUrl(V+he(te));0==Se.length&&(Se=this._platformLocation.pathname),this._platformLocation.replaceState(S,P,Se)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(S=0){this._platformLocation.historyGo?.(S)}static#e=this.\u0275fac=function(P){return new(P||_)(M.LFG(ce),M.LFG(Te,8))};static#t=this.\u0275prov=M.Yz7({token:_,factory:_.\u0275fac})}return _})(),qe=(()=>{class _{constructor(S){this._subject=new M.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=S;const P=this._locationStrategy.getBaseHref();this._basePath=function Ge(_){if(new RegExp("^(https?:)?//").test(_)){const[,S]=_.split(/\/\/[^\/]+/);return S}return _}(ae(qt(P))),this._locationStrategy.onPopState(V=>{this._subject.emit({url:this.path(!0),pop:!0,state:V.state,type:V.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(S=!1){return this.normalize(this._locationStrategy.path(S))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(S,P=""){return this.path()==this.normalize(S+he(P))}normalize(S){return _.stripTrailingSlash(function vt(_,R){if(!_||!R.startsWith(_))return R;const S=R.substring(_.length);return""===S||["/",";","?","#"].includes(S[0])?S:R}(this._basePath,qt(S)))}prepareExternalUrl(S){return S&&"/"!==S[0]&&(S="/"+S),this._locationStrategy.prepareExternalUrl(S)}go(S,P="",V=null){this._locationStrategy.pushState(V,"",S,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+he(P)),V)}replaceState(S,P="",V=null){this._locationStrategy.replaceState(V,"",S,P),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+he(P)),V)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(S=0){this._locationStrategy.historyGo?.(S)}onUrlChange(S){return this._urlChangeListeners.push(S),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(P=>{this._notifyUrlChangeListeners(P.url,P.state)})),()=>{const P=this._urlChangeListeners.indexOf(S);this._urlChangeListeners.splice(P,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(S="",P){this._urlChangeListeners.forEach(V=>V(S,P))}subscribe(S,P,V){return this._subject.subscribe({next:S,error:P,complete:V})}static#e=this.normalizeQueryParams=he;static#t=this.joinWithSlash=xe;static#n=this.stripTrailingSlash=ae;static#i=this.\u0275fac=function(P){return new(P||_)(M.LFG(q))};static#r=this.\u0275prov=M.Yz7({token:_,factory:function(){return function Ct(){return new qe((0,M.LFG)(q))}()},providedIn:"root"})}return _})();function qt(_){return _.replace(/\/index.html$/,"")}function Fi(_,R){R=encodeURIComponent(R);for(const S of _.split(";")){const P=S.indexOf("="),[V,te]=-1==P?[S,""]:[S.slice(0,P),S.slice(P+1)];if(V.trim()===R)return decodeURIComponent(te)}return null}class tr{constructor(R,S,P,V){this.$implicit=R,this.ngForOf=S,this.index=P,this.count=V}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gi=(()=>{class _{set ngForOf(S){this._ngForOf=S,this._ngForOfDirty=!0}set ngForTrackBy(S){this._trackByFn=S}get ngForTrackBy(){return this._trackByFn}constructor(S,P,V){this._viewContainer=S,this._template=P,this._differs=V,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(S){S&&(this._template=S)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const S=this._ngForOf;!this._differ&&S&&(this._differ=this._differs.find(S).create(this.ngForTrackBy))}if(this._differ){const S=this._differ.diff(this._ngForOf);S&&this._applyChanges(S)}}_applyChanges(S){const P=this._viewContainer;S.forEachOperation((V,te,Se)=>{if(null==V.previousIndex)P.createEmbeddedView(this._template,new tr(V.item,this._ngForOf,-1,-1),null===Se?void 0:Se);else if(null==Se)P.remove(null===te?void 0:te);else if(null!==te){const We=P.get(te);P.move(We,Se),nr(We,V)}});for(let V=0,te=P.length;V<te;V++){const We=P.get(V).context;We.index=V,We.count=te,We.ngForOf=this._ngForOf}S.forEachIdentityChange(V=>{nr(P.get(V.currentIndex),V)})}static ngTemplateContextGuard(S,P){return!0}static#e=this.\u0275fac=function(P){return new(P||_)(M.Y36(M.s_b),M.Y36(M.Rgc),M.Y36(M.ZZ4))};static#t=this.\u0275dir=M.lG2({type:_,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return _})();function nr(_,R){_.context.$implicit=R.item}let Rs=(()=>{class _{constructor(S,P){this._viewContainer=S,this._context=new ir,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=P}set ngIf(S){this._context.$implicit=this._context.ngIf=S,this._updateView()}set ngIfThen(S){oo("ngIfThen",S),this._thenTemplateRef=S,this._thenViewRef=null,this._updateView()}set ngIfElse(S){oo("ngIfElse",S),this._elseTemplateRef=S,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(S,P){return!0}static#e=this.\u0275fac=function(P){return new(P||_)(M.Y36(M.s_b),M.Y36(M.Rgc))};static#t=this.\u0275dir=M.lG2({type:_,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return _})();class ir{constructor(){this.$implicit=null,this.ngIf=null}}function oo(_,R){if(R&&!R.createEmbeddedView)throw new Error(`${_} must be a TemplateRef, but received '${(0,M.AaK)(R)}'.`)}let Mn=(()=>{class _{constructor(S,P,V){this._ngEl=S,this._differs=P,this._renderer=V,this._ngStyle=null,this._differ=null}set ngStyle(S){this._ngStyle=S,!this._differ&&S&&(this._differ=this._differs.find(S).create())}ngDoCheck(){if(this._differ){const S=this._differ.diff(this._ngStyle);S&&this._applyChanges(S)}}_setStyle(S,P){const[V,te]=S.split("."),Se=-1===V.indexOf("-")?void 0:M.JOm.DashCase;null!=P?this._renderer.setStyle(this._ngEl.nativeElement,V,te?`${P}${te}`:P,Se):this._renderer.removeStyle(this._ngEl.nativeElement,V,Se)}_applyChanges(S){S.forEachRemovedItem(P=>this._setStyle(P.key,null)),S.forEachAddedItem(P=>this._setStyle(P.key,P.currentValue)),S.forEachChangedItem(P=>this._setStyle(P.key,P.currentValue))}static#e=this.\u0275fac=function(P){return new(P||_)(M.Y36(M.SBq),M.Y36(M.aQg),M.Y36(M.Qsj))};static#t=this.\u0275dir=M.lG2({type:_,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return _})(),fn=(()=>{class _{static#e=this.\u0275fac=function(P){return new(P||_)};static#t=this.\u0275mod=M.oAB({type:_});static#n=this.\u0275inj=M.cJS({})}return _})();const Ke="browser",Dt="server";function In(_){return _===Ke}function Hn(_){return _===Dt}let gr=(()=>{class _{static#e=this.\u0275prov=(0,M.Yz7)({token:_,providedIn:"root",factory:()=>new At((0,M.LFG)(oe),window)})}return _})();class At{constructor(R,S){this.document=R,this.window=S,this.offset=()=>[0,0]}setOffset(R){this.offset=Array.isArray(R)?()=>R:R}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(R){this.supportsScrolling()&&this.window.scrollTo(R[0],R[1])}scrollToAnchor(R){if(!this.supportsScrolling())return;const S=function qi(_,R){const S=_.getElementById(R)||_.getElementsByName(R)[0];if(S)return S;if("function"==typeof _.createTreeWalker&&_.body&&"function"==typeof _.body.attachShadow){const P=_.createTreeWalker(_.body,NodeFilter.SHOW_ELEMENT);let V=P.currentNode;for(;V;){const te=V.shadowRoot;if(te){const Se=te.getElementById(R)||te.querySelector(`[name="${R}"]`);if(Se)return Se}V=P.nextNode()}}return null}(this.document,R);S&&(this.scrollToElement(S),S.focus())}setHistoryScrollRestoration(R){this.supportsScrolling()&&(this.window.history.scrollRestoration=R)}scrollToElement(R){const S=R.getBoundingClientRect(),P=S.left+this.window.pageXOffset,V=S.top+this.window.pageYOffset,te=this.offset();this.window.scrollTo(P-te[0],V-te[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class sr{}},4769:(dt,Ce,F)=>{F.d(Ce,{tb:()=>mg,AFp:()=>tm,ip1:()=>qb,hGG:()=>dS,z2F:()=>hc,Ojb:()=>V_,sBO:()=>qD,Sil:()=>pD,EJc:()=>dD,Xts:()=>je,SBq:()=>hu,lqb:()=>eo,qLn:()=>ia,vpe:()=>to,XFs:()=>Be,OlP:()=>Nt,zs3:()=>Ss,ZZ4:()=>wg,aQg:()=>Ag,soG:()=>Ah,YKP:()=>Jy,h0i:()=>Qa,PXZ:()=>HD,R0b:()=>Oi,FiY:()=>jc,Lbi:()=>$f,g9A:()=>nm,Qsj:()=>n0,FYo:()=>lm,JOm:()=>xl,tp0:()=>Hc,Rgc:()=>Tu,dDg:()=>kD,eoX:()=>i_,GfV:()=>cm,s_b:()=>Eh,ifc:()=>Fi,VuI:()=>wS,MMx:()=>tb,Lck:()=>KA,eFA:()=>a_,Gpc:()=>Ve,f3M:()=>Yt,X6Q:()=>KD,$WT:()=>li,MR2:()=>en,_c5:()=>uS,qFp:()=>CS,rg0:()=>mn,c2e:()=>Xb,zSh:()=>Kn,HDt:()=>Zb,wAp:()=>lc,vHH:()=>we,lri:()=>t_,rWj:()=>n_,cg1:()=>$p,kL8:()=>Cy,dqk:()=>Vt,Z0I:()=>Wn,eJc:()=>og,QGY:()=>Rp,F4k:()=>Iv,RDi:()=>Nd,AaK:()=>vt,qOj:()=>bp,Xq5:()=>lv,TTD:()=>ui,_Bn:()=>Qy,jDz:()=>nb,xp6:()=>Om,uIk:()=>Ep,Tol:()=>Xv,Gre:()=>hy,ekj:()=>jp,Suo:()=>Ib,Xpm:()=>To,lG2:()=>Ro,Yz7:()=>tt,cJS:()=>Ni,oAB:()=>Rn,Yjl:()=>pr,Y36:()=>ql,_UZ:()=>xp,qZA:()=>dh,TgZ:()=>uh,EpF:()=>Mv,n5z:()=>_s,LFG:()=>Fn,$8M:()=>_l,$Z:()=>Nm,NdJ:()=>Op,CRH:()=>xb,kcU:()=>Pc,O4$:()=>ju,oxw:()=>Ov,Q6J:()=>Mp,s9C:()=>Lp,VKq:()=>cb,iGM:()=>Sb,KtG:()=>Da,CHM:()=>Ic,LSH:()=>G,P3R:()=>ye,YNc:()=>Ev,_uU:()=>iy,Oqu:()=>Vp,hij:()=>ph,lnq:()=>Up,Gf:()=>Mb});var M=F(8645),z=F(7394),se=F(5592),ee=F(3019),Q=F(5619),oe=F(2096),ce=F(4829),ke=F(305),Re=F(9360);function xe(t={}){const{connector:i=(()=>new M.x),resetOnError:r=!0,resetOnComplete:o=!0,resetOnRefCountZero:l=!0}=t;return d=>{let p,v,w,I=0,L=!1,B=!1;const W=()=>{v?.unsubscribe(),v=void 0},K=()=>{W(),p=w=void 0,L=B=!1},be=()=>{const Fe=p;K(),Fe?.unsubscribe()};return(0,Re.e)((Fe,Ze)=>{I++,!B&&!L&&W();const ut=w=w??i();Ze.add(()=>{I--,0===I&&!B&&!L&&(v=ae(be,l))}),ut.subscribe(Ze),!p&&I>0&&(p=new ke.Hp({next:Pe=>ut.next(Pe),error:Pe=>{B=!0,W(),v=ae(K,r,Pe),ut.error(Pe)},complete:()=>{L=!0,W(),v=ae(K,o),ut.complete()}}),(0,ce.Xf)(Fe).subscribe(p))})(d)}}function ae(t,i,...r){if(!0===i)return void t();if(!1===i)return;const o=new ke.Hp({next:()=>{o.unsubscribe(),t()}});return(0,ce.Xf)(i(...r)).subscribe(o)}var he=F(4664),q=F(2737),Te=F(8251);function st(t,i){return t===i}function qe(t){for(let i in t)if(t[i]===qe)return i;throw Error("Could not find renamed property on target object.")}function Ct(t,i){for(const r in i)i.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=i[r])}function vt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const r=i.indexOf("\n");return-1===r?i:i.substring(0,r)}function qt(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const Ge=qe({__forward_ref__:qe});function Ve(t){return t.__forward_ref__=Ve,t.toString=function(){return vt(this())},t}function _e(t){return ct(t)?t():t}function ct(t){return"function"==typeof t&&t.hasOwnProperty(Ge)&&t.__forward_ref__===Ve}function Ye(t){return t&&!!t.\u0275providers}const Ue="https://g.co/ng/security#xss";class we extends Error{constructor(i,r){super(function ht(t,i){return`NG0${Math.abs(t)}${i?": "+i:""}`}(i,r)),this.code=i}}function et(t){return"string"==typeof t?t:null==t?"":String(t)}function on(t,i){throw new we(-201,!1)}function bt(t,i){null==t&&function it(t,i,r,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${r} ${o} ${i} <=Actual]`))}(i,t,null,"!=")}function tt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ni(t){return{providers:t.providers||[],imports:t.imports||[]}}function un(t){return oi(t,Ne)||oi(t,$e)}function Wn(t){return null!==un(t)}function oi(t,i){return t.hasOwnProperty(i)?t[i]:null}function Tt(t){return t&&(t.hasOwnProperty(rt)||t.hasOwnProperty(Je))?t[rt]:null}const Ne=qe({\u0275prov:qe}),rt=qe({\u0275inj:qe}),$e=qe({ngInjectableDef:qe}),Je=qe({ngInjectorDef:qe});var Be=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Be||{});let cn;function bn(t){const i=cn;return cn=t,i}function ze(t,i,r){const o=un(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&Be.Optional?null:void 0!==i?i:void on(vt(t))}const Vt=globalThis;class Nt{constructor(i,r){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=tt({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Y={},me="__NG_DI_FLAG__",Qe="ngTempTokenPath",tn=/\n/gm,wn="__source";let kn;function Di(t){const i=kn;return kn=t,i}function rs(t,i=Be.Default){if(void 0===kn)throw new we(-203,!1);return null===kn?ze(t,void 0,i):kn.get(t,i&Be.Optional?null:void 0,i)}function Fn(t,i=Be.Default){return(function lt(){return cn}()||rs)(_e(t),i)}function Yt(t,i=Be.Default){return Fn(t,Ts(i))}function Ts(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ps(t){const i=[];for(let r=0;r<t.length;r++){const o=_e(t[r]);if(Array.isArray(o)){if(0===o.length)throw new we(900,!1);let l,d=Be.Default;for(let p=0;p<o.length;p++){const v=o[p],w=Pr(v);"number"==typeof w?-1===w?l=v.token:d|=w:l=v}i.push(Fn(l,d))}else i.push(Fn(o))}return i}function Tr(t,i){return t[me]=i,t.prototype[me]=i,t}function Pr(t){return t[me]}function ki(t){return{toString:t}.toString()}var os=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(os||{}),Fi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Fi||{});const Bn={},Bt=[],nn=qe({\u0275cmp:qe}),Si=qe({\u0275dir:qe}),Wi=qe({\u0275pipe:qe}),tr=qe({\u0275mod:qe}),Gi=qe({\u0275fac:qe}),nr=qe({__NG_ELEMENT_ID__:qe}),aa=qe({__NG_ENV_ID__:qe});function Rs(t,i,r){let o=t.length;for(;;){const l=t.indexOf(i,r);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const d=i.length;if(l+d===o||t.charCodeAt(l+d)<=32)return l}r=l+1}}function ir(t,i,r){let o=0;for(;o<r.length;){const l=r[o];if("number"==typeof l){if(0!==l)break;o++;const d=r[o++],p=r[o++],v=r[o++];t.setAttribute(i,p,v,d)}else{const d=l,p=r[++o];Yi(d)?t.setProperty(i,d,p):t.setAttribute(i,d,p),o++}}return o}function oo(t){return 3===t||4===t||6===t}function Yi(t){return 64===t.charCodeAt(0)}function rr(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let r=-1;for(let o=0;o<i.length;o++){const l=i[o];"number"==typeof l?r=l:0===r||Rr(t,r,l,null,-1===r||2===r?i[++o]:null)}}return t}function Rr(t,i,r,o,l){let d=0,p=t.length;if(-1===i)p=-1;else for(;d<t.length;){const v=t[d++];if("number"==typeof v){if(v===i){p=-1;break}if(v>i){p=d-1;break}}}for(;d<t.length;){const v=t[d];if("number"==typeof v)break;if(v===r){if(null===o)return void(null!==l&&(t[d+1]=l));if(o===t[d+1])return void(t[d+2]=l)}d++,null!==o&&d++,null!==l&&d++}-1!==p&&(t.splice(p,0,i),d=p+1),t.splice(d++,0,r),null!==o&&t.splice(d++,0,o),null!==l&&t.splice(d++,0,l)}const Os="ng-template";function mt(t,i,r){let o=0,l=!0;for(;o<t.length;){let d=t[o++];if("string"==typeof d&&l){const p=t[o++];if(r&&"class"===d&&-1!==Rs(p.toLowerCase(),i,0))return!0}else{if(1===d){for(;o<t.length&&"string"==typeof(d=t[o++]);)if(d.toLowerCase()===i)return!0;return!1}"number"==typeof d&&(l=!1)}}return!1}function Mi(t){return 4===t.type&&t.value!==Os}function as(t,i,r){return i===(4!==t.type||r?t.value:Os)}function Mn(t,i,r){let o=4;const l=t.attrs||[],d=function Io(t){for(let i=0;i<t.length;i++)if(oo(t[i]))return i;return t.length}(l);let p=!1;for(let v=0;v<i.length;v++){const w=i[v];if("number"!=typeof w){if(!p)if(4&o){if(o=2|1&o,""!==w&&!as(t,w,r)||""===w&&1===i.length){if(hn(o))return!1;p=!0}}else{const I=8&o?w:i[++v];if(8&o&&null!==t.attrs){if(!mt(t.attrs,I,r)){if(hn(o))return!1;p=!0}continue}const B=$r(8&o?"class":w,l,Mi(t),r);if(-1===B){if(hn(o))return!1;p=!0;continue}if(""!==I){let W;W=B>d?"":l[B+1].toLowerCase();const K=8&o?W:null;if(K&&-1!==Rs(K,I,0)||2&o&&I!==W){if(hn(o))return!1;p=!0}}}}else{if(!p&&!hn(o)&&!hn(w))return!1;if(p&&hn(w))continue;p=!1,o=w|1&o}}return hn(o)||p}function hn(t){return 0==(1&t)}function $r(t,i,r,o){if(null===i)return-1;let l=0;if(o||!r){let d=!1;for(;l<i.length;){const p=i[l];if(p===t)return l;if(3===p||6===p)d=!0;else{if(1===p||2===p){let v=i[++l];for(;"string"==typeof v;)v=i[++l];continue}if(4===p)break;if(0===p){l+=4;continue}}l+=d?1:2}return-1}return function la(t,i){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const o=t[r];if("number"==typeof o)return-1;if(o===i)return r;r++}return-1}(i,t)}function Gn(t,i,r=!1){for(let o=0;o<i.length;o++)if(Mn(t,i[o],r))return!0;return!1}function Ns(t,i){return t?":not("+i.trim()+")":i}function ao(t){let i=t[0],r=1,o=2,l="",d=!1;for(;r<t.length;){let p=t[r];if("string"==typeof p)if(2&o){const v=t[++r];l+="["+p+(v.length>0?'="'+v+'"':"")+"]"}else 8&o?l+="."+p:4&o&&(l+=" "+p);else""!==l&&!hn(p)&&(i+=Ns(d,l),l=""),o=p,d=d||!hn(o);r++}return""!==l&&(i+=Ns(d,l)),i}function To(t){return ki(()=>{const i=co(t),r={...i,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===os.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Fi.Emulated,styles:t.styles||Bt,_:null,schemas:t.schemas||null,tView:null,id:""};ks(r);const o=t.dependencies;return r.directiveDefs=Or(o,!1),r.pipeDefs=Or(o,!0),r.id=function el(t){let i=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of r)i=Math.imul(31,i)+l.charCodeAt(0)<<0;return i+=2147483648,"c"+i}(r),r})}function da(t){return jt(t)||On(t)}function Po(t){return null!==t}function Rn(t){return ki(()=>({type:t.type,bootstrap:t.bootstrap||Bt,declarations:t.declarations||Bt,imports:t.imports||Bt,exports:t.exports||Bt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lo(t,i){if(null==t)return Bn;const r={};for(const o in t)if(t.hasOwnProperty(o)){let l=t[o],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),r[l]=o,i&&(i[l]=d)}return r}function Ro(t){return ki(()=>{const i=co(t);return ks(i),i})}function pr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function jt(t){return t[nn]||null}function On(t){return t[Si]||null}function jn(t){return t[Wi]||null}function li(t){const i=jt(t)||On(t)||jn(t);return null!==i&&i.standalone}function Ln(t,i){const r=t[tr]||null;if(!r&&!0===i)throw new Error(`Type ${vt(t)} does not have '\u0275mod' property.`);return r}function co(t){const i={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputTransforms:null,inputConfig:t.inputs||Bn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Bt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lo(t.inputs,i),outputs:lo(t.outputs)}}function ks(t){t.features?.forEach(i=>i(t))}function Or(t,i){if(!t)return null;const r=i?jn:da;return()=>("function"==typeof t?t():t).map(o=>r(o)).filter(Po)}const fn=0,Ke=1,Dt=2,rn=3,gi=4,In=5,Hn=6,Lr=7,pn=8,Ki=9,gr=10,At=11,qi=12,us=13,sr=14,gn=15,mr=16,zr=17,Xi=18,Nr=19,vr=20,ti=21,Bi=22,_n=23,Xn=24,Ot=25,yr=1,Oo=2,Zi=7,ni=9,An=11;function Zn(t){return Array.isArray(t)&&"object"==typeof t[yr]}function Yn(t){return Array.isArray(t)&&!0===t[yr]}function Bs(t){return 0!=(4&t.flags)}function ji(t){return t.componentOffset>-1}function ds(t){return 1==(1&t.flags)}function Ii(t){return!!t.template}function br(t){return 0!=(512&t[Dt])}function Vn(t,i){return t.hasOwnProperty(Gi)?t[Gi]:null}let Qn=null,Kr=!1;function xi(t){const i=Qn;return Qn=t,i}const qr={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ma(t){if(!$s(t)||t.dirty){if(!t.producerMustRecompute(t)&&!ho(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function fs(t){t.dirty=!0,function va(t){if(void 0===t.liveConsumerNode)return;const i=Kr;Kr=!0;try{for(const r of t.liveConsumerNode)r.dirty||fs(r)}finally{Kr=i}}(t),t.consumerMarkedDirty?.(t)}function Us(t){return t&&(t.nextProducerIndex=0),xi(t)}function Xr(t,i){if(xi(i),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if($s(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)xn(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ho(t){Vi(t);for(let i=0;i<t.producerNode.length;i++){const r=t.producerNode[i],o=t.producerLastReadVersion[i];if(o!==r.version||(ma(r),o!==r.version))return!0}return!1}function ya(t){if(Vi(t),$s(t))for(let i=0;i<t.producerNode.length;i++)xn(t.producerNode[i],t.producerIndexOfThis[i]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xn(t,i){if(function Bo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Vi(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)xn(t.producerNode[o],t.producerIndexOfThis[o]);const r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[i]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[i]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,i<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[i],l=t.liveConsumerNode[i];Vi(l),l.producerIndexOfThis[o]=i}}function $s(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let _=null;function mn(t){const i=xi(null);try{return t()}finally{xi(i)}}const Tn=()=>{},or=(()=>({...qr,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Tn}))();class ar{constructor(i,r,o){this.previousValue=i,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function ui(){return lr}function lr(t){return t.type.prototype.ngOnChanges&&(t.setInput=Zr),kr}function kr(){const t=Gs(this),i=t?.current;if(i){const r=t.previous;if(r===Bn)t.previous=i;else for(let o in i)r[o]=i[o];t.current=null,this.ngOnChanges(i)}}function Zr(t,i,r,o){const l=this.declaredInputs[r],d=Gs(t)||function Dc(t,i){return t[rl]=i}(t,{previous:Bn,current:null}),p=d.current||(d.current={}),v=d.previous,w=v[l];p[l]=new ar(w&&w.currentValue,i,v===Bn),t[o]=i}ui.ngInherit=!0;const rl="__ngSimpleChanges__";function Gs(t){return t[rl]||null}const cr=function(t,i,r){},sl="svg";function dn(t){for(;Array.isArray(t);)t=t[fn];return t}function mi(t,i){return dn(i[t])}function Ti(t,i){return dn(i[t.index])}function Pn(t,i){return t.data[i]}function Pi(t,i){const r=i[t];return Zn(r)?r:r[fn]}function ii(t,i){return null==i?null:t[i]}function Cn(t){t[zr]=0}function Jn(t){1024&t[Dt]||(t[Dt]|=1024,wa(t,1))}function Ea(t){1024&t[Dt]&&(t[Dt]&=-1025,wa(t,-1))}function wa(t,i){let r=t[rn];if(null===r)return;r[In]+=i;let o=r;for(r=r[rn];null!==r&&(1===i&&1===o[In]||-1===i&&0===o[In]);)r[In]+=i,o=r,r=r[rn]}const St={lFrame:_t(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ul(){return St.bindingsEnabled}function Oe(){return St.lFrame.lView}function zt(){return St.lFrame.tView}function Ic(t){return St.lFrame.contextLView=t,t[pn]}function Da(t){return St.lFrame.contextLView=null,t}function ri(){let t=hl();for(;null!==t&&64===t.type;)t=t.parent;return t}function hl(){return St.lFrame.currentTNode}function _r(t,i){const r=St.lFrame;r.currentTNode=t,r.isParent=i}function Sa(){return St.lFrame.isParent}function go(){return St.lFrame.bindingIndex++}function Jr(t){const i=St.lFrame,r=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,r}function y(t,i){const r=St.lFrame;r.bindingIndex=r.bindingRootIndex=t,m(i)}function m(t){St.lFrame.currentDirectiveIndex=t}function x(){return St.lFrame.currentQueryIndex}function N(t){St.lFrame.currentQueryIndex=t}function H(t){const i=t[Ke];return 2===i.type?i.declTNode:1===i.type?t[Hn]:null}function ie(t,i,r){if(r&Be.SkipSelf){let l=i,d=t;for(;!(l=l.parent,null!==l||r&Be.Host||(l=H(d),null===l||(d=d[sr],10&l.type))););if(null===l)return!1;i=l,t=d}const o=St.lFrame=Xe();return o.currentTNode=i,o.lView=t,!0}function Z(t){const i=Xe(),r=t[Ke];St.lFrame=i,i.currentTNode=r.firstChild,i.lView=t,i.tView=r,i.contextLView=t,i.bindingIndex=r.bindingStartIndex,i.inI18n=!1}function Xe(){const t=St.lFrame,i=null===t?null:t.child;return null===i?_t(t):i}function _t(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function Qt(){const t=St.lFrame;return St.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ut=Qt;function yi(){const t=Qt();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Un(){return St.lFrame.selectedIndex}function di(t){St.lFrame.selectedIndex=t}function xt(){const t=St.lFrame;return Pn(t.tView,t.selectedIndex)}function ju(){St.lFrame.currentNamespace=sl}function Pc(){!function Th(){St.lFrame.currentNamespace=null}()}let pl=!0;function gl(){return pl}function vs(t){pl=t}function Dn(t,i){for(let r=i.directiveStart,o=i.directiveEnd;r<o;r++){const d=t.data[r].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:I,ngOnDestroy:L}=d;p&&(t.contentHooks??=[]).push(-r,p),v&&((t.contentHooks??=[]).push(r,v),(t.contentCheckHooks??=[]).push(r,v)),w&&(t.viewHooks??=[]).push(-r,w),I&&((t.viewHooks??=[]).push(r,I),(t.viewCheckHooks??=[]).push(r,I)),null!=L&&(t.destroyHooks??=[]).push(r,L)}}function ys(t,i,r){Kt(t,i,3,r)}function bs(t,i,r,o){(3&t[Dt])===r&&Kt(t,i,r,o)}function Er(t,i){let r=t[Dt];(3&r)===i&&(r&=8191,r+=1,t[Dt]=r)}function Kt(t,i,r,o){const d=o??-1,p=i.length-1;let v=0;for(let w=void 0!==o?65535&t[zr]:0;w<p;w++)if("number"==typeof i[w+1]){if(v=i[w],null!=o&&v>=o)break}else i[w]<0&&(t[zr]+=65536),(v<d||-1==d)&&(Sg(t,r,i,w),t[zr]=(4294901760&t[zr])+w+2),w++}function bi(t,i){cr(4,t,i);const r=xi(null);try{i.call(t)}finally{xi(r),cr(5,t,i)}}function Sg(t,i,r,o){const l=r[o]<0,d=r[o+1],v=t[l?-r[o]:r[o]];l?t[Dt]>>13<t[zr]>>16&&(3&t[Dt])===i&&(t[Dt]+=8192,bi(v,d)):bi(v,d)}const xa=-1;class Ta{constructor(i,r,o){this.factory=i,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function zu(t){return t!==xa}function Ra(t){return 32767&t}function Oa(t,i){let r=function Oh(t){return t>>16}(t),o=i;for(;r>0;)o=o[sr],r--;return o}let Wu=!0;function La(t){const i=Wu;return Wu=t,i}const Gu=255,Oc=5;let xg=0;const es={};function vl(t,i){const r=Ku(t,i);if(-1!==r)return r;const o=i[Ke];o.firstCreatePass&&(t.injectorIndex=i.length,Yu(o.data,t),Yu(i,null),Yu(o.blueprint,null));const l=Lc(t,i),d=t.injectorIndex;if(zu(l)){const p=Ra(l),v=Oa(l,i),w=v[Ke].data;for(let I=0;I<8;I++)i[d+I]=v[p+I]|w[p+I]}return i[d+8]=l,d}function Yu(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Ku(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function Lc(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,o=null,l=i;for(;null!==l;){if(o=td(l),null===o)return xa;if(r++,l=l[sr],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return xa}function qu(t,i,r){!function Lh(t,i,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(nr)&&(o=r[nr]),null==o&&(o=r[nr]=xg++);const l=o&Gu;i.data[t+(l>>Oc)]|=1<<l}(t,i,r)}function wr(t,i,r){if(r&Be.Optional||void 0!==t)return t;on()}function Xu(t,i,r,o){if(r&Be.Optional&&void 0===o&&(o=null),!(r&(Be.Self|Be.Host))){const l=t[Ki],d=bn(void 0);try{return l?l.get(i,o,r&Be.Optional):ze(i,o,r&Be.Optional)}finally{bn(d)}}return wr(o,0,r)}function Zu(t,i,r,o=Be.Default,l){if(null!==t){if(2048&i[Dt]&&!(o&Be.Self)){const p=function Bh(t,i,r,o,l){let d=t,p=i;for(;null!==d&&null!==p&&2048&p[Dt]&&!(512&p[Dt]);){const v=Qu(d,p,r,o|Be.Self,es);if(v!==es)return v;let w=d.parent;if(!w){const I=p[vr];if(I){const L=I.get(r,es,o);if(L!==es)return L}w=td(p),p=p[sr]}d=w}return l}(t,i,r,o,es);if(p!==es)return p}const d=Qu(t,i,r,o,es);if(d!==es)return d}return Xu(i,r,o,l)}function Qu(t,i,r,o,l){const d=function kh(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(nr)?t[nr]:void 0;return"number"==typeof i?i>=0?i&Gu:Fh:i}(r);if("function"==typeof d){if(!ie(i,t,o))return o&Be.Host?wr(l,0,o):Xu(i,r,o,l);try{let p;if(p=d(o),null!=p||o&Be.Optional)return p;on()}finally{Ut()}}else if("number"==typeof d){let p=null,v=Ku(t,i),w=xa,I=o&Be.Host?i[gn][Hn]:null;for((-1===v||o&Be.SkipSelf)&&(w=-1===v?Lc(t,i):i[v+8],w!==xa&&ed(o,!1)?(p=i[Ke],v=Ra(w),i=Oa(w,i)):v=-1);-1!==v;){const L=i[Ke];if(Ju(d,v,L.data)){const B=Nh(v,i,r,p,o,I);if(B!==es)return B}w=i[v+8],w!==xa&&ed(o,i[Ke].data[v+8]===I)&&Ju(d,v,i)?(p=L,v=Ra(w),i=Oa(w,i)):v=-1}}return l}function Nh(t,i,r,o,l,d){const p=i[Ke],v=p.data[t+8],L=yl(v,p,r,null==o?ji(v)&&Wu:o!=p&&0!=(3&v.type),l&Be.Host&&d===v);return null!==L?vo(i,p,L,v):es}function yl(t,i,r,o,l){const d=t.providerIndexes,p=i.data,v=1048575&d,w=t.directiveStart,L=d>>20,W=l?v+L:t.directiveEnd;for(let K=o?v:v+L;K<W;K++){const be=p[K];if(K<w&&r===be||K>=w&&be.type===r)return K}if(l){const K=p[w];if(K&&Ii(K)&&K.type===r)return w}return null}function vo(t,i,r,o){let l=t[r];const d=i.data;if(function $u(t){return t instanceof Ta}(l)){const p=l;p.resolving&&function si(t,i){const r=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new we(-200,`Circular dependency in DI detected for ${t}${r}`)}(function ot(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():et(t)}(d[r]));const v=La(p.canSeeViewProviders);p.resolving=!0;const I=p.injectImpl?bn(p.injectImpl):null;ie(t,o,Be.Default);try{l=t[r]=p.factory(void 0,d,t,o),i.firstCreatePass&&r>=o.directiveStart&&function Uu(t,i,r){const{ngOnChanges:o,ngOnInit:l,ngDoCheck:d}=i.type.prototype;if(o){const p=lr(i);(r.preOrderHooks??=[]).push(t,p),(r.preOrderCheckHooks??=[]).push(t,p)}l&&(r.preOrderHooks??=[]).push(0-t,l),d&&((r.preOrderHooks??=[]).push(t,d),(r.preOrderCheckHooks??=[]).push(t,d))}(r,d[r],i)}finally{null!==I&&bn(I),La(v),p.resolving=!1,Ut()}}return l}function Ju(t,i,r){return!!(r[i+(t>>Oc)]&1<<t)}function ed(t,i){return!(t&Be.Self||t&Be.Host&&i)}class Ri{constructor(i,r){this._tNode=i,this._lView=r}get(i,r,o){return Zu(this._tNode,this._lView,i,Ts(o),r)}}function Fh(){return new Ri(ri(),Oe())}function _s(t){return ki(()=>{const i=t.prototype.constructor,r=i[Gi]||Nc(i),o=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==o;){const d=l[Gi]||Nc(l);if(d&&d!==r)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function Nc(t){return ct(t)?()=>{const i=Nc(_e(t));return i&&i()}:Vn(t)}function td(t){const i=t[Ke],r=i.type;return 2===r?i.declTNode:1===r?t[Hn]:null}function _l(t){return function Tg(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const r=t.attrs;if(r){const o=r.length;let l=0;for(;l<o;){const d=r[l];if(oo(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<o&&"string"==typeof r[l];)l++;else{if(d===i)return r[l+1];l+=2}}}return null}(ri(),t)}const bo="__parameters__";function Uo(t,i,r){return ki(()=>{const o=function kc(t){return function(...r){if(t){const o=t(...r);for(const l in o)this[l]=o[l]}}}(i);function l(...d){if(this instanceof l)return o.apply(this,d),this;const p=new l(...d);return v.annotation=p,v;function v(w,I,L){const B=w.hasOwnProperty(bo)?w[bo]:Object.defineProperty(w,bo,{value:[]})[bo];for(;B.length<=L;)B.push(null);return(B[L]=B[L]||[]).push(p),w}}return r&&(l.prototype=Object.create(r.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function hi(t,i){t.forEach(r=>Array.isArray(r)?hi(r,i):i(r))}function ad(t,i,r){i>=t.length?t.push(r):t.splice(i,0,r)}function El(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function Ar(t,i,r){let o=Fa(t,i);return o>=0?t[1|o]=r:(o=~o,function Ng(t,i,r,o){let l=t.length;if(l==i)t.push(r,o);else if(1===l)t.push(o,t[0]),t[0]=r;else{for(l--,t.push(t[l-1],t[l]);l>i;)t[l]=t[l-2],l--;t[i]=r,t[i+1]=o}}(t,o,i,r)),o}function Bc(t,i){const r=Fa(t,i);if(r>=0)return t[1|r]}function Fa(t,i){return function $h(t,i,r){let o=0,l=t.length>>r;for(;l!==o;){const d=o+(l-o>>1),p=t[d<<r];if(i===p)return d<<r;p>i?l=d:o=d+1}return~(l<<r)}(t,i,1)}const jc=Tr(Uo("Optional"),8),Hc=Tr(Uo("SkipSelf"),4);function Il(t){return 128==(128&t.flags)}var xl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(xl||{});const Pl=new Map;let sf=0;const Qc="__ngContext__";function _i(t,i){Zn(i)?(t[Qc]=i[Nr],function af(t){Pl.set(t[Nr],t)}(i)):t[Qc]=i}let Jc;function Ll(t,i){return Jc(t,i)}function Ua(t){const i=t[rn];return Yn(i)?i[rn]:i}function Ed(t){return eu(t[qi])}function wd(t){return eu(t[gi])}function eu(t){for(;null!==t&&!Yn(t);)t=t[gi];return t}function Go(t,i,r,o,l){if(null!=o){let d,p=!1;Yn(o)?d=o:Zn(o)&&(p=!0,o=o[fn]);const v=dn(o);0===t&&null!==r?null==l?ts(i,r,v):Zs(i,r,v,l||null,!0):1===t&&null!==r?Zs(i,r,v,l||null,!0):2===t?function Wa(t,i,r){const o=Ko(t,i);o&&function nu(t,i,r,o){t.removeChild(i,r,o)}(t,o,i,r)}(i,v,p):3===t&&i.destroyNode(v),null!=d&&function Rd(t,i,r,o,l){const d=r[Zi];d!==dn(r)&&Go(i,t,o,d,l);for(let v=An;v<r.length;v++){const w=r[v];Cs(w[Ke],w,t,i,o,d)}}(i,t,d,r,l)}}function $a(t,i,r){return t.createElement(i,r)}function Dd(t,i){const r=t[ni],o=r.indexOf(i);Ea(i),r.splice(o,1)}function Fl(t,i){if(t.length<=An)return;const r=An+i,o=t[r];if(o){const l=o[mr];null!==l&&l!==t&&Dd(l,o),i>0&&(t[r-1][gi]=o[gi]);const d=El(t,An+i);!function Ad(t,i){Cs(t,i,i[At],2,null,null),i[fn]=null,i[Hn]=null}(o[Ke],o);const p=d[Xi];null!==p&&p.detachView(d[Ke]),o[rn]=null,o[gi]=null,o[Dt]&=-129}return o}function As(t,i){if(!(256&i[Dt])){const r=i[At];i[_n]&&ya(i[_n]),i[Xn]&&ya(i[Xn]),r.destroyNode&&Cs(t,i,r,3,null,null),function mf(t){let i=t[qi];if(!i)return Ao(t[Ke],t);for(;i;){let r=null;if(Zn(i))r=i[qi];else{const o=i[An];o&&(r=o)}if(!r){for(;i&&!i[gi]&&i!==t;)Zn(i)&&Ao(i[Ke],i),i=i[rn];null===i&&(i=t),Zn(i)&&Ao(i[Ke],i),r=i&&i[gi]}i=r}}(i)}}function Ao(t,i){if(!(256&i[Dt])){i[Dt]&=-129,i[Dt]|=256,function _f(t,i){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let o=0;o<r.length;o+=2){const l=i[r[o]];if(!(l instanceof Ta)){const d=r[o+1];if(Array.isArray(d))for(let p=0;p<d.length;p+=2){const v=l[d[p]],w=d[p+1];cr(4,v,w);try{w.call(v)}finally{cr(5,v,w)}}else{cr(4,l,d);try{d.call(l)}finally{cr(5,l,d)}}}}}(t,i),function bf(t,i){const r=t.cleanup,o=i[Lr];if(null!==r)for(let d=0;d<r.length-1;d+=2)if("string"==typeof r[d]){const p=r[d+3];p>=0?o[p]():o[-p].unsubscribe(),d+=2}else r[d].call(o[r[d+1]]);null!==o&&(i[Lr]=null);const l=i[ti];if(null!==l){i[ti]=null;for(let d=0;d<l.length;d++)(0,l[d])()}}(t,i),1===i[Ke].type&&i[At].destroy();const r=i[mr];if(null!==r&&Yn(i[rn])){r!==i[rn]&&Dd(r,i);const o=i[Xi];null!==o&&o.detachView(t)}!function lf(t){Pl.delete(t[Nr])}(i)}}function Yo(t,i,r){return function Ef(t,i,r){let o=i;for(;null!==o&&40&o.type;)o=(i=o).parent;if(null===o)return r[fn];{const{componentOffset:l}=o;if(l>-1){const{encapsulation:d}=t.data[o.directiveStart+l];if(d===Fi.None||d===Fi.Emulated)return null}return Ti(o,r)}}(t,i.parent,r)}function Zs(t,i,r,o,l){t.insertBefore(i,r,o,l)}function ts(t,i,r){t.appendChild(i,r)}function Sd(t,i,r,o,l){null!==o?Zs(t,i,r,o,l):ts(t,i,r)}function Ko(t,i){return t.parentNode(i)}let za,Qo,Ga,xd=function Id(t,i,r){return 40&t.type?Ti(t,r):null};function qo(t,i,r,o){const l=Yo(t,o,i),d=i[At],v=function Md(t,i,r){return xd(t,i,r)}(o.parent||i[Hn],o,i);if(null!=l)if(Array.isArray(r))for(let w=0;w<r.length;w++)Sd(d,l,r[w],v,!1);else Sd(d,l,r,v,!1);void 0!==za&&za(d,o,i,r,l)}function Ji(t,i){if(null!==i){const r=i.type;if(3&r)return Ti(i,t);if(4&r)return iu(-1,t[i.index]);if(8&r){const o=i.child;if(null!==o)return Ji(t,o);{const l=t[i.index];return Yn(l)?iu(-1,l):dn(l)}}if(32&r)return Ll(i,t)()||dn(t[i.index]);{const o=Td(t,i);return null!==o?Array.isArray(o)?o[0]:Ji(Ua(t[gn]),o):Ji(t,i.next)}}return null}function Td(t,i){return null!==i?t[gn][Hn].projection[i.projection]:null}function iu(t,i){const r=An+t+1;if(r<i.length){const o=i[r],l=o[Ke].firstChild;if(null!==l)return Ji(o,l)}return i[Zi]}function Bl(t,i,r,o,l,d,p){for(;null!=r;){const v=o[r.index],w=r.type;if(p&&0===i&&(v&&_i(dn(v),o),r.flags|=2),32!=(32&r.flags))if(8&w)Bl(t,i,r.child,o,l,d,!1),Go(i,t,l,v,d);else if(32&w){const I=Ll(r,o);let L;for(;L=I();)Go(i,t,l,L,d);Go(i,t,l,v,d)}else 16&w?Co(t,i,o,r,l,d):Go(i,t,l,v,d);r=p?r.projectionNext:r.next}}function Cs(t,i,r,o,l,d){Bl(r,o,t.firstChild,i,l,d,!1)}function Co(t,i,r,o,l,d){const p=r[gn],w=p[Hn].projection[o.projection];if(Array.isArray(w))for(let I=0;I<w.length;I++)Go(i,t,l,w[I],d);else{let I=w;const L=p[rn];Il(o)&&(I.flags|=128),Bl(t,i,I,L,l,d,!0)}}function ru(t,i,r){""===r?t.removeAttribute(i,"class"):t.setAttribute(i,"class",r)}function Od(t,i,r){const{mergedAttrs:o,classes:l,styles:d}=r;null!==o&&ir(t,i,o),null!==l&&ru(t,i,l),null!==d&&function Sf(t,i,r){t.setAttribute(i,"style",r)}(t,i,d)}function Nd(t){Qo=t}function kd(t){return function ou(){if(void 0===Ga&&(Ga=null,Vt.trustedTypes))try{Ga=Vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ga}()?.createScriptURL(t)||t}class Fd{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ue})`}}function Qs(t){return t instanceof Fd?t.changingThisBreaksApplicationSecurity:t}function ta(t,i){const r=function Of(t){return t instanceof Fd&&t.getTypeName()||null}(t);if(null!=r&&r!==i){if("ResourceURL"===r&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${r} (see ${Ue})`)}return r===i}const jf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var O=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(O||{});function G(t){const i=re();return i?i.sanitize(O.URL,t)||"":ta(t,"URL")?Qs(t):function au(t){return(t=String(t)).match(jf)?t:"unsafe:"+t}(et(t))}function U(t){const i=re();if(i)return kd(i.sanitize(O.RESOURCE_URL,t)||"");if(ta(t,"ResourceURL"))return kd(Qs(t));throw new we(904,!1)}function ye(t,i,r){return function ve(t,i){return"src"===i&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===i&&("base"===t||"link"===t)?U:G}(i,r)(t)}function re(){const t=Oe();return t&&t[gr].sanitizer}const je=new Nt("ENVIRONMENT_INITIALIZER"),nt=new Nt("INJECTOR",-1),Jt=new Nt("INJECTOR_DEF_TYPES");class sn{get(i,r=Y){if(r===Y){const o=new Error(`NullInjectorError: No provider for ${vt(i)}!`);throw o.name="NullInjectorError",o}return r}}function en(t){return{\u0275providers:t}}function zn(...t){return{\u0275providers:Ei(0,t),\u0275fromNgModule:!0}}function Ei(t,...i){const r=[],o=new Set;let l;const d=p=>{r.push(p)};return hi(i,p=>{const v=p;Lt(v,d,[],o)&&(l||=[],l.push(v))}),void 0!==l&&Pt(l,d),r}function Pt(t,i){for(let r=0;r<t.length;r++){const{ngModule:o,providers:l}=t[r];na(l,d=>{i(d,o)})}}function Lt(t,i,r,o){if(!(t=_e(t)))return!1;let l=null,d=Tt(t);const p=!d&&jt(t);if(d||p){if(p&&!p.standalone)return!1;l=t}else{const w=t.ngModule;if(d=Tt(w),!d)return!1;l=w}const v=o.has(l);if(p){if(v)return!1;if(o.add(l),p.dependencies){const w="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const I of w)Lt(I,i,r,o)}}else{if(!d)return!1;{if(null!=d.imports&&!v){let I;o.add(l);try{hi(d.imports,L=>{Lt(L,i,r,o)&&(I||=[],I.push(L))})}finally{}void 0!==I&&Pt(I,i)}if(!v){const I=Vn(l)||(()=>new l);i({provide:l,useFactory:I,deps:Bt},l),i({provide:Jt,useValue:l,multi:!0},l),i({provide:je,useValue:()=>Fn(l),multi:!0},l)}const w=d.providers;if(null!=w&&!v){const I=t;na(w,L=>{i(L,I)})}}}return l!==t&&void 0!==t.providers}function na(t,i){for(let r of t)Ye(r)&&(r=r.\u0275providers),Array.isArray(r)?na(r,i):i(r)}const Vl=qe({provide:String,useValue:qe});function wi(t){return null!==t&&"object"==typeof t&&Vl in t}function dr(t){return"function"==typeof t}const Kn=new Nt("Set Injector scope."),Cr={},zd={};let Hf;function Wd(){return void 0===Hf&&(Hf=new sn),Hf}class eo{}class Ul extends eo{get destroyed(){return this._destroyed}constructor(i,r,o,l){super(),this.parent=r,this.source=o,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uf(i,p=>this.processProvider(p)),this.records.set(nt,$l(void 0,this)),l.has("environment")&&this.records.set(eo,$l(void 0,this));const d=this.records.get(Kn);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(Jt.multi,Bt,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of i)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(i){return this.assertNotDestroyed(),this._onDestroyHooks.push(i),()=>this.removeOnDestroy(i)}runInContext(i){this.assertNotDestroyed();const r=Di(this),o=bn(void 0);try{return i()}finally{Di(r),bn(o)}}get(i,r=Y,o=Be.Default){if(this.assertNotDestroyed(),i.hasOwnProperty(aa))return i[aa](this);o=Ts(o);const d=Di(this),p=bn(void 0);try{if(!(o&Be.SkipSelf)){let w=this.records.get(i);if(void 0===w){const I=function j_(t){return"function"==typeof t||"object"==typeof t&&t instanceof Nt}(i)&&un(i);w=I&&this.injectableDefInScope(I)?$l(Vf(i),Cr):null,this.records.set(i,w)}if(null!=w)return this.hydrate(i,w)}return(o&Be.Self?Wd():this.parent).get(i,r=o&Be.Optional&&r===Y?null:r)}catch(v){if("NullInjectorError"===v.name){if((v[Qe]=v[Qe]||[]).unshift(vt(i)),d)throw v;return function Sn(t,i,r,o){const l=t[Qe];throw i[wn]&&l.unshift(i[wn]),t.message=function oa(t,i,r,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=vt(i);if(Array.isArray(i))l=i.map(vt).join(" -> ");else if("object"==typeof i){let d=[];for(let p in i)if(i.hasOwnProperty(p)){let v=i[p];d.push(p+":"+("string"==typeof v?JSON.stringify(v):vt(v)))}l=`{${d.join(", ")}}`}return`${r}${o?"("+o+")":""}[${l}]: ${t.replace(tn,"\n  ")}`}("\n"+t.message,l,r,o),t.ngTokenPath=l,t[Qe]=null,t}(v,i,"R3InjectorError",this.source)}throw v}finally{bn(p),Di(d)}}resolveInjectorInitializers(){const i=Di(this),r=bn(void 0);try{const l=this.get(je.multi,Bt,Be.Self);for(const d of l)d()}finally{Di(i),bn(r)}}toString(){const i=[],r=this.records;for(const o of r.keys())i.push(vt(o));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(i){let r=dr(i=_e(i))?i:_e(i&&i.provide);const o=function k_(t){return wi(t)?$l(void 0,t.useValue):$l(em(t),Cr)}(i);if(dr(i)||!0!==i.multi)this.records.get(r);else{let l=this.records.get(r);l||(l=$l(void 0,Cr,!0),l.factory=()=>Ps(l.multi),this.records.set(r,l)),r=i,l.multi.push(i)}this.records.set(r,o)}hydrate(i,r){return r.value===Cr&&(r.value=zd,r.value=r.factory()),"object"==typeof r.value&&r.value&&function B_(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}injectableDefInScope(i){if(!i.providedIn)return!1;const r=_e(i.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(i){const r=this._onDestroyHooks.indexOf(i);-1!==r&&this._onDestroyHooks.splice(r,1)}}function Vf(t){const i=un(t),r=null!==i?i.factory:Vn(t);if(null!==r)return r;if(t instanceof Nt)throw new we(204,!1);if(t instanceof Function)return function N_(t){const i=t.length;if(i>0)throw function ur(t,i){const r=[];for(let o=0;o<t;o++)r.push(i);return r}(i,"?"),new we(204,!1);const r=function gt(t){return t&&(t[Ne]||t[$e])||null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new we(204,!1)}function em(t,i,r){let o;if(dr(t)){const l=_e(t);return Vn(l)||Vf(l)}if(wi(t))o=()=>_e(t.useValue);else if(function Ka(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Ps(t.deps||[]));else if(function fi(t){return!(!t||!t.useExisting)}(t))o=()=>Fn(_e(t.useExisting));else{const l=_e(t&&(t.useClass||t.provide));if(!function F_(t){return!!t.deps}(t))return Vn(l)||Vf(l);o=()=>new l(...Ps(t.deps))}return o}function $l(t,i,r=!1){return{factory:t,value:i,multi:r?[]:void 0}}function Uf(t,i){for(const r of t)Array.isArray(r)?Uf(r,i):r&&Ye(r)?Uf(r.\u0275providers,i):i(r)}const tm=new Nt("AppId",{providedIn:"root",factory:()=>H_}),H_="ng",nm=new Nt("Platform Initializer"),$f=new Nt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),V_=new Nt("CSP nonce",{providedIn:"root",factory:()=>function Jo(){if(void 0!==Qo)return Qo;if(typeof document<"u")return document;throw new we(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let im=(t,i,r)=>null;function Zf(t,i,r=!1){return im(t,i,r)}class Z_{}class om{}class J_{resolveComponentFactory(i){throw function Q_(t){const i=Error(`No component factory found for ${vt(t)}.`);return i.ngComponent=t,i}(i)}}let Zd=(()=>{class t{static#e=this.NULL=new J_}return t})();function e0(){return Gl(ri(),Oe())}function Gl(t,i){return new hu(Ti(t,i))}let hu=(()=>{class t{constructor(r){this.nativeElement=r}static#e=this.__NG_ELEMENT_ID__=e0}return t})();function t0(t){return t instanceof hu?t.nativeElement:t}class lm{}let n0=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function r0(){const t=Oe(),r=Pi(ri().index,t);return(Zn(r)?r:t)[At]}()}return t})(),s0=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>null})}return t})();class cm{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const o0=new cm("16.2.12"),ep={};function fm(t,i=null,r=null,o){const l=pm(t,i,r,o);return l.resolveInjectorInitializers(),l}function pm(t,i=null,r=null,o,l=new Set){const d=[r||Bt,zn(t)];return o=o||("object"==typeof t?void 0:vt(t)),new Ul(d,i||Wd(),o||null,l)}let Ss=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Y;static#t=this.NULL=new sn;static create(r,o){if(Array.isArray(r))return fm({name:""},o,r,"");{const l=r.name??"";return fm({name:l},r.parent,r.providers,l)}}static#n=this.\u0275prov=tt({token:t,providedIn:"any",factory:()=>Fn(nt)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function np(t){return t.ngOriginalError}class ia{constructor(){this._console=console}handleError(i){const r=this._findOriginalError(i);this._console.error("ERROR",i),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(i){let r=i&&np(i);for(;r&&np(r);)r=np(r);return r||null}}function rp(t){return i=>{setTimeout(t,void 0,i)}}const to=class f0 extends M.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,r,o){let l=i,d=r||(()=>null),p=o;if(i&&"object"==typeof i){const w=i;l=w.next?.bind(w),d=w.error?.bind(w),p=w.complete?.bind(w)}this.__isAsync&&(d=rp(d),l&&(l=rp(l)),p&&(p=rp(p)));const v=super.subscribe({next:l,error:d,complete:p});return i instanceof z.w0&&i.add(v),v}};function mm(...t){}class Oi{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&r,l.shouldCoalesceRunChangeDetection=o,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function p0(){const t="function"==typeof Vt.requestAnimationFrame;let i=Vt[t?"requestAnimationFrame":"setTimeout"],r=Vt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&i&&r){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function v0(t){const i=()=>{!function m0(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Vt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,op(t),t.isCheckStableRunning=!0,sp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),op(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,l,d,p,v)=>{if(function b0(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(v))return r.invokeTask(l,d,p,v);try{return vm(t),r.invokeTask(l,d,p,v)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&i(),ym(t)}},onInvoke:(r,o,l,d,p,v,w)=>{try{return vm(t),r.invoke(l,d,p,v,w)}finally{t.shouldCoalesceRunChangeDetection&&i(),ym(t)}},onHasTask:(r,o,l,d)=>{r.hasTask(l,d),o===l&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,op(t),sp(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(r,o,l,d)=>(r.handleError(l,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Oi.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Oi.isInAngularZone())throw new we(909,!1)}run(i,r,o){return this._inner.run(i,r,o)}runTask(i,r,o,l){const d=this._inner,p=d.scheduleEventTask("NgZoneEvent: "+l,i,g0,mm,mm);try{return d.runTask(p,r,o)}finally{d.cancelTask(p)}}runGuarded(i,r,o){return this._inner.runGuarded(i,r,o)}runOutsideAngular(i){return this._outer.run(i)}}const g0={};function sp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function op(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ym(t){t._nesting--,sp(t)}class y0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(i,r,o){return i.apply(r,o)}runGuarded(i,r,o){return i.apply(r,o)}runOutsideAngular(i){return i()}runTask(i,r,o,l){return i.apply(r,o)}}const bm=new Nt("",{providedIn:"root",factory:_m});function _m(){const t=Yt(Oi);let i=!0;const r=new se.y(l=>{i=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(i),l.complete()})}),o=new se.y(l=>{let d;t.runOutsideAngular(()=>{d=t.onStable.subscribe(()=>{Oi.assertNotInAngularZone(),queueMicrotask(()=>{!i&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(i=!0,l.next(!0))})})});const p=t.onUnstable.subscribe(()=>{Oi.assertInAngularZone(),i&&(i=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{d.unsubscribe(),p.unsubscribe()}});return(0,ee.T)(r,o.pipe(xe()))}function Do(t){return t instanceof Function?t():t}let ap=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new t})}return t})();function fu(t){for(;t;){t[Dt]|=64;const i=Ua(t);if(br(t)&&!i)return t;t=i}return null}const Dm=new Nt("",{providedIn:"root",factory:()=>!1});let Jd=null;function xm(t,i){return t[i]??Rm()}function Tm(t,i){const r=Rm();r.producerNode?.length&&(t[i]=Jd,r.lView=t,Jd=Pm())}const x0={...qr,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{fu(t.lView)},lView:null};function Pm(){return Object.create(x0)}function Rm(){return Jd??=Pm(),Jd}const Ft={};function Om(t){Lm(zt(),Oe(),Un()+t,!1)}function Lm(t,i,r,o){if(!o)if(3==(3&i[Dt])){const d=t.preOrderCheckHooks;null!==d&&ys(i,d,r)}else{const d=t.preOrderHooks;null!==d&&bs(i,d,0,r)}di(r)}function ql(t,i=Be.Default){const r=Oe();return null===r?Fn(t,i):Zu(ri(),r,_e(t),i)}function Nm(){throw new Error("invalid")}function eh(t,i,r,o,l,d,p,v,w,I,L){const B=i.blueprint.slice();return B[fn]=l,B[Dt]=140|o,(null!==I||t&&2048&t[Dt])&&(B[Dt]|=2048),Cn(B),B[rn]=B[sr]=t,B[pn]=r,B[gr]=p||t&&t[gr],B[At]=v||t&&t[At],B[Ki]=w||t&&t[Ki]||null,B[Hn]=d,B[Nr]=function qc(){return sf++}(),B[Bi]=L,B[vr]=I,B[gn]=2==i.type?t[gn]:B,B}function Xl(t,i,r,o,l){let d=t.data[i];if(null===d)d=function lp(t,i,r,o,l){const d=hl(),p=Sa(),w=t.data[i]=function F0(t,i,r,o,l,d){let p=i?i.injectorIndex:-1,v=0;return function Ks(){return null!==St.skipHydrationRootTNode}()&&(v|=128),{type:r,index:o,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?d:d&&d.parent,r,i,o,l);return null===t.firstChild&&(t.firstChild=w),null!==d&&(p?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w,w.prev=d)),w}(t,i,r,o,l),function Bu(){return St.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=r,d.value=o,d.attrs=l;const p=function po(){const t=St.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();d.injectorIndex=null===p?-1:p.injectorIndex}return _r(d,!0),d}function pu(t,i,r,o){if(0===r)return-1;const l=i.length;for(let d=0;d<r;d++)i.push(o),t.blueprint.push(o),t.data.push(null);return l}function km(t,i,r,o,l){const d=xm(i,_n),p=Un(),v=2&o;try{di(-1),v&&i.length>Ot&&Lm(t,i,Ot,!1),cr(v?2:0,l);const I=v?d:null,L=Us(I);try{null!==I&&(I.dirty=!1),r(o,l)}finally{Xr(I,L)}}finally{v&&null===i[_n]&&Tm(i,_n),di(p),cr(v?3:1,l)}}function cp(t,i,r){if(Bs(i)){const o=xi(null);try{const d=i.directiveEnd;for(let p=i.directiveStart;p<d;p++){const v=t.data[p];v.contentQueries&&v.contentQueries(1,r[p],p)}}finally{xi(o)}}}function up(t,i,r){ul()&&(function z0(t,i,r,o){const l=r.directiveStart,d=r.directiveEnd;ji(r)&&function Z0(t,i,r){const o=Ti(i,t),l=Fm(r);let p=16;r.signals?p=4096:r.onPush&&(p=64);const v=th(t,eh(t,l,null,p,o,i,null,t[gr].rendererFactory.createRenderer(o,r),null,null,null));t[i.index]=v}(i,r,t.data[l+r.componentOffset]),t.firstCreatePass||vl(r,i),_i(o,i);const p=r.initialInputs;for(let v=l;v<d;v++){const w=t.data[v],I=vo(i,t,v,r);_i(I,i),null!==p&&Q0(0,v-l,I,w,0,p),Ii(w)&&(Pi(r.index,i)[pn]=vo(i,t,v,r))}}(t,i,r,Ti(r,i)),64==(64&r.flags)&&Um(t,i,r))}function dp(t,i,r=Ti){const o=i.localNames;if(null!==o){let l=i.index+1;for(let d=0;d<o.length;d+=2){const p=o[d+1],v=-1===p?r(i,t):t[p];t[l++]=v}}}function Fm(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=hp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):i}function hp(t,i,r,o,l,d,p,v,w,I,L){const B=Ot+o,W=B+l,K=function P0(t,i){const r=[];for(let o=0;o<i;o++)r.push(o<t?null:Ft);return r}(B,W),be="function"==typeof I?I():I;return K[Ke]={type:t,blueprint:K,template:r,queries:null,viewQuery:v,declTNode:i,data:K.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:w,consts:be,incompleteFirstPass:!1,ssrId:L}}let Bm=t=>null;function jm(t,i,r,o){for(let l in t)if(t.hasOwnProperty(l)){r=null===r?{}:r;const d=t[l];null===o?Hm(r,i,l,d):o.hasOwnProperty(l)&&Hm(r,i,o[l],d)}return r}function Hm(t,i,r,o){t.hasOwnProperty(r)?t[r].push(i,o):t[r]=[i,o]}function Br(t,i,r,o,l,d,p,v){const w=Ti(i,r);let L,I=i.inputs;!v&&null!=I&&(L=I[o])?(vp(t,r,L,o,l),ji(i)&&function H0(t,i){const r=Pi(i,t);16&r[Dt]||(r[Dt]|=64)}(r,i.index)):3&i.type&&(o=function j0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),l=null!=p?p(l,i.value||"",o):l,d.setProperty(w,o,l))}function fp(t,i,r,o){if(ul()){const l=null===o?null:{"":-1},d=function G0(t,i){const r=t.directiveRegistry;let o=null,l=null;if(r)for(let d=0;d<r.length;d++){const p=r[d];if(Gn(i,p.selectors,!1))if(o||(o=[]),Ii(p))if(null!==p.findHostDirectiveDefs){const v=[];l=l||new Map,p.findHostDirectiveDefs(p,v,l),o.unshift(...v,p),pp(t,i,v.length)}else o.unshift(p),pp(t,i,0);else l=l||new Map,p.findHostDirectiveDefs?.(p,o,l),o.push(p)}return null===o?null:[o,l]}(t,r);let p,v;null===d?p=v=null:[p,v]=d,null!==p&&Vm(t,i,r,p,l,v),l&&function Y0(t,i,r){if(i){const o=t.localNames=[];for(let l=0;l<i.length;l+=2){const d=r[i[l+1]];if(null==d)throw new we(-301,!1);o.push(i[l],d)}}}(r,o,l)}r.mergedAttrs=rr(r.mergedAttrs,r.attrs)}function Vm(t,i,r,o,l,d){for(let I=0;I<o.length;I++)qu(vl(r,i),t,o[I].type);!function q0(t,i,r){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+r,t.providerIndexes=i}(r,t.data.length,o.length);for(let I=0;I<o.length;I++){const L=o[I];L.providersResolver&&L.providersResolver(L)}let p=!1,v=!1,w=pu(t,i,o.length,null);for(let I=0;I<o.length;I++){const L=o[I];r.mergedAttrs=rr(r.mergedAttrs,L.hostAttrs),X0(t,r,i,w,L),K0(w,L,l),null!==L.contentQueries&&(r.flags|=4),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(r.flags|=64);const B=L.type.prototype;!p&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),p=!0),!v&&(B.ngOnChanges||B.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),v=!0),w++}!function B0(t,i,r){const l=i.directiveEnd,d=t.data,p=i.attrs,v=[];let w=null,I=null;for(let L=i.directiveStart;L<l;L++){const B=d[L],W=r?r.get(B):null,be=W?W.outputs:null;w=jm(B.inputs,L,w,W?W.inputs:null),I=jm(B.outputs,L,I,be);const Fe=null===w||null===p||Mi(i)?null:J0(w,L,p);v.push(Fe)}null!==w&&(w.hasOwnProperty("class")&&(i.flags|=8),w.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=v,i.inputs=w,i.outputs=I}(t,r,d)}function Um(t,i,r){const o=r.directiveStart,l=r.directiveEnd,d=r.index,p=function C(){return St.lFrame.currentDirectiveIndex}();try{di(d);for(let v=o;v<l;v++){const w=t.data[v],I=i[v];m(v),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&W0(w,I)}}finally{di(-1),m(p)}}function W0(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function pp(t,i,r){i.componentOffset=r,(t.components??=[]).push(i.index)}function K0(t,i,r){if(r){if(i.exportAs)for(let o=0;o<i.exportAs.length;o++)r[i.exportAs[o]]=t;Ii(i)&&(r[""]=t)}}function X0(t,i,r,o,l){t.data[o]=l;const d=l.factory||(l.factory=Vn(l.type)),p=new Ta(d,Ii(l),ql);t.blueprint[o]=p,r[o]=p,function U0(t,i,r,o,l){const d=l.hostBindings;if(d){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const v=~i.index;(function $0(t){let i=t.length;for(;i>0;){const r=t[--i];if("number"==typeof r&&r<0)return r}return 0})(p)!=v&&p.push(v),p.push(r,o,d)}}(t,i,o,pu(t,r,l.hostVars,Ft),l)}function no(t,i,r,o,l,d){const p=Ti(t,i);!function gp(t,i,r,o,l,d,p){if(null==d)t.removeAttribute(i,l,r);else{const v=null==p?et(d):p(d,o||"",l);t.setAttribute(i,l,v,r)}}(i[At],p,d,t.value,r,o,l)}function Q0(t,i,r,o,l,d){const p=d[i];if(null!==p)for(let v=0;v<p.length;)$m(o,r,p[v++],p[v++],p[v++])}function $m(t,i,r,o,l){const d=xi(null);try{const p=t.inputTransforms;null!==p&&p.hasOwnProperty(o)&&(l=p[o].call(i,l)),null!==t.setInput?t.setInput(i,l,r,o):i[o]=l}finally{xi(d)}}function J0(t,i,r){let o=null,l=0;for(;l<r.length;){const d=r[l];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===o&&(o=[]);const p=t[d];for(let v=0;v<p.length;v+=2)if(p[v]===i){o.push(d,p[v+1],r[l+1]);break}}l+=2}else l+=2;else l+=4}return o}function zm(t,i,r,o){return[t,!0,!1,i,null,0,o,r,null,null,null]}function Wm(t,i){const r=t.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const d=r[o+1];if(-1!==d){const p=t.data[d];N(r[o]),p.contentQueries(2,i[d],d)}}}function th(t,i){return t[qi]?t[us][gi]=i:t[qi]=i,t[us]=i,i}function mp(t,i,r){N(0);const o=xi(null);try{i(t,r)}finally{xi(o)}}function Gm(t){return t[Lr]||(t[Lr]=[])}function Ym(t){return t.cleanup||(t.cleanup=[])}function qm(t,i){const r=t[Ki],o=r?r.get(ia,null):null;o&&o.handleError(i)}function vp(t,i,r,o,l){for(let d=0;d<r.length;){const p=r[d++],v=r[d++];$m(t.data[p],i[p],o,v,l)}}function So(t,i,r){const o=mi(i,t);!function kl(t,i,r){t.setValue(i,r)}(t[At],o,r)}function eE(t,i){const r=Pi(i,t),o=r[Ke];!function tE(t,i){for(let r=i.length;r<t.blueprint.length;r++)i.push(t.blueprint[r])}(o,r);const l=r[fn];null!==l&&null===r[Bi]&&(r[Bi]=Zf(l,r[Ki])),yp(o,r,r[pn])}function yp(t,i,r){Z(i);try{const o=t.viewQuery;null!==o&&mp(1,o,r);const l=t.template;null!==l&&km(t,i,l,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wm(t,i),t.staticViewQueries&&mp(2,t.viewQuery,r);const d=t.components;null!==d&&function nE(t,i){for(let r=0;r<i.length;r++)eE(t,i[r])}(i,d)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{i[Dt]&=-5,yi()}}let Xm=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(r,o,l){const d=typeof Zone>"u"?null:Zone.current,p=function an(t,i,r){const o=Object.create(or);r&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=i;const l=p=>{o.cleanupFn=p};return o.ref={notify:()=>fs(o),run:()=>{if(o.dirty=!1,o.hasRun&&!ho(o))return;o.hasRun=!0;const p=Us(o);try{o.cleanupFn(),o.cleanupFn=Tn,o.fn(l)}finally{Xr(o,p)}},cleanup:()=>o.cleanupFn()},o.ref}(r,I=>{this.all.has(I)&&this.queue.set(I,d)},l);let v;this.all.add(p),p.notify();const w=()=>{p.cleanup(),v?.(),this.all.delete(p),this.queue.delete(p)};return v=o?.onDestroy(w),{destroy:w}}flush(){if(0!==this.queue.size)for(const[r,o]of this.queue)this.queue.delete(r),o?o.run(()=>r.run()):r.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new t})}return t})();function nh(t,i,r){let o=r?t.styles:null,l=r?t.classes:null,d=0;if(null!==i)for(let p=0;p<i.length;p++){const v=i[p];"number"==typeof v?d=v:1==d?l=qt(l,v):2==d&&(o=qt(o,v+": "+i[++p]+";"))}r?t.styles=o:t.stylesWithoutHost=o,r?t.classes=l:t.classesWithoutHost=l}function gu(t,i,r,o,l=!1){for(;null!==r;){const d=i[r.index];null!==d&&o.push(dn(d)),Yn(d)&&Zm(d,o);const p=r.type;if(8&p)gu(t,i,r.child,o);else if(32&p){const v=Ll(r,i);let w;for(;w=v();)o.push(w)}else if(16&p){const v=Td(i,r);if(Array.isArray(v))o.push(...v);else{const w=Ua(i[gn]);gu(w[Ke],w,v,o,!0)}}r=l?r.projectionNext:r.next}return o}function Zm(t,i){for(let r=An;r<t.length;r++){const o=t[r],l=o[Ke].firstChild;null!==l&&gu(o[Ke],o,l,i)}t[Zi]!==t[fn]&&i.push(t[Zi])}function ih(t,i,r,o=!0){const l=i[gr],d=l.rendererFactory,p=l.afterRenderEventManager;d.begin?.(),p?.begin();try{Qm(t,i,t.template,r)}catch(w){throw o&&qm(i,w),w}finally{d.end?.(),l.effectManager?.flush(),p?.end()}}function Qm(t,i,r,o){const l=i[Dt];if(256!=(256&l)){i[gr].effectManager?.flush(),Z(i);try{Cn(i),function fl(t){return St.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&km(t,i,r,2,o);const p=3==(3&l);if(p){const I=t.preOrderCheckHooks;null!==I&&ys(i,I,null)}else{const I=t.preOrderHooks;null!==I&&bs(i,I,0,null),Er(i,0)}if(function sE(t){for(let i=Ed(t);null!==i;i=wd(i)){if(!i[Oo])continue;const r=i[ni];for(let o=0;o<r.length;o++){Jn(r[o])}}}(i),Jm(i,2),null!==t.contentQueries&&Wm(t,i),p){const I=t.contentCheckHooks;null!==I&&ys(i,I)}else{const I=t.contentHooks;null!==I&&bs(i,I,1),Er(i,1)}!function T0(t,i){const r=t.hostBindingOpCodes;if(null===r)return;const o=xm(i,Xn);try{for(let l=0;l<r.length;l++){const d=r[l];if(d<0)di(~d);else{const p=d,v=r[++l],w=r[++l];y(v,p),o.dirty=!1;const I=Us(o);try{w(2,i[p])}finally{Xr(o,I)}}}}finally{null===i[Xn]&&Tm(i,Xn),di(-1)}}(t,i);const v=t.components;null!==v&&tv(i,v,0);const w=t.viewQuery;if(null!==w&&mp(2,w,o),p){const I=t.viewCheckHooks;null!==I&&ys(i,I)}else{const I=t.viewHooks;null!==I&&bs(i,I,2),Er(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[Dt]&=-73,Ea(i)}finally{yi()}}}function Jm(t,i){for(let r=Ed(t);null!==r;r=wd(r))for(let o=An;o<r.length;o++)ev(r[o],i)}function oE(t,i,r){ev(Pi(i,t),r)}function ev(t,i){if(!function ms(t){return 128==(128&t[Dt])}(t))return;const r=t[Ke],o=t[Dt];if(80&o&&0===i||1024&o||2===i)Qm(r,t,r.template,t[pn]);else if(t[In]>0){Jm(t,1);const l=r.components;null!==l&&tv(t,l,1)}}function tv(t,i,r){for(let o=0;o<i.length;o++)oE(t,i[o],r)}class mu{get rootNodes(){const i=this._lView,r=i[Ke];return gu(r,i,r.firstChild,[])}constructor(i,r){this._lView=i,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pn]}set context(i){this._lView[pn]=i}get destroyed(){return 256==(256&this._lView[Dt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[rn];if(Yn(i)){const r=i[8],o=r?r.indexOf(this):-1;o>-1&&(Fl(i,o),El(r,o))}this._attachedToViewContainer=!1}As(this._lView[Ke],this._lView)}onDestroy(i){!function vn(t,i){if(256==(256&t[Dt]))throw new we(911,!1);null===t[ti]&&(t[ti]=[]),t[ti].push(i)}(this._lView,i)}markForCheck(){fu(this._cdRefInjectingView||this._lView)}detach(){this._lView[Dt]&=-129}reattach(){this._lView[Dt]|=128}detectChanges(){ih(this._lView[Ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kg(t,i){Cs(t,i,i[At],2,null,null)}(this._lView[Ke],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=i}}class aE extends mu{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;ih(i[Ke],i,i[pn],!1)}checkNoChanges(){}get context(){return null}}class nv extends Zd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const r=jt(i);return new vu(r,this.ngModule)}}function iv(t){const i=[];for(let r in t)t.hasOwnProperty(r)&&i.push({propName:t[r],templateName:r});return i}class cE{constructor(i,r){this.injector=i,this.parentInjector=r}get(i,r,o){o=Ts(o);const l=this.injector.get(i,ep,o);return l!==ep||r===ep?l:this.parentInjector.get(i,r,o)}}class vu extends om{get inputs(){const i=this.componentDef,r=i.inputTransforms,o=iv(i.inputs);if(null!==r)for(const l of o)r.hasOwnProperty(l.propName)&&(l.transform=r[l.propName]);return o}get outputs(){return iv(this.componentDef.outputs)}constructor(i,r){super(),this.componentDef=i,this.ngModule=r,this.componentType=i.type,this.selector=function fr(t){return t.map(ao).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!r}create(i,r,o,l){let d=(l=l||this.ngModule)instanceof eo?l:l?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const p=d?new cE(i,d):i,v=p.get(lm,null);if(null===v)throw new we(407,!1);const B={rendererFactory:v,sanitizer:p.get(s0,null),effectManager:p.get(Xm,null),afterRenderEventManager:p.get(ap,null)},W=v.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",be=o?function R0(t,i,r,o){const d=o.get(Dm,!1)||r===Fi.ShadowDom,p=t.selectRootElement(i,d);return function O0(t){Bm(t)}(p),p}(W,o,this.componentDef.encapsulation,p):$a(W,K,function lE(t){const i=t.toLowerCase();return"svg"===i?sl:"math"===i?"math":null}(K)),ut=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Pe=null;null!==be&&(Pe=Zf(be,p,!0));const Rt=hp(0,null,null,1,0,null,null,null,null,null,null),Ht=eh(null,Rt,null,ut,null,null,B,W,p,null,Pe);let yn,Mr;Z(Ht);try{const Mo=this.componentDef;let fc,Dg=null;Mo.findHostDirectiveDefs?(fc=[],Dg=new Map,Mo.findHostDirectiveDefs(Mo,fc,Dg),fc.push(Mo)):fc=[Mo];const DS=function dE(t,i){const r=t[Ke],o=Ot;return t[o]=i,Xl(r,o,2,"#host",null)}(Ht,be),SS=function hE(t,i,r,o,l,d,p){const v=l[Ke];!function fE(t,i,r,o){for(const l of t)i.mergedAttrs=rr(i.mergedAttrs,l.hostAttrs);null!==i.mergedAttrs&&(nh(i,i.mergedAttrs,!0),null!==r&&Od(o,r,i))}(o,t,i,p);let w=null;null!==i&&(w=Zf(i,l[Ki]));const I=d.rendererFactory.createRenderer(i,r);let L=16;r.signals?L=4096:r.onPush&&(L=64);const B=eh(l,Fm(r),null,L,l[t.index],t,d,I,null,null,w);return v.firstCreatePass&&pp(v,t,o.length-1),th(l,B),l[t.index]=B}(DS,be,Mo,fc,Ht,B,W);Mr=Pn(Rt,Ot),be&&function gE(t,i,r,o){if(o)ir(t,r,["ng-version",o0.full]);else{const{attrs:l,classes:d}=function xo(t){const i=[],r=[];let o=1,l=2;for(;o<t.length;){let d=t[o];if("string"==typeof d)2===l?""!==d&&i.push(d,t[++o]):8===l&&r.push(d);else{if(!hn(l))break;l=d}o++}return{attrs:i,classes:r}}(i.selectors[0]);l&&ir(t,r,l),d&&d.length>0&&ru(t,r,d.join(" "))}}(W,Mo,be,o),void 0!==r&&function mE(t,i,r){const o=t.projection=[];for(let l=0;l<i.length;l++){const d=r[l];o.push(null!=d?Array.from(d):null)}}(Mr,this.ngContentSelectors,r),yn=function pE(t,i,r,o,l,d){const p=ri(),v=l[Ke],w=Ti(p,l);Vm(v,l,p,r,null,o);for(let L=0;L<r.length;L++)_i(vo(l,v,p.directiveStart+L,p),l);Um(v,l,p),w&&_i(w,l);const I=vo(l,v,p.directiveStart+p.componentOffset,p);if(t[pn]=l[pn]=I,null!==d)for(const L of d)L(I,i);return cp(v,p,t),I}(SS,Mo,fc,Dg,Ht,[vE]),yp(Rt,Ht,null)}finally{yi()}return new uE(this.componentType,yn,Gl(Mr,Ht),Ht,Mr)}}class uE extends Z_{constructor(i,r,o,l,d){super(),this.location=o,this._rootLView=l,this._tNode=d,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new aE(l),this.componentType=i}setInput(i,r){const o=this._tNode.inputs;let l;if(null!==o&&(l=o[i])){if(this.previousInputValues??=new Map,this.previousInputValues.has(i)&&Object.is(this.previousInputValues.get(i),r))return;const d=this._rootLView;vp(d[Ke],d,l,i,r),this.previousInputValues.set(i,r),fu(Pi(this._tNode.index,d))}}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function vE(){const t=ri();Dn(Oe()[Ke],t)}function bp(t){let i=function rv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const o=[t];for(;i;){let l;if(Ii(t))l=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new we(903,!1);l=i.\u0275dir}if(l){if(r){o.push(l);const p=t;p.inputs=rh(t.inputs),p.inputTransforms=rh(t.inputTransforms),p.declaredInputs=rh(t.declaredInputs),p.outputs=rh(t.outputs);const v=l.hostBindings;v&&EE(t,v);const w=l.viewQuery,I=l.contentQueries;if(w&&bE(t,w),I&&_E(t,I),Ct(t.inputs,l.inputs),Ct(t.declaredInputs,l.declaredInputs),Ct(t.outputs,l.outputs),null!==l.inputTransforms&&(null===p.inputTransforms&&(p.inputTransforms={}),Ct(p.inputTransforms,l.inputTransforms)),Ii(l)&&l.data.animation){const L=t.data;L.animation=(L.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let p=0;p<d.length;p++){const v=d[p];v&&v.ngInherit&&v(t),v===bp&&(r=!1)}}i=Object.getPrototypeOf(i)}!function yE(t){let i=0,r=null;for(let o=t.length-1;o>=0;o--){const l=t[o];l.hostVars=i+=l.hostVars,l.hostAttrs=rr(l.hostAttrs,r=rr(r,l.hostAttrs))}}(o)}function rh(t){return t===Bn?{}:t===Bt?[]:t}function bE(t,i){const r=t.viewQuery;t.viewQuery=r?(o,l)=>{i(o,l),r(o,l)}:i}function _E(t,i){const r=t.contentQueries;t.contentQueries=r?(o,l,d)=>{i(o,l,d),r(o,l,d)}:i}function EE(t,i){const r=t.hostBindings;t.hostBindings=r?(o,l)=>{i(o,l),r(o,l)}:i}function lv(t){const i=t.inputConfig,r={};for(const o in i)if(i.hasOwnProperty(o)){const l=i[o];Array.isArray(l)&&l[2]&&(r[o]=l[2])}t.inputTransforms=r}function sh(t){return!!_p(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function _p(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function er(t,i,r){return!Object.is(t[i],r)&&(t[i]=r,!0)}function oh(t,i,r,o,l){const d=function qa(t,i,r,o){const l=er(t,i,r);return er(t,i+1,o)||l}(t,i,r,o);return er(t,i+2,l)||d}function Ep(t,i,r,o){const l=Oe();return er(l,go(),i)&&(zt(),no(xt(),l,t,i,r,o)),Ep}function Ql(t,i,r,o){return er(t,go(),r)?i+et(r)+o:Ft}function ec(t,i,r,o,l,d,p,v){const I=oh(t,function Qr(){return St.lFrame.bindingIndex}(),r,l,p);return Jr(3),I?i+et(r)+o+et(l)+d+et(p)+v:Ft}function Ev(t,i,r,o,l,d,p,v){const w=Oe(),I=zt(),L=t+Ot,B=I.firstCreatePass?function GE(t,i,r,o,l,d,p,v,w){const I=i.consts,L=Xl(i,t,4,p||null,ii(I,v));fp(i,r,L,ii(I,w)),Dn(i,L);const B=L.tView=hp(2,L,o,l,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,I,null);return null!==i.queries&&(i.queries.template(i,L),B.queries=i.queries.embeddedTView(L)),L}(L,I,w,i,r,o,l,d,p):I.data[L];_r(B,!1);const W=wv(I,w,B,t);gl()&&qo(I,w,W,B),_i(W,w),th(w,w[L]=zm(W,w,W,B)),ds(B)&&up(I,w,B),null!=p&&dp(w,B,v)}let wv=function Av(t,i,r,o){return vs(!0),i[At].createComment("")};function Mp(t,i,r){const o=Oe();return er(o,go(),i)&&Br(zt(),xt(),o,t,i,o[At],r,!1),Mp}function Ip(t,i,r,o,l){const p=l?"class":"style";vp(t,r,i.inputs[p],p,o)}function uh(t,i,r,o){const l=Oe(),d=zt(),p=Ot+t,v=l[At],w=d.firstCreatePass?function ZE(t,i,r,o,l,d){const p=i.consts,w=Xl(i,t,2,o,ii(p,l));return fp(i,r,w,ii(p,d)),null!==w.attrs&&nh(w,w.attrs,!1),null!==w.mergedAttrs&&nh(w,w.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,w),w}(p,d,l,i,r,o):d.data[p],I=Cv(d,l,w,v,i,t);l[p]=I;const L=ds(w);return _r(w,!0),Od(v,I,w),32!=(32&w.flags)&&gl()&&qo(d,l,I,w),0===function cl(){return St.lFrame.elementDepthCount}()&&_i(I,l),function Aa(){St.lFrame.elementDepthCount++}(),L&&(up(d,l,w),cp(d,w,l)),null!==o&&dp(l,w),uh}function dh(){let t=ri();Sa()?function Ma(){St.lFrame.isParent=!1}():(t=t.parent,_r(t,!1));const i=t;(function Lu(t){return St.skipHydrationRootTNode===t})(i)&&function ku(){St.skipHydrationRootTNode=null}(),function Ca(){St.lFrame.elementDepthCount--}();const r=zt();return r.firstCreatePass&&(Dn(r,t),Bs(t)&&r.queries.elementEnd(t)),null!=i.classesWithoutHost&&function ml(t){return 0!=(8&t.flags)}(i)&&Ip(r,i,Oe(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Pa(t){return 0!=(16&t.flags)}(i)&&Ip(r,i,Oe(),i.stylesWithoutHost,!1),dh}function xp(t,i,r,o){return uh(t,i,r,o),dh(),xp}let Cv=(t,i,r,o,l,d)=>(vs(!0),$a(o,l,function Vu(){return St.lFrame.currentNamespace}()));function Mv(){return Oe()}function Rp(t){return!!t&&"function"==typeof t.then}function Iv(t){return!!t&&"function"==typeof t.subscribe}function Op(t,i,r,o){const l=Oe(),d=zt(),p=ri();return function Tv(t,i,r,o,l,d,p){const v=ds(o),I=t.firstCreatePass&&Ym(t),L=i[pn],B=Gm(i);let W=!0;if(3&o.type||p){const Fe=Ti(o,i),Ze=p?p(Fe):Fe,ut=B.length,Pe=p?Ht=>p(dn(Ht[o.index])):o.index;let Rt=null;if(!p&&v&&(Rt=function iw(t,i,r,o){const l=t.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const p=l[d];if(p===r&&l[d+1]===o){const v=i[Lr],w=l[d+2];return v.length>w?v[w]:null}"string"==typeof p&&(d+=2)}return null}(t,i,l,o.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=d,Rt.__ngLastListenerFn__=d,W=!1;else{d=Rv(o,i,L,d,!1);const Ht=r.listen(Ze,l,d);B.push(d,Ht),I&&I.push(l,Pe,ut,ut+1)}}else d=Rv(o,i,L,d,!1);const K=o.outputs;let be;if(W&&null!==K&&(be=K[l])){const Fe=be.length;if(Fe)for(let Ze=0;Ze<Fe;Ze+=2){const yn=i[be[Ze]][be[Ze+1]].subscribe(d),Mr=B.length;B.push(d,yn),I&&I.push(l,o.index,Mr,-(Mr+1))}}}(d,l,l[At],p,t,i,o),Op}function Pv(t,i,r,o){try{return cr(6,i,r),!1!==r(o)}catch(l){return qm(t,l),!1}finally{cr(7,i,r)}}function Rv(t,i,r,o,l){return function d(p){if(p===Function)return o;fu(t.componentOffset>-1?Pi(t.index,i):i);let w=Pv(i,r,o,p),I=d.__ngNextListenerFn__;for(;I;)w=Pv(i,r,I,p)&&w,I=I.__ngNextListenerFn__;return l&&!1===w&&p.preventDefault(),w}}function Ov(t=1){return function qs(t){return(St.lFrame.contextLView=function mo(t,i){for(;t>0;)i=i[sr],t--;return i}(t,St.lFrame.contextLView))[pn]}(t)}function Lp(t,i,r){return Np(t,"",i,"",r),Lp}function Np(t,i,r,o,l){const d=Oe(),p=Ql(d,i,r,o);return p!==Ft&&Br(zt(),xt(),d,t,p,d[At],l,!1),Np}function hh(t,i){return t<<17|i<<2}function ra(t){return t>>17&32767}function kp(t){return 2|t}function Xa(t){return(131068&t)>>2}function Fp(t,i){return-131069&t|i<<2}function Bp(t){return 1|t}function Uv(t,i,r,o,l){const d=t[r+1],p=null===i;let v=o?ra(d):Xa(d),w=!1;for(;0!==v&&(!1===w||p);){const L=t[v+1];hw(t[v],i)&&(w=!0,t[v+1]=o?Bp(L):kp(L)),v=o?ra(L):Xa(L)}w&&(t[r+1]=o?kp(d):Bp(d))}function hw(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Fa(t,i)>=0}const Ai={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $v(t){return t.substring(Ai.key,Ai.keyEnd)}function zv(t,i){const r=Ai.textEnd;return r===i?-1:(i=Ai.keyEnd=function mw(t,i,r){for(;i<r&&t.charCodeAt(i)>32;)i++;return i}(t,Ai.key=i,r),oc(t,i,r))}function oc(t,i,r){for(;i<r&&t.charCodeAt(i)<=32;)i++;return i}function jp(t,i){return function Ms(t,i,r,o){const l=Oe(),d=zt(),p=Jr(2);d.firstUpdatePass&&Qv(d,t,p,o),i!==Ft&&er(l,p,i)&&ey(d,d.data[Un()],l,l[At],t,l[p+1]=function Mw(t,i){return null==t||""===t||("string"==typeof i?t+=i:"object"==typeof t&&(t=vt(Qs(t)))),t}(i,r),o,p)}(t,i,null,!0),jp}function Xv(t){Is(Dw,so,t,!0)}function so(t,i){for(let r=function pw(t){return function Gv(t){Ai.key=0,Ai.keyEnd=0,Ai.value=0,Ai.valueEnd=0,Ai.textEnd=t.length}(t),zv(t,oc(t,0,Ai.textEnd))}(i);r>=0;r=zv(i,r))Ar(t,$v(i),!0)}function Is(t,i,r,o){const l=zt(),d=Jr(2);l.firstUpdatePass&&Qv(l,null,d,o);const p=Oe();if(r!==Ft&&er(p,d,r)){const v=l.data[Un()];if(ny(v,o)&&!Zv(l,d)){let w=o?v.classesWithoutHost:v.stylesWithoutHost;null!==w&&(r=qt(w,r||"")),Ip(l,v,p,r,o)}else!function Sw(t,i,r,o,l,d,p,v){l===Ft&&(l=Bt);let w=0,I=0,L=0<l.length?l[0]:null,B=0<d.length?d[0]:null;for(;null!==L||null!==B;){const W=w<l.length?l[w+1]:void 0,K=I<d.length?d[I+1]:void 0;let Fe,be=null;L===B?(w+=2,I+=2,W!==K&&(be=B,Fe=K)):null===B||null!==L&&L<B?(w+=2,be=L):(I+=2,be=B,Fe=K),null!==be&&ey(t,i,r,o,be,Fe,p,v),L=w<l.length?l[w]:null,B=I<d.length?d[I]:null}}(l,v,p,p[At],p[d+1],p[d+1]=function Cw(t,i,r){if(null==r||""===r)return Bt;const o=[],l=Qs(r);if(Array.isArray(l))for(let d=0;d<l.length;d++)t(o,l[d],!0);else if("object"==typeof l)for(const d in l)l.hasOwnProperty(d)&&t(o,d,l[d]);else"string"==typeof l&&i(o,l);return o}(t,i,r),o,d)}}function Zv(t,i){return i>=t.expandoStartIndex}function Qv(t,i,r,o){const l=t.data;if(null===l[r+1]){const d=l[Un()],p=Zv(t,r);ny(d,o)&&null===i&&!p&&(i=!1),i=function _w(t,i,r,o){const l=function A(t){const i=St.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}(t);let d=o?i.residualClasses:i.residualStyles;if(null===l)0===(o?i.classBindings:i.styleBindings)&&(r=wu(r=Hp(null,t,i,r,o),i.attrs,o),d=null);else{const p=i.directiveStylingLast;if(-1===p||t[p]!==l)if(r=Hp(l,t,i,r,o),null===d){let w=function Ew(t,i,r){const o=r?i.classBindings:i.styleBindings;if(0!==Xa(o))return t[ra(o)]}(t,i,o);void 0!==w&&Array.isArray(w)&&(w=Hp(null,t,i,w[1],o),w=wu(w,i.attrs,o),function ww(t,i,r,o){t[ra(r?i.classBindings:i.styleBindings)]=o}(t,i,o,w))}else d=function Aw(t,i,r){let o;const l=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<l;d++)o=wu(o,t[d].hostAttrs,r);return wu(o,i.attrs,r)}(t,i,o)}return void 0!==d&&(o?i.residualClasses=d:i.residualStyles=d),r}(l,d,i,o),function uw(t,i,r,o,l,d){let p=d?i.classBindings:i.styleBindings,v=ra(p),w=Xa(p);t[o]=r;let L,I=!1;if(Array.isArray(r)?(L=r[1],(null===L||Fa(r,L)>0)&&(I=!0)):L=r,l)if(0!==w){const W=ra(t[v+1]);t[o+1]=hh(W,v),0!==W&&(t[W+1]=Fp(t[W+1],o)),t[v+1]=function lw(t,i){return 131071&t|i<<17}(t[v+1],o)}else t[o+1]=hh(v,0),0!==v&&(t[v+1]=Fp(t[v+1],o)),v=o;else t[o+1]=hh(w,0),0===v?v=o:t[w+1]=Fp(t[w+1],o),w=o;I&&(t[o+1]=kp(t[o+1])),Uv(t,L,o,!0),Uv(t,L,o,!1),function dw(t,i,r,o,l){const d=l?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof i&&Fa(d,i)>=0&&(r[o+1]=Bp(r[o+1]))}(i,L,t,o,d),p=hh(v,w),d?i.classBindings=p:i.styleBindings=p}(l,d,i,r,p,o)}}function Hp(t,i,r,o,l){let d=null;const p=r.directiveEnd;let v=r.directiveStylingLast;for(-1===v?v=r.directiveStart:v++;v<p&&(d=i[v],o=wu(o,d.hostAttrs,l),d!==t);)v++;return null!==t&&(r.directiveStylingLast=v),o}function wu(t,i,r){const o=r?1:2;let l=-1;if(null!==i)for(let d=0;d<i.length;d++){const p=i[d];"number"==typeof p?l=p:l===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ar(t,p,!!r||i[++d]))}return void 0===t?null:t}function Dw(t,i,r){const o=String(i);""!==o&&!o.includes(" ")&&Ar(t,o,r)}function ey(t,i,r,o,l,d,p,v){if(!(3&i.type))return;const w=t.data,I=w[v+1],L=function cw(t){return 1==(1&t)}(I)?ty(w,i,r,l,Xa(I),p):void 0;fh(L)||(fh(d)||function aw(t){return 2==(2&t)}(I)&&(d=ty(w,null,r,l,v,p)),function Df(t,i,r,o,l){if(i)l?t.addClass(r,o):t.removeClass(r,o);else{let d=-1===o.indexOf("-")?void 0:xl.DashCase;null==l?t.removeStyle(r,o,d):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),d|=xl.Important),t.setStyle(r,o,l,d))}}(o,p,mi(Un(),r),l,d))}function ty(t,i,r,o,l,d){const p=null===i;let v;for(;l>0;){const w=t[l],I=Array.isArray(w),L=I?w[1]:w,B=null===L;let W=r[l+1];W===Ft&&(W=B?Bt:void 0);let K=B?Bc(W,o):L===o?W:void 0;if(I&&!fh(K)&&(K=Bc(w,o)),fh(K)&&(v=K,p))return v;const be=t[l+1];l=p?ra(be):Xa(be)}if(null!==i){let w=d?i.residualClasses:i.residualStyles;null!=w&&(v=Bc(w,o))}return v}function fh(t){return void 0!==t}function ny(t,i){return 0!=(t.flags&(i?8:16))}function iy(t,i=""){const r=Oe(),o=zt(),l=t+Ot,d=o.firstCreatePass?Xl(o,l,1,i,null):o.data[l],p=ry(o,r,d,i,t);r[l]=p,gl()&&qo(o,r,p,d),_r(d,!1)}let ry=(t,i,r,o,l)=>(vs(!0),function Nl(t,i){return t.createText(i)}(i[At],o));function Vp(t){return ph("",t,""),Vp}function ph(t,i,r){const o=Oe(),l=Ql(o,t,i,r);return l!==Ft&&So(o,Un(),l),ph}function Up(t,i,r,o,l,d,p){const v=Oe(),w=ec(v,t,i,r,o,l,d,p);return w!==Ft&&So(v,Un(),w),Up}function hy(t,i,r){Is(Ar,so,Ql(Oe(),t,i,r),!0)}const Za=void 0;var Kw=["en",[["a","p"],["AM","PM"],Za],[["AM","PM"],Za,Za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Za,"{1} 'at' {0}",Za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Yw(t){const r=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let ac={};function $p(t){const i=function qw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=Dy(i);if(r)return r;const o=i.split("-")[0];if(r=Dy(o),r)return r;if("en"===o)return Kw;throw new we(701,!1)}function Cy(t){return $p(t)[lc.PluralCase]}function Dy(t){return t in ac||(ac[t]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[t]),ac[t]}var lc=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(lc||{});const cc="en-US";let Sy=cc;function Gp(t,i,r,o,l){if(t=_e(t),Array.isArray(t))for(let d=0;d<t.length;d++)Gp(t[d],i,r,o,l);else{const d=zt(),p=Oe(),v=ri();let w=dr(t)?t:_e(t.provide);const I=em(t),L=1048575&v.providerIndexes,B=v.directiveStart,W=v.providerIndexes>>20;if(dr(t)||!t.multi){const K=new Ta(I,l,ql),be=Kp(w,i,l?L:L+W,B);-1===be?(qu(vl(v,p),d,w),Yp(d,t,i.length),i.push(w),v.directiveStart++,v.directiveEnd++,l&&(v.providerIndexes+=1048576),r.push(K),p.push(K)):(r[be]=K,p[be]=K)}else{const K=Kp(w,i,L+W,B),be=Kp(w,i,L,L+W),Ze=be>=0&&r[be];if(l&&!Ze||!l&&!(K>=0&&r[K])){qu(vl(v,p),d,w);const ut=function YA(t,i,r,o,l){const d=new Ta(t,r,ql);return d.multi=[],d.index=i,d.componentProviders=0,Zy(d,l,o&&!r),d}(l?GA:WA,r.length,l,o,I);!l&&Ze&&(r[be].providerFactory=ut),Yp(d,t,i.length,0),i.push(w),v.directiveStart++,v.directiveEnd++,l&&(v.providerIndexes+=1048576),r.push(ut),p.push(ut)}else Yp(d,t,K>-1?K:be,Zy(r[l?be:K],I,!l&&o));!l&&o&&Ze&&r[be].componentProviders++}}}function Yp(t,i,r,o){const l=dr(i),d=function Js(t){return!!t.useClass}(i);if(l||d){const w=(d?_e(i.useClass):i).prototype.ngOnDestroy;if(w){const I=t.destroyHooks||(t.destroyHooks=[]);if(!l&&i.multi){const L=I.indexOf(r);-1===L?I.push(r,[o,w]):I[L+1].push(o,w)}else I.push(r,w)}}}function Zy(t,i,r){return r&&t.componentProviders++,t.multi.push(i)-1}function Kp(t,i,r,o){for(let l=r;l<o;l++)if(i[l]===t)return l;return-1}function WA(t,i,r,o){return qp(this.multi,[])}function GA(t,i,r,o){const l=this.multi;let d;if(this.providerFactory){const p=this.providerFactory.componentProviders,v=vo(r,r[Ke],this.providerFactory.index,o);d=v.slice(0,p),qp(l,d);for(let w=p;w<v.length;w++)d.push(v[w])}else d=[],qp(l,d);return d}function qp(t,i){for(let r=0;r<t.length;r++)i.push((0,t[r])());return i}function Qy(t,i=[]){return r=>{r.providersResolver=(o,l)=>function zA(t,i,r){const o=zt();if(o.firstCreatePass){const l=Ii(t);Gp(r,o.data,o.blueprint,l,!0),Gp(i,o.data,o.blueprint,l,!1)}}(o,l?l(t):t,i)}}class Qa{}class Jy{}function KA(t,i){return new Xp(t,i??null,[])}class Xp extends Qa{constructor(i,r,o){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nv(this);const l=Ln(i);this._bootstrapComponents=Do(l.bootstrap),this._r3Injector=pm(i,r,[{provide:Qa,useValue:this},{provide:Zd,useValue:this.componentFactoryResolver},...o],vt(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Zp extends Jy{constructor(i){super(),this.moduleType=i}create(i){return new Xp(this.moduleType,i,[])}}class eb extends Qa{constructor(i){super(),this.componentFactoryResolver=new nv(this),this.instance=null;const r=new Ul([...i.providers,{provide:Qa,useValue:this},{provide:Zd,useValue:this.componentFactoryResolver}],i.parent||Wd(),i.debugName,new Set(["environment"]));this.injector=r,i.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function tb(t,i,r=null){return new eb({providers:t,parent:i,debugName:r,runEnvironmentInitializers:!0}).injector}let XA=(()=>{class t{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const o=Ei(0,r.type),l=o.length>0?tb([o],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,l)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=tt({token:t,providedIn:"environment",factory:()=>new t(Fn(eo))})}return t})();function nb(t){t.getStandaloneInjector=i=>i.get(XA).getOrCreateStandaloneInjector(t)}function cb(t,i,r,o){return function ub(t,i,r,o,l,d){const p=i+r;return er(t,p,l)?function io(t,i,r){return t[i]=r}(t,p+1,d?o.call(d,l):o(l)):function Iu(t,i){const r=t[i];return r===Ft?void 0:r}(t,p+1)}(Oe(),function vi(){const t=St.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}(),t,i,r,o)}function EC(){return this._results[Symbol.iterator]()}class Jp{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new to)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=Jp.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=EC)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,r){return this._results.reduce(i,r)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,r){const o=this;o.dirty=!1;const l=function Fr(t){return t.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Vh(t,i,r){if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++){let l=t[o],d=i[o];if(r&&(l=r(l),d=r(d)),d!==l)return!1}return!0}(o._results,l,r))&&(o._results=l,o.length=l.length,o.last=l[this.length-1],o.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function AC(t,i,r,o=!0){const l=i[Ke];if(function vf(t,i,r,o){const l=An+o,d=r.length;o>0&&(r[l-1][gi]=i),o<d-An?(i[gi]=r[l],ad(r,An+o,i)):(r.push(i),i[gi]=null),i[rn]=r;const p=i[mr];null!==p&&r!==p&&function yf(t,i){const r=t[ni];i[gn]!==i[rn][rn][gn]&&(t[Oo]=!0),null===r?t[ni]=[i]:r.push(i)}(p,i);const v=i[Xi];null!==v&&v.insertView(t),i[Dt]|=128}(l,i,t,r),o){const d=iu(r,t),p=i[At],v=Ko(p,t[Zi]);null!==v&&function Cd(t,i,r,o,l,d){o[fn]=l,o[Hn]=i,Cs(t,o,r,1,l,d)}(l,t[Hn],p,i,v,d)}}let Tu=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=SC}return t})();const CC=Tu,DC=class extends CC{constructor(i,r,o){super(),this._declarationLView=i,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(i,r){return this.createEmbeddedViewImpl(i,r)}createEmbeddedViewImpl(i,r,o){const l=function wC(t,i,r,o){const l=i.tView,v=eh(t,l,r,4096&t[Dt]?4096:16,null,i,null,null,null,o?.injector??null,o?.hydrationInfo??null);v[mr]=t[i.index];const I=t[Xi];return null!==I&&(v[Xi]=I.createEmbeddedView(l)),yp(l,v,r),v}(this._declarationLView,this._declarationTContainer,i,{injector:r,hydrationInfo:o});return new mu(l)}};function SC(){return bh(ri(),Oe())}function bh(t,i){return 4&t.type?new DC(i,t,Gl(t,i)):null}let Eh=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=RC}return t})();function RC(){return Eb(ri(),Oe())}const OC=Eh,bb=class extends OC{constructor(i,r,o){super(),this._lContainer=i,this._hostTNode=r,this._hostLView=o}get element(){return Gl(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){const i=Lc(this._hostTNode,this._hostLView);if(zu(i)){const r=Oa(i,this._hostLView),o=Ra(i);return new Ri(r[Ke].data[o+8],r)}return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const r=_b(this._lContainer);return null!==r&&r[i]||null}get length(){return this._lContainer.length-An}createEmbeddedView(i,r,o){let l,d;"number"==typeof o?l=o:null!=o&&(l=o.index,d=o.injector);const v=i.createEmbeddedViewImpl(r||{},d,null);return this.insertImpl(v,l,false),v}createComponent(i,r,o,l,d){const p=i&&!function ka(t){return"function"==typeof t}(i);let v;if(p)v=r;else{const Fe=r||{};v=Fe.index,o=Fe.injector,l=Fe.projectableNodes,d=Fe.environmentInjector||Fe.ngModuleRef}const w=p?i:new vu(jt(i)),I=o||this.parentInjector;if(!d&&null==w.ngModule){const Ze=(p?I:this.parentInjector).get(eo,null);Ze&&(d=Ze)}jt(w.componentType??{});const K=w.create(I,l,null,d);return this.insertImpl(K.hostView,v,false),K}insert(i,r){return this.insertImpl(i,r,!1)}insertImpl(i,r,o){const l=i._lView;if(function ll(t){return Yn(t[rn])}(l)){const w=this.indexOf(i);if(-1!==w)this.detach(w);else{const I=l[rn],L=new bb(I,I[Hn],I[rn]);L.detach(L.indexOf(i))}}const p=this._adjustIndex(r),v=this._lContainer;return AC(v,l,p,!o),i.attachToViewContainerRef(),ad(eg(v),p,i),i}move(i,r){return this.insert(i,r)}indexOf(i){const r=_b(this._lContainer);return null!==r?r.indexOf(i):-1}remove(i){const r=this._adjustIndex(i,-1),o=Fl(this._lContainer,r);o&&(El(eg(this._lContainer),r),As(o[Ke],o))}detach(i){const r=this._adjustIndex(i,-1),o=Fl(this._lContainer,r);return o&&null!=El(eg(this._lContainer),r)?new mu(o):null}_adjustIndex(i,r=0){return i??this.length+r}};function _b(t){return t[8]}function eg(t){return t[8]||(t[8]=[])}function Eb(t,i){let r;const o=i[t.index];return Yn(o)?r=o:(r=zm(o,i,null,t),i[t.index]=r,th(i,r)),wb(r,i,t,o),new bb(r,t,i)}let wb=function Ab(t,i,r,o){if(t[Zi])return;let l;l=8&r.type?dn(o):function LC(t,i){const r=t[At],o=r.createComment(""),l=Ti(i,t);return Zs(r,Ko(r,l),o,function Af(t,i){return t.nextSibling(i)}(r,l),!1),o}(i,r),t[Zi]=l};class tg{constructor(i){this.queryList=i,this.matches=null}clone(){return new tg(this.queryList)}setDirty(){this.queryList.setDirty()}}class ng{constructor(i=[]){this.queries=i}createEmbeddedView(i){const r=i.queries;if(null!==r){const o=null!==i.contentQueries?i.contentQueries[0]:r.length,l=[];for(let d=0;d<o;d++){const p=r.getByIndex(d);l.push(this.queries[p.indexInDeclarationView].clone())}return new ng(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let r=0;r<this.queries.length;r++)null!==Rb(i,r).matches&&this.queries[r].setDirty()}}class Cb{constructor(i,r,o=null){this.predicate=i,this.flags=r,this.read=o}}class ig{constructor(i=[]){this.queries=i}elementStart(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(i,r)}elementEnd(i){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(i)}embeddedTView(i){let r=null;for(let o=0;o<this.length;o++){const l=null!==r?r.length:0,d=this.getByIndex(o).embeddedTView(i,l);d&&(d.indexInDeclarationView=o,null!==r?r.push(d):r=[d])}return null!==r?new ig(r):null}template(i,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(i,r)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class rg{constructor(i,r=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(i,r){this.isApplyingToNode(r)&&this.matchTNode(i,r)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,r){this.elementStart(i,r)}embeddedTView(i,r){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,r),new rg(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let o=i.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(i,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let l=0;l<o.length;l++){const d=o[l];this.matchTNodeWithReadOption(i,r,FC(r,d)),this.matchTNodeWithReadOption(i,r,yl(r,i,d,!1,!1))}else o===Tu?4&r.type&&this.matchTNodeWithReadOption(i,r,-1):this.matchTNodeWithReadOption(i,r,yl(r,i,o,!1,!1))}matchTNodeWithReadOption(i,r,o){if(null!==o){const l=this.metadata.read;if(null!==l)if(l===hu||l===Eh||l===Tu&&4&r.type)this.addMatch(r.index,-2);else{const d=yl(r,i,l,!1,!1);null!==d&&this.addMatch(r.index,d)}else this.addMatch(r.index,o)}}addMatch(i,r){null===this.matches?this.matches=[i,r]:this.matches.push(i,r)}}function FC(t,i){const r=t.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===i)return r[o+1];return null}function jC(t,i,r,o){return-1===r?function BC(t,i){return 11&t.type?Gl(t,i):4&t.type?bh(t,i):null}(i,t):-2===r?function HC(t,i,r){return r===hu?Gl(i,t):r===Tu?bh(i,t):r===Eh?Eb(i,t):void 0}(t,i,o):vo(t,t[Ke],r,i)}function Db(t,i,r,o){const l=i[Xi].queries[o];if(null===l.matches){const d=t.data,p=r.matches,v=[];for(let w=0;w<p.length;w+=2){const I=p[w];v.push(I<0?null:jC(i,d[I],p[w+1],r.metadata.read))}l.matches=v}return l.matches}function sg(t,i,r,o){const l=t.queries.getByIndex(r),d=l.matches;if(null!==d){const p=Db(t,i,l,r);for(let v=0;v<d.length;v+=2){const w=d[v];if(w>0)o.push(p[v/2]);else{const I=d[v+1],L=i[-w];for(let B=An;B<L.length;B++){const W=L[B];W[mr]===W[rn]&&sg(W[Ke],W,I,o)}if(null!==L[ni]){const B=L[ni];for(let W=0;W<B.length;W++){const K=B[W];sg(K[Ke],K,I,o)}}}}}return o}function Sb(t){const i=Oe(),r=zt(),o=x();N(o+1);const l=Rb(r,o);if(t.dirty&&function al(t){return 4==(4&t[Dt])}(i)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const d=l.crossesNgTemplate?sg(r,i,o,[]):Db(r,i,l,o);t.reset(d,t0),t.notifyOnChanges()}return!0}return!1}function Mb(t,i,r){const o=zt();o.firstCreatePass&&(Pb(o,new Cb(t,i,r),-1),2==(2&i)&&(o.staticViewQueries=!0)),Tb(o,Oe(),i)}function Ib(t,i,r,o){const l=zt();if(l.firstCreatePass){const d=ri();Pb(l,new Cb(i,r,o),d.index),function UC(t,i){const r=t.contentQueries||(t.contentQueries=[]);i!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,i)}(l,t),2==(2&r)&&(l.staticContentQueries=!0)}Tb(l,Oe(),r)}function xb(){return function VC(t,i){return t[Xi].queries[i].queryList}(Oe(),x())}function Tb(t,i,r){const o=new Jp(4==(4&r));(function k0(t,i,r,o){const l=Gm(i);l.push(r),t.firstCreatePass&&Ym(t).push(o,l.length-1)})(t,i,o,o.destroy),null===i[Xi]&&(i[Xi]=new ng),i[Xi].queries.push(new tg(o))}function Pb(t,i,r){null===t.queries&&(t.queries=new ig),t.queries.track(new rg(i,r))}function Rb(t,i){return t.queries.getByIndex(i)}function og(t){return!!Ln(t)}const qb=new Nt("Application Initializer");let dg=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o}),this.appInits=Yt(qb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const l of this.appInits){const d=l();if(Rp(d))r.push(d);else if(Iv(d)){const p=new Promise((v,w)=>{d.subscribe({complete:v,error:w})});r.push(p)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{o()}).catch(l=>{this.reject(l)}),0===r.length&&o(),this.initialized=!0}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xb=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Ah=new Nt("LocaleId",{providedIn:"root",factory:()=>Yt(Ah,Be.Optional|Be.SkipSelf)||function uD(){return typeof $localize<"u"&&$localize.locale||cc}()}),dD=new Nt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Zb=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Q.X(!1)}add(){this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class fD{constructor(i,r){this.ngModuleFactory=i,this.componentFactories=r}}let pD=(()=>{class t{compileModuleSync(r){return new Zp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const o=this.compileModuleSync(r),d=Do(Ln(r).declarations).reduce((p,v)=>{const w=jt(v);return w&&p.push(new vu(w)),p},[]);return new fD(o,d)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const t_=new Nt(""),n_=new Nt("");let pg,kD=(()=>{class t{constructor(r,o,l){this._ngZone=r,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pg||(function FD(t){pg=t}(l),l.addToWindow(o)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Oi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,l){let d=-1;o&&o>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==d),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:d,updateCb:l})}whenStable(r,o,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,o,l){return[]}static#e=this.\u0275fac=function(o){return new(o||t)(Fn(Oi),Fn(i_),Fn(n_))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac})}return t})(),i_=(()=>{class t{constructor(){this._applications=new Map}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return pg?.findTestabilityInTree(this,r,o)??null}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),sa=null;const r_=new Nt("AllowMultipleToken"),gg=new Nt("PlatformDestroyListeners"),mg=new Nt("appBootstrapListener");class HD{constructor(i,r){this.name=i,this.token=r}}function a_(t,i,r=[]){const o=`Platform: ${i}`,l=new Nt(o);return(d=[])=>{let p=vg();if(!p||p.injector.get(r_,!1)){const v=[...r,...d,{provide:l,useValue:!0}];t?t(v):function VD(t){if(sa&&!sa.get(r_,!1))throw new we(400,!1);(function s_(){!function S(t){_=t}(()=>{throw new we(600,!1)})})(),sa=t;const i=t.get(c_);(function o_(t){t.get(nm,null)?.forEach(r=>r())})(t)}(function l_(t=[],i){return Ss.create({name:i,providers:[{provide:Kn,useValue:"platform"},{provide:gg,useValue:new Set([()=>sa=null])},...t]})}(v,o))}return function $D(t){const i=vg();if(!i)throw new we(401,!1);return i}()}}function vg(){return sa?.get(c_)??null}let c_=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const l=function zD(t="zone.js",i){return"noop"===t?new y0:"zone.js"===t?new Oi(i):t}(o?.ngZone,function u_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return l.run(()=>{const d=function qA(t,i,r){return new Xp(t,i,r)}(r.moduleType,this.injector,function g_(t){return[{provide:Oi,useFactory:t},{provide:je,multi:!0,useFactory:()=>{const i=Yt(GD,{optional:!0});return()=>i.initialize()}},{provide:p_,useFactory:WD},{provide:bm,useFactory:_m}]}(()=>l)),p=d.injector.get(ia,null);return l.runOutsideAngular(()=>{const v=l.onError.subscribe({next:w=>{p.handleError(w)}});d.onDestroy(()=>{Dh(this._modules,d),v.unsubscribe()})}),function d_(t,i,r){try{const o=r();return Rp(o)?o.catch(l=>{throw i.runOutsideAngular(()=>t.handleError(l)),l}):o}catch(o){throw i.runOutsideAngular(()=>t.handleError(o)),o}}(p,l,()=>{const v=d.injector.get(dg);return v.runInitializers(),v.donePromise.then(()=>(function My(t){bt(t,"Expected localeId to be defined"),"string"==typeof t&&(Sy=t.toLowerCase().replace(/_/g,"-"))}(d.injector.get(Ah,cc)||cc),this._moduleDoBootstrap(d),d))})})}bootstrapModule(r,o=[]){const l=h_({},o);return function BD(t,i,r){const o=new Zp(r);return Promise.resolve(o)}(0,0,r).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(r){const o=r.injector.get(hc);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(l=>o.bootstrap(l));else{if(!r.instance.ngDoBootstrap)throw new we(-403,!1);r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const r=this._injector.get(gg,null);r&&(r.forEach(o=>o()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(o){return new(o||t)(Fn(Ss))};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function h_(t,i){return Array.isArray(i)?i.reduce(h_,t):{...t,...i}}let hc=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(p_),this.zoneIsStable=Yt(bm),this.componentTypes=[],this.components=[],this.isStable=Yt(Zb).hasPendingTasks.pipe((0,he.w)(r=>r?(0,oe.of)(!1):this.zoneIsStable),function fe(t,i=q.y){return t=t??st,(0,Re.e)((r,o)=>{let l,d=!0;r.subscribe((0,Te.x)(o,p=>{const v=i(p);(d||!t(l,v))&&(d=!1,l=v,o.next(p))}))})}(),xe()),this._injector=Yt(eo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,o){const l=r instanceof om;if(!this._injector.get(dg).done)throw!l&&li(r),new we(405,!1);let p;p=l?r:this._injector.get(Zd).resolveComponentFactory(r),this.componentTypes.push(p.componentType);const v=function jD(t){return t.isBoundToModule}(p)?void 0:this._injector.get(Qa),I=p.create(Ss.NULL,[],o||p.selector,v),L=I.location.nativeElement,B=I.injector.get(t_,null);return B?.registerApplication(L),I.onDestroy(()=>{this.detachView(I.hostView),Dh(this.components,I),B?.unregisterApplication(L)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;Dh(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const o=this._injector.get(mg,[]);o.push(...this._bootstrapListeners),o.forEach(l=>l(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Dh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new we(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dh(t,i){const r=t.indexOf(i);r>-1&&t.splice(r,1)}const p_=new Nt("",{providedIn:"root",factory:()=>Yt(ia).handleError.bind(void 0)});function WD(){const t=Yt(Oi),i=Yt(ia);return r=>t.runOutsideAngular(()=>i.handleError(r))}let GD=(()=>{class t{constructor(){this.zone=Yt(Oi),this.applicationRef=Yt(hc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function KD(){return!1}let qD=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=XD}return t})();function XD(t){return function ZD(t,i,r){if(ji(t)&&!r){const o=Pi(t.index,i);return new mu(o,o)}return 47&t.type?new mu(i[gn],i):null}(ri(),Oe(),16==(16&t))}class b_{constructor(){}supports(i){return sh(i)}create(i){return new iS(i)}}const nS=(t,i)=>i;class iS{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||nS}forEachItem(i){let r;for(r=this._itHead;null!==r;r=r._next)i(r)}forEachOperation(i){let r=this._itHead,o=this._removalsHead,l=0,d=null;for(;r||o;){const p=!o||r&&r.currentIndex<E_(o,l,d)?r:o,v=E_(p,l,d),w=p.currentIndex;if(p===o)l--,o=o._nextRemoved;else if(r=r._next,null==p.previousIndex)l++;else{d||(d=[]);const I=v-l,L=w-l;if(I!=L){for(let W=0;W<I;W++){const K=W<d.length?d[W]:d[W]=0,be=K+W;L<=be&&be<I&&(d[W]=K+1)}d[p.previousIndex]=L-I}}v!==w&&i(p,v,w)}}forEachPreviousItem(i){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachMovedItem(i){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}forEachIdentityChange(i){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)i(r)}diff(i){if(null==i&&(i=[]),!sh(i))throw new we(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l,d,p,r=this._itHead,o=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)d=i[v],p=this._trackByFn(v,d),null!==r&&Object.is(r.trackById,p)?(o&&(r=this._verifyReinsertion(r,d,p,v)),Object.is(r.item,d)||this._addIdentityChange(r,d)):(r=this._mismatch(r,d,p,v),o=!0),r=r._next}else l=0,function IE(t,i){if(Array.isArray(t))for(let r=0;r<t.length;r++)i(t[r]);else{const r=t[Symbol.iterator]();let o;for(;!(o=r.next()).done;)i(o.value)}}(i,v=>{p=this._trackByFn(l,v),null!==r&&Object.is(r.trackById,p)?(o&&(r=this._verifyReinsertion(r,v,p,l)),Object.is(r.item,v)||this._addIdentityChange(r,v)):(r=this._mismatch(r,v,p,l),o=!0),r=r._next,l++}),this.length=l;return this._truncate(r),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,r,o,l){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._reinsertAfter(i,d,l)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(o,l))?(Object.is(i.item,r)||this._addIdentityChange(i,r),this._moveAfter(i,d,l)):i=this._addAfter(new rS(r,o),d,l),i}_verifyReinsertion(i,r,o,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==d?i=this._reinsertAfter(d,i._prev,l):i.currentIndex!=l&&(i.currentIndex=l,this._addToMoves(i,l)),i}_truncate(i){for(;null!==i;){const r=i._next;this._addToRemovals(this._unlink(i)),i=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const l=i._prevRemoved,d=i._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(i,r,o),this._addToMoves(i,o),i}_moveAfter(i,r,o){return this._unlink(i),this._insertAfter(i,r,o),this._addToMoves(i,o),i}_addAfter(i,r,o){return this._insertAfter(i,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,r,o){const l=null===r?this._itHead:r._next;return i._next=l,i._prev=r,null===l?this._itTail=i:l._prev=i,null===r?this._itHead=i:r._next=i,null===this._linkedRecords&&(this._linkedRecords=new __),this._linkedRecords.put(i),i.currentIndex=o,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const r=i._prev,o=i._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,i}_addToMoves(i,r){return i.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new __),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,r){return i.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class rS{constructor(i,r){this.item=i,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sS{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,i))return o;return null}remove(i){const r=i._prevDup,o=i._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class __{constructor(){this.map=new Map}put(i){const r=i.trackById;let o=this.map.get(r);o||(o=new sS,this.map.set(r,o)),o.add(i)}get(i,r){const l=this.map.get(i);return l?l.get(i,r):null}remove(i){const r=i.trackById;return this.map.get(r).remove(i)&&this.map.delete(r),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function E_(t,i,r){const o=t.previousIndex;if(null===o)return o;let l=0;return r&&o<r.length&&(l=r[o]),o+i+l}class w_{constructor(){}supports(i){return i instanceof Map||_p(i)}create(){return new oS}}class oS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let r;for(r=this._mapHead;null!==r;r=r._next)i(r)}forEachPreviousItem(i){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)i(r)}forEachChangedItem(i){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)i(r)}forEachAddedItem(i){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)i(r)}forEachRemovedItem(i){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)i(r)}diff(i){if(i){if(!(i instanceof Map||_p(i)))throw new we(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(i,(o,l)=>{if(r&&r.key===l)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const d=this._getOrCreateRecordForKey(l,o);r=this._insertBeforeOrAppend(r,d)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,r){if(i){const o=i._prev;return r._next=i,r._prev=o,i._prev=r,o&&(o._next=r),i===this._mapHead&&(this._mapHead=r),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(i,r){if(this._records.has(i)){const l=this._records.get(i);this._maybeAddToChanges(l,r);const d=l._prev,p=l._next;return d&&(d._next=p),p&&(p._prev=d),l._next=null,l._prev=null,l}const o=new aS(i);return this._records.set(i,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,r){Object.is(r,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=r,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,r){i instanceof Map?i.forEach(r):Object.keys(i).forEach(o=>r(i[o],o))}}class aS{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function A_(){return new wg([new b_])}let wg=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:A_});constructor(r){this.factories=r}static create(r,o){if(null!=o){const l=o.factories.slice();r=r.concat(l)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||A_()),deps:[[t,new Hc,new jc]]}}find(r){const o=this.factories.find(l=>l.supports(r));if(null!=o)return o;throw new we(901,!1)}}return t})();function C_(){return new Ag([new w_])}let Ag=(()=>{class t{static#e=this.\u0275prov=tt({token:t,providedIn:"root",factory:C_});constructor(r){this.factories=r}static create(r,o){if(o){const l=o.factories.slice();r=r.concat(l)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||C_()),deps:[[t,new Hc,new jc]]}}find(r){const o=this.factories.find(l=>l.supports(r));if(o)return o;throw new we(901,!1)}}return t})();const uS=a_(null,"core",[]);let dS=(()=>{class t{constructor(r){}static#e=this.\u0275fac=function(o){return new(o||t)(Fn(hc))};static#t=this.\u0275mod=Rn({type:t});static#n=this.\u0275inj=Ni({})}return t})();function wS(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function CS(t){const i=jt(t);if(!i)return null;const r=new vu(i);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return i.standalone},get isSignal(){return i.signals}}}},6593:(dt,Ce,F)=>{F.d(Ce,{Dx:()=>Ni,b2:()=>ln,q6:()=>at});var M=F(4769),z=F(6814);class se extends z.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ee extends se{static makeCurrent(){(0,z.HT)(new ee)}onAndCancel(J,$,Y){return J.addEventListener($,Y),()=>{J.removeEventListener($,Y)}}dispatchEvent(J,$){J.dispatchEvent($)}remove(J){J.parentNode&&J.parentNode.removeChild(J)}createElement(J,$){return($=$||this.getDefaultDocument()).createElement(J)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(J){return J.nodeType===Node.ELEMENT_NODE}isShadowRoot(J){return J instanceof DocumentFragment}getGlobalEventTarget(J,$){return"window"===$?window:"document"===$?J:"body"===$?J.body:null}getBaseHref(J){const $=function oe(){return Q=Q||document.querySelector("base"),Q?Q.getAttribute("href"):null}();return null==$?null:function ke(Ae){ce=ce||document.createElement("a"),ce.setAttribute("href",Ae);const J=ce.pathname;return"/"===J.charAt(0)?J:`/${J}`}($)}resetBaseElement(){Q=null}getUserAgent(){return window.navigator.userAgent}getCookie(J){return(0,z.Mx)(document.cookie,J)}}let ce,Q=null,xe=(()=>{class Ae{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Y){return new(Y||Ae)};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();const ae=new M.OlP("EventManagerPlugins");let he=(()=>{class Ae{constructor($,Y){this._zone=Y,this._eventNameToPlugin=new Map,$.forEach(me=>{me.manager=this}),this._plugins=$.slice().reverse()}addEventListener($,Y,me){return this._findPluginFor(Y).addEventListener($,Y,me)}getZone(){return this._zone}_findPluginFor($){let Y=this._eventNameToPlugin.get($);if(Y)return Y;if(Y=this._plugins.find(Qe=>Qe.supports($)),!Y)throw new M.vHH(5101,!1);return this._eventNameToPlugin.set($,Y),Y}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(ae),M.LFG(M.R0b))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();class q{constructor(J){this._doc=J}}const Te="ng-app-id";let fe=(()=>{class Ae{constructor($,Y,me,Qe={}){this.doc=$,this.appId=Y,this.nonce=me,this.platformId=Qe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,z.PM)(Qe),this.resetHostNodes()}addStyles($){for(const Y of $)1===this.changeUsageCount(Y,1)&&this.onStyleAdded(Y)}removeStyles($){for(const Y of $)this.changeUsageCount(Y,-1)<=0&&this.onStyleRemoved(Y)}ngOnDestroy(){const $=this.styleNodesInDOM;$&&($.forEach(Y=>Y.remove()),$.clear());for(const Y of this.getAllStyles())this.onStyleRemoved(Y);this.resetHostNodes()}addHost($){this.hostNodes.add($);for(const Y of this.getAllStyles())this.addStyleToHost($,Y)}removeHost($){this.hostNodes.delete($)}getAllStyles(){return this.styleRef.keys()}onStyleAdded($){for(const Y of this.hostNodes)this.addStyleToHost(Y,$)}onStyleRemoved($){const Y=this.styleRef;Y.get($)?.elements?.forEach(me=>me.remove()),Y.delete($)}collectServerRenderedStyles(){const $=this.doc.head?.querySelectorAll(`style[${Te}="${this.appId}"]`);if($?.length){const Y=new Map;return $.forEach(me=>{null!=me.textContent&&Y.set(me.textContent,me)}),Y}return null}changeUsageCount($,Y){const me=this.styleRef;if(me.has($)){const Qe=me.get($);return Qe.usage+=Y,Qe.usage}return me.set($,{usage:Y,elements:[]}),Y}getStyleElement($,Y){const me=this.styleNodesInDOM,Qe=me?.get(Y);if(Qe?.parentNode===$)return me.delete(Y),Qe.removeAttribute(Te),Qe;{const ft=this.doc.createElement("style");return this.nonce&&ft.setAttribute("nonce",this.nonce),ft.textContent=Y,this.platformIsServer&&ft.setAttribute(Te,this.appId),ft}}addStyleToHost($,Y){const me=this.getStyleElement($,Y);$.appendChild(me);const Qe=this.styleRef,ft=Qe.get(Y)?.elements;ft?ft.push(me):Qe.set(Y,{elements:[me],usage:1})}resetHostNodes(){const $=this.hostNodes;$.clear(),$.add(this.doc.head)}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(z.K0),M.LFG(M.AFp),M.LFG(M.Ojb,8),M.LFG(M.Lbi))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qe=/%COMP%/g,Ve=new M.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ye(Ae,J){return J.map($=>$.replace(qe,Ae))}let ge=(()=>{class Ae{constructor($,Y,me,Qe,ft,tn,Gt,wn=null){this.eventManager=$,this.sharedStylesHost=Y,this.appId=me,this.removeStylesOnCompDestroy=Qe,this.doc=ft,this.platformId=tn,this.ngZone=Gt,this.nonce=wn,this.rendererByCompId=new Map,this.platformIsServer=(0,z.PM)(tn),this.defaultRenderer=new Ue($,ft,Gt,this.platformIsServer)}createRenderer($,Y){if(!$||!Y)return this.defaultRenderer;this.platformIsServer&&Y.encapsulation===M.ifc.ShadowDom&&(Y={...Y,encapsulation:M.ifc.Emulated});const me=this.getOrCreateRenderer($,Y);return me instanceof Ir?me.applyToHost($):me instanceof si&&me.applyStyles(),me}getOrCreateRenderer($,Y){const me=this.rendererByCompId;let Qe=me.get(Y.id);if(!Qe){const ft=this.doc,tn=this.ngZone,Gt=this.eventManager,wn=this.sharedStylesHost,kn=this.removeStylesOnCompDestroy,zi=this.platformIsServer;switch(Y.encapsulation){case M.ifc.Emulated:Qe=new Ir(Gt,wn,Y,this.appId,kn,ft,tn,zi);break;case M.ifc.ShadowDom:return new ot(Gt,wn,$,Y,ft,tn,this.nonce,zi);default:Qe=new si(Gt,wn,Y,kn,ft,tn,zi)}me.set(Y.id,Qe)}return Qe}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(he),M.LFG(fe),M.LFG(M.AFp),M.LFG(Ve),M.LFG(z.K0),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(M.Ojb))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();class Ue{constructor(J,$,Y,me){this.eventManager=J,this.doc=$,this.ngZone=Y,this.platformIsServer=me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(J,$){return $?this.doc.createElementNS(st[$]||$,J):this.doc.createElement(J)}createComment(J){return this.doc.createComment(J)}createText(J){return this.doc.createTextNode(J)}appendChild(J,$){(et(J)?J.content:J).appendChild($)}insertBefore(J,$,Y){J&&(et(J)?J.content:J).insertBefore($,Y)}removeChild(J,$){J&&J.removeChild($)}selectRootElement(J,$){let Y="string"==typeof J?this.doc.querySelector(J):J;if(!Y)throw new M.vHH(-5104,!1);return $||(Y.textContent=""),Y}parentNode(J){return J.parentNode}nextSibling(J){return J.nextSibling}setAttribute(J,$,Y,me){if(me){$=me+":"+$;const Qe=st[me];Qe?J.setAttributeNS(Qe,$,Y):J.setAttribute($,Y)}else J.setAttribute($,Y)}removeAttribute(J,$,Y){if(Y){const me=st[Y];me?J.removeAttributeNS(me,$):J.removeAttribute(`${Y}:${$}`)}else J.removeAttribute($)}addClass(J,$){J.classList.add($)}removeClass(J,$){J.classList.remove($)}setStyle(J,$,Y,me){me&(M.JOm.DashCase|M.JOm.Important)?J.style.setProperty($,Y,me&M.JOm.Important?"important":""):J.style[$]=Y}removeStyle(J,$,Y){Y&M.JOm.DashCase?J.style.removeProperty($):J.style[$]=""}setProperty(J,$,Y){J[$]=Y}setValue(J,$){J.nodeValue=$}listen(J,$,Y){if("string"==typeof J&&!(J=(0,z.q)().getGlobalEventTarget(this.doc,J)))throw new Error(`Unsupported event target ${J} for event ${$}`);return this.eventManager.addEventListener(J,$,this.decoratePreventDefault(Y))}decoratePreventDefault(J){return $=>{if("__ngUnwrap__"===$)return J;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>J($)):J($))&&$.preventDefault()}}}function et(Ae){return"TEMPLATE"===Ae.tagName&&void 0!==Ae.content}class ot extends Ue{constructor(J,$,Y,me,Qe,ft,tn,Gt){super(J,Qe,ft,Gt),this.sharedStylesHost=$,this.hostEl=Y,this.shadowRoot=Y.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const wn=Ye(me.id,me.styles);for(const kn of wn){const zi=document.createElement("style");tn&&zi.setAttribute("nonce",tn),zi.textContent=kn,this.shadowRoot.appendChild(zi)}}nodeOrShadowRoot(J){return J===this.hostEl?this.shadowRoot:J}appendChild(J,$){return super.appendChild(this.nodeOrShadowRoot(J),$)}insertBefore(J,$,Y){return super.insertBefore(this.nodeOrShadowRoot(J),$,Y)}removeChild(J,$){return super.removeChild(this.nodeOrShadowRoot(J),$)}parentNode(J){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(J)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class si extends Ue{constructor(J,$,Y,me,Qe,ft,tn,Gt){super(J,Qe,ft,tn),this.sharedStylesHost=$,this.removeStylesOnCompDestroy=me,this.styles=Gt?Ye(Gt,Y.styles):Y.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ir extends si{constructor(J,$,Y,me,Qe,ft,tn,Gt){const wn=me+"-"+Y.id;super(J,$,Y,Qe,ft,tn,Gt,wn),this.contentAttr=function _e(Ae){return"_ngcontent-%COMP%".replace(qe,Ae)}(wn),this.hostAttr=function ct(Ae){return"_nghost-%COMP%".replace(qe,Ae)}(wn)}applyToHost(J){this.applyStyles(),this.setAttribute(J,this.hostAttr,"")}createElement(J,$){const Y=super.createElement(J,$);return super.setAttribute(Y,this.contentAttr,""),Y}}let pi=(()=>{class Ae extends q{constructor($){super($)}supports($){return!0}addEventListener($,Y,me){return $.addEventListener(Y,me,!1),()=>this.removeEventListener($,Y,me)}removeEventListener($,Y,me){return $.removeEventListener(Y,me)}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(z.K0))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();const on=["alt","control","meta","shift"],X={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},le={alt:Ae=>Ae.altKey,control:Ae=>Ae.ctrlKey,meta:Ae=>Ae.metaKey,shift:Ae=>Ae.shiftKey};let Ee=(()=>{class Ae extends q{constructor($){super($)}supports($){return null!=Ae.parseEventName($)}addEventListener($,Y,me){const Qe=Ae.parseEventName(Y),ft=Ae.eventCallback(Qe.fullKey,me,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,z.q)().onAndCancel($,Qe.domEventName,ft))}static parseEventName($){const Y=$.toLowerCase().split("."),me=Y.shift();if(0===Y.length||"keydown"!==me&&"keyup"!==me)return null;const Qe=Ae._normalizeKey(Y.pop());let ft="",tn=Y.indexOf("code");if(tn>-1&&(Y.splice(tn,1),ft="code."),on.forEach(wn=>{const kn=Y.indexOf(wn);kn>-1&&(Y.splice(kn,1),ft+=wn+".")}),ft+=Qe,0!=Y.length||0===Qe.length)return null;const Gt={};return Gt.domEventName=me,Gt.fullKey=ft,Gt}static matchEventFullKeyCode($,Y){let me=X[$.key]||$.key,Qe="";return Y.indexOf("code.")>-1&&(me=$.code,Qe="code."),!(null==me||!me)&&(me=me.toLowerCase()," "===me?me="space":"."===me&&(me="dot"),on.forEach(ft=>{ft!==me&&(0,le[ft])($)&&(Qe+=ft+".")}),Qe+=me,Qe===Y)}static eventCallback($,Y,me){return Qe=>{Ae.matchEventFullKeyCode(Qe,$)&&me.runGuarded(()=>Y(Qe))}}static _normalizeKey($){return"esc"===$?"escape":$}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(z.K0))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:Ae.\u0275fac})}return Ae})();const at=(0,M.eFA)(M._c5,"browser",[{provide:M.Lbi,useValue:z.bD},{provide:M.g9A,useValue:function Mt(){ee.makeCurrent()},multi:!0},{provide:z.K0,useFactory:function yt(){return(0,M.RDi)(document),document},deps:[]}]),wt=new M.OlP(""),bt=[{provide:M.rWj,useClass:class Re{addToWindow(J){M.dqk.getAngularTestability=(Y,me=!0)=>{const Qe=J.findTestabilityInTree(Y,me);if(null==Qe)throw new M.vHH(5103,!1);return Qe},M.dqk.getAllAngularTestabilities=()=>J.getAllTestabilities(),M.dqk.getAllAngularRootElements=()=>J.getAllRootElements(),M.dqk.frameworkStabilizers||(M.dqk.frameworkStabilizers=[]),M.dqk.frameworkStabilizers.push(Y=>{const me=M.dqk.getAllAngularTestabilities();let Qe=me.length,ft=!1;const tn=function(Gt){ft=ft||Gt,Qe--,0==Qe&&Y(ft)};me.forEach(Gt=>{Gt.whenStable(tn)})})}findTestabilityInTree(J,$,Y){return null==$?null:J.getTestability($)??(Y?(0,z.q)().isShadowRoot($)?this.findTestabilityInTree(J,$.host,!0):this.findTestabilityInTree(J,$.parentElement,!0):null)}},deps:[]},{provide:M.lri,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]},{provide:M.dDg,useClass:M.dDg,deps:[M.R0b,M.eoX,M.rWj]}],it=[{provide:M.zSh,useValue:"root"},{provide:M.qLn,useFactory:function qn(){return new M.qLn},deps:[]},{provide:ae,useClass:pi,multi:!0,deps:[z.K0,M.R0b,M.Lbi]},{provide:ae,useClass:Ee,multi:!0,deps:[z.K0]},ge,fe,he,{provide:M.FYo,useExisting:ge},{provide:z.JF,useClass:xe,deps:[]},[]];let ln=(()=>{class Ae{constructor($){}static withServerTransition($){return{ngModule:Ae,providers:[{provide:M.AFp,useValue:$.appId}]}}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(wt,12))};static#t=this.\u0275mod=M.oAB({type:Ae});static#n=this.\u0275inj=M.cJS({providers:[...it,...bt],imports:[z.ez,M.hGG]})}return Ae})(),Ni=(()=>{class Ae{constructor($){this._doc=$}getTitle(){return this._doc.title}setTitle($){this._doc.title=$||""}static#e=this.\u0275fac=function(Y){return new(Y||Ae)(M.LFG(z.K0))};static#t=this.\u0275prov=M.Yz7({token:Ae,factory:function(Y){let me=null;return me=Y?new Y:function Li(){return new Ni((0,M.LFG)(z.K0))}(),me},providedIn:"root"})}return Ae})();typeof window<"u"&&window},7030:(dt,Ce,F)=>{F.d(Ce,{wm:()=>ms,Bz:()=>po,lC:()=>Lr});var M=F(4769),z=F(5592),se=F(4674),Q=F(7715),oe=F(2096),ce=F(5619),ke=F(7453),Re=F(2737),xe=F(7400),ae=F(9940),he=F(2714),q=F(8251),Te=F(7103);function fe(...y){const C=(0,ae.yG)(y),m=(0,ae.jO)(y),{args:A,keys:x}=(0,ke.D)(y);if(0===A.length)return(0,Q.D)([],C);const N=new z.y(function st(y,C,m=Re.y){return A=>{qe(C,()=>{const{length:x}=y,N=new Array(x);let H=x,ie=x;for(let Z=0;Z<x;Z++)qe(C,()=>{const Xe=(0,Q.D)(y[Z],C);let _t=!1;Xe.subscribe((0,q.x)(A,Qt=>{N[Z]=Qt,_t||(_t=!0,ie--),ie||A.next(m(N.slice()))},()=>{--H||A.complete()}))},A)},A)}}(A,C,x?H=>(0,he.n)(x,H):Re.y));return m?N.pipe((0,xe.Z)(m)):N}function qe(y,C,m){y?(0,Te.f)(m,y,C):C()}const vt=(0,F(2306).d)(y=>function(){y(this),this.name="EmptyError",this.message="no elements in sequence"});var qt=F(5211),Ge=F(4911),Ve=F(8407),_e=F(8504),ct=F(6232),Ye=F(3168),ge=F(8645),Ue=F(7394),we=F(6814),ht=F(7398),et=F(4664),ot=F(8180),si=F(9360),pi=F(2181),on=F(1631);function X(y){return(0,si.e)((C,m)=>{let A=!1;C.subscribe((0,q.x)(m,x=>{A=!0,m.next(x)},()=>{A||m.next(y),m.complete()}))})}function le(y=Ee){return(0,si.e)((C,m)=>{let A=!1;C.subscribe((0,q.x)(m,x=>{A=!0,m.next(x)},()=>A?m.complete():m.error(y())))})}function Ee(){return new vt}function pe(y,C){const m=arguments.length>=2;return A=>A.pipe(y?(0,pi.h)((x,N)=>y(x,N,A)):Re.y,(0,ot.q)(1),m?X(C):le(()=>new vt))}function Le(y,C){return(0,se.m)(C)?(0,on.z)(y,C,1):(0,on.z)(y,1)}var De=F(9397),Et=F(4829);function Mt(y){return(0,si.e)((C,m)=>{let N,A=null,x=!1;A=C.subscribe((0,q.x)(m,void 0,void 0,H=>{N=(0,Et.Xf)(y(H,Mt(y)(C))),A?(A.unsubscribe(),A=null,N.subscribe(m)):x=!0})),x&&(A.unsubscribe(),A=null,N.subscribe(m))})}function $t(y){return y<=0?()=>ct.E:(0,si.e)((C,m)=>{let A=[];C.subscribe((0,q.x)(m,x=>{A.push(x),y<A.length&&A.shift()},()=>{for(const x of A)m.next(x);m.complete()},void 0,()=>{A=null}))})}var wt=F(975);function bt(y){return(0,si.e)((C,m)=>{try{C.subscribe(m)}finally{m.add(y)}})}var it=F(6196),ln=F(9773),pt=F(7537),Nn=F(6593);const tt="primary",Li=Symbol("RouteTitle");class Ni{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const m=this.params[C];return Array.isArray(m)?m[0]:m}return null}getAll(C){if(this.has(C)){const m=this.params[C];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function un(y){return new Ni(y)}function Wn(y,C,m){const A=m.path.split("/");if(A.length>y.length||"full"===m.pathMatch&&(C.hasChildren()||A.length<y.length))return null;const x={};for(let N=0;N<A.length;N++){const H=A[N],ie=y[N];if(H.startsWith(":"))x[H.substring(1)]=ie;else if(H!==ie.path)return null}return{consumed:y.slice(0,A.length),posParams:x}}function gt(y,C){const m=y?Object.keys(y):void 0,A=C?Object.keys(C):void 0;if(!m||!A||m.length!=A.length)return!1;let x;for(let N=0;N<m.length;N++)if(x=m[N],!Tt(y[x],C[x]))return!1;return!0}function Tt(y,C){if(Array.isArray(y)&&Array.isArray(C)){if(y.length!==C.length)return!1;const m=[...y].sort(),A=[...C].sort();return m.every((x,N)=>A[N]===x)}return y===C}function Ne(y){return y.length>0?y[y.length-1]:null}function rt(y){return function ee(y){return!!y&&(y instanceof z.y||(0,se.m)(y.lift)&&(0,se.m)(y.subscribe))}(y)?y:(0,M.QGY)(y)?(0,Q.D)(Promise.resolve(y)):(0,oe.of)(y)}const $e={exact:function lt(y,C,m){if(!ai(y.segments,C.segments)||!Vt(y.segments,C.segments,m)||y.numberOfChildren!==C.numberOfChildren)return!1;for(const A in C.children)if(!y.children[A]||!lt(y.children[A],C.children[A],m))return!1;return!0},subset:ze},Je={exact:function cn(y,C){return gt(y,C)},subset:function bn(y,C){return Object.keys(C).length<=Object.keys(y).length&&Object.keys(C).every(m=>Tt(y[m],C[m]))},ignored:()=>!0};function Be(y,C,m){return $e[m.paths](y.root,C.root,m.matrixParams)&&Je[m.queryParams](y.queryParams,C.queryParams)&&!("exact"===m.fragment&&y.fragment!==C.fragment)}function ze(y,C,m){return is(y,C,C.segments,m)}function is(y,C,m,A){if(y.segments.length>m.length){const x=y.segments.slice(0,m.length);return!(!ai(x,m)||C.hasChildren()||!Vt(x,m,A))}if(y.segments.length===m.length){if(!ai(y.segments,m)||!Vt(y.segments,m,A))return!1;for(const x in C.children)if(!y.children[x]||!ze(y.children[x],C.children[x],A))return!1;return!0}{const x=m.slice(0,y.segments.length),N=m.slice(y.segments.length);return!!(ai(y.segments,x)&&Vt(y.segments,x,A)&&y.children[tt])&&is(y.children[tt],C,N,A)}}function Vt(y,C,m){return C.every((A,x)=>Je[m](y[x].parameters,A.parameters))}class jr{constructor(C=new Wt([],{}),m={},A=null){this.root=C,this.queryParams=m,this.fragment=A}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return Vr.serialize(this)}}class Wt{constructor(C,m){this.segments=C,this.children=m,this.parent=null,Object.values(m).forEach(A=>A.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ci(this)}}class Nt{constructor(C,m){this.path=C,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=un(this.parameters)),this._parameterMap}toString(){return ft(this)}}function ai(y,C){return y.length===C.length&&y.every((m,A)=>m.path===C[A].path)}let $i=(()=>{class y{static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:function(){return new xs},providedIn:"root"})}return y})();class xs{parse(C){const m=new Ts(C);return new jr(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(C){const m=`/${Ur(C.root,!0)}`,A=function Gt(y){const C=Object.keys(y).map(m=>{const A=y[m];return Array.isArray(A)?A.map(x=>`${J(m)}=${J(x)}`).join("&"):`${J(m)}=${J(A)}`}).filter(m=>!!m);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${m}${A}${"string"==typeof C.fragment?`#${function $(y){return encodeURI(y)}(C.fragment)}`:""}`}}const Vr=new xs;function Ci(y){return y.segments.map(C=>ft(C)).join("/")}function Ur(y,C){if(!y.hasChildren())return Ci(y);if(C){const m=y.children[tt]?Ur(y.children[tt],!1):"",A=[];return Object.entries(y.children).forEach(([x,N])=>{x!==tt&&A.push(`${x}:${Ur(N,!1)}`)}),A.length>0?`${m}(${A.join("//")})`:m}{const m=function xr(y,C){let m=[];return Object.entries(y.children).forEach(([A,x])=>{A===tt&&(m=m.concat(C(x,A)))}),Object.entries(y.children).forEach(([A,x])=>{A!==tt&&(m=m.concat(C(x,A)))}),m}(y,(A,x)=>x===tt?[Ur(y.children[tt],!1)]:[`${x}:${Ur(A,!1)}`]);return 1===Object.keys(y.children).length&&null!=y.children[tt]?`${Ci(y)}/${m[0]}`:`${Ci(y)}/(${m.join("//")})`}}function Ae(y){return encodeURIComponent(y).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function J(y){return Ae(y).replace(/%3B/gi,";")}function Y(y){return Ae(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function me(y){return decodeURIComponent(y)}function Qe(y){return me(y.replace(/\+/g,"%20"))}function ft(y){return`${Y(y.path)}${function tn(y){return Object.keys(y).map(C=>`;${Y(C)}=${Y(y[C])}`).join("")}(y.parameters)}`}const wn=/^[^\/()?;#]+/;function kn(y){const C=y.match(wn);return C?C[0]:""}const zi=/^[^\/()?;=#]+/,rs=/^[^=?&#]+/,ss=/^[^&#]+/;class Ts{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let A={};return this.peekStartsWith("(")&&(A=this.parseParens(!1)),(C.length>0||Object.keys(m).length>0)&&(A[tt]=new Wt(C,m)),A}parseSegment(){const C=kn(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new M.vHH(4009,!1);return this.capture(C),new Nt(me(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const m=function Di(y){const C=y.match(zi);return C?C[0]:""}(this.remaining);if(!m)return;this.capture(m);let A="";if(this.consumeOptional("=")){const x=kn(this.remaining);x&&(A=x,this.capture(A))}C[me(m)]=me(A)}parseQueryParam(C){const m=function Fn(y){const C=y.match(rs);return C?C[0]:""}(this.remaining);if(!m)return;this.capture(m);let A="";if(this.consumeOptional("=")){const H=function Yt(y){const C=y.match(ss);return C?C[0]:""}(this.remaining);H&&(A=H,this.capture(A))}const x=Qe(m),N=Qe(A);if(C.hasOwnProperty(x)){let H=C[x];Array.isArray(H)||(H=[H],C[x]=H),H.push(N)}else C[x]=N}parseParens(C){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const A=kn(this.remaining),x=this.remaining[A.length];if("/"!==x&&")"!==x&&";"!==x)throw new M.vHH(4010,!1);let N;A.indexOf(":")>-1?(N=A.slice(0,A.indexOf(":")),this.capture(N),this.capture(":")):C&&(N=tt);const H=this.parseChildren();m[N]=1===Object.keys(H).length?H[tt]:new Wt([],H),this.consumeOptional("//")}return m}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new M.vHH(4011,!1)}}function Ps(y){return y.segments.length>0?new Wt([],{[tt]:y}):y}function Tr(y){const C={};for(const A of Object.keys(y.children)){const N=Tr(y.children[A]);if(A===tt&&0===N.segments.length&&N.hasChildren())for(const[H,ie]of Object.entries(N.children))C[H]=ie;else(N.segments.length>0||N.hasChildren())&&(C[A]=N)}return function Pr(y){if(1===y.numberOfChildren&&y.children[tt]){const C=y.children[tt];return new Wt(y.segments.concat(C.segments),C.children)}return y}(new Wt(y.segments,C))}function Sn(y){return y instanceof jr}function ki(y){let C;const x=Ps(function m(N){const H={};for(const Z of N.children){const Xe=m(Z);H[Z.outlet]=Xe}const ie=new Wt(N.url,H);return N===y&&(C=ie),ie}(y.root));return C??x}function os(y,C,m,A){let x=y;for(;x.parent;)x=x.parent;if(0===C.length)return Bt(x,x,x,m,A);const N=function Wi(y){if("string"==typeof y[0]&&1===y.length&&"/"===y[0])return new Si(!0,0,y);let C=0,m=!1;const A=y.reduce((x,N,H)=>{if("object"==typeof N&&null!=N){if(N.outlets){const ie={};return Object.entries(N.outlets).forEach(([Z,Xe])=>{ie[Z]="string"==typeof Xe?Xe.split("/"):Xe}),[...x,{outlets:ie}]}if(N.segmentPath)return[...x,N.segmentPath]}return"string"!=typeof N?[...x,N]:0===H?(N.split("/").forEach((ie,Z)=>{0==Z&&"."===ie||(0==Z&&""===ie?m=!0:".."===ie?C++:""!=ie&&x.push(ie))}),x):[...x,N]},[]);return new Si(m,C,A)}(C);if(N.toRoot())return Bt(x,x,new Wt([],{}),m,A);const H=function Gi(y,C,m){if(y.isAbsolute)return new tr(C,!0,0);if(!m)return new tr(C,!1,NaN);if(null===m.parent)return new tr(m,!0,0);const A=Fi(y.commands[0])?0:1;return function nr(y,C,m){let A=y,x=C,N=m;for(;N>x;){if(N-=x,A=A.parent,!A)throw new M.vHH(4005,!1);x=A.segments.length}return new tr(A,!1,x-N)}(m,m.segments.length-1+A,y.numberOfDoubleDots)}(N,x,y),ie=H.processChildren?ir(H.segmentGroup,H.index,N.commands):Rs(H.segmentGroup,H.index,N.commands);return Bt(x,H.segmentGroup,ie,m,A)}function Fi(y){return"object"==typeof y&&null!=y&&!y.outlets&&!y.segmentPath}function Bn(y){return"object"==typeof y&&null!=y&&y.outlets}function Bt(y,C,m,A,x){let H,N={};A&&Object.entries(A).forEach(([Z,Xe])=>{N[Z]=Array.isArray(Xe)?Xe.map(_t=>`${_t}`):`${Xe}`}),H=y===C?m:nn(y,C,m);const ie=Ps(Tr(H));return new jr(ie,N,x)}function nn(y,C,m){const A={};return Object.entries(y.children).forEach(([x,N])=>{A[x]=N===C?m:nn(N,C,m)}),new Wt(y.segments,A)}class Si{constructor(C,m,A){if(this.isAbsolute=C,this.numberOfDoubleDots=m,this.commands=A,C&&A.length>0&&Fi(A[0]))throw new M.vHH(4003,!1);const x=A.find(Bn);if(x&&x!==Ne(A))throw new M.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tr{constructor(C,m,A){this.segmentGroup=C,this.processChildren=m,this.index=A}}function Rs(y,C,m){if(y||(y=new Wt([],{})),0===y.segments.length&&y.hasChildren())return ir(y,C,m);const A=function oo(y,C,m){let A=0,x=C;const N={match:!1,pathIndex:0,commandIndex:0};for(;x<y.segments.length;){if(A>=m.length)return N;const H=y.segments[x],ie=m[A];if(Bn(ie))break;const Z=`${ie}`,Xe=A<m.length-1?m[A+1]:null;if(x>0&&void 0===Z)break;if(Z&&Xe&&"object"==typeof Xe&&void 0===Xe.outlets){if(!Os(Z,Xe,H))return N;A+=2}else{if(!Os(Z,{},H))return N;A++}x++}return{match:!0,pathIndex:x,commandIndex:A}}(y,C,m),x=m.slice(A.commandIndex);if(A.match&&A.pathIndex<y.segments.length){const N=new Wt(y.segments.slice(0,A.pathIndex),{});return N.children[tt]=new Wt(y.segments.slice(A.pathIndex),y.children),ir(N,0,x)}return A.match&&0===x.length?new Wt(y.segments,{}):A.match&&!y.hasChildren()?Yi(y,C,m):A.match?ir(y,0,x):Yi(y,C,m)}function ir(y,C,m){if(0===m.length)return new Wt(y.segments,{});{const A=function aa(y){return Bn(y[0])?y[0].outlets:{[tt]:y}}(m),x={};if(Object.keys(A).some(N=>N!==tt)&&y.children[tt]&&1===y.numberOfChildren&&0===y.children[tt].segments.length){const N=ir(y.children[tt],C,m);return new Wt(y.segments,N.children)}return Object.entries(A).forEach(([N,H])=>{"string"==typeof H&&(H=[H]),null!==H&&(x[N]=Rs(y.children[N],C,H))}),Object.entries(y.children).forEach(([N,H])=>{void 0===A[N]&&(x[N]=H)}),new Wt(y.segments,x)}}function Yi(y,C,m){const A=y.segments.slice(0,C);let x=0;for(;x<m.length;){const N=m[x];if(Bn(N)){const Z=rr(N.outlets);return new Wt(A,Z)}if(0===x&&Fi(m[0])){A.push(new Nt(y.segments[C].path,Rr(m[0]))),x++;continue}const H=Bn(N)?N.outlets[tt]:`${N}`,ie=x<m.length-1?m[x+1]:null;H&&ie&&Fi(ie)?(A.push(new Nt(H,Rr(ie))),x+=2):(A.push(new Nt(H,{})),x++)}return new Wt(A,{})}function rr(y){const C={};return Object.entries(y).forEach(([m,A])=>{"string"==typeof A&&(A=[A]),null!==A&&(C[m]=Yi(new Wt([],{}),0,A))}),C}function Rr(y){const C={};return Object.entries(y).forEach(([m,A])=>C[m]=`${A}`),C}function Os(y,C,m){return y==m.path&&gt(C,m.parameters)}const mt="imperative";class Mi{constructor(C,m){this.id=C,this.url=m}}class as extends Mi{constructor(C,m,A="imperative",x=null){super(C,m),this.type=0,this.navigationTrigger=A,this.restoredState=x}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mn extends Mi{constructor(C,m,A){super(C,m),this.urlAfterRedirects=A,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hn extends Mi{constructor(C,m,A,x){super(C,m),this.reason=A,this.code=x,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $r extends Mi{constructor(C,m,A,x){super(C,m),this.reason=A,this.code=x,this.type=16}}class Gn extends Mi{constructor(C,m,A,x){super(C,m),this.error=A,this.target=x,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ls extends Mi{constructor(C,m,A,x){super(C,m),this.urlAfterRedirects=A,this.state=x,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Io extends Mi{constructor(C,m,A,x){super(C,m),this.urlAfterRedirects=A,this.state=x,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends Mi{constructor(C,m,A,x,N){super(C,m),this.urlAfterRedirects=A,this.state=x,this.shouldActivate=N,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ca extends Mi{constructor(C,m,A,x){super(C,m),this.urlAfterRedirects=A,this.state=x,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ns extends Mi{constructor(C,m,A,x){super(C,m),this.urlAfterRedirects=A,this.state=x,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ao{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fr{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xo{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ua{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class da{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Po{constructor(C,m,A){this.routerEvent=C,this.position=m,this.anchor=A,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Rn{}class ls{constructor(C){this.url=C}}class Ro{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pr,this.attachRef=null}}let pr=(()=>{class y{constructor(){this.contexts=new Map}onChildOutletCreated(m,A){const x=this.getOrCreateContext(m);x.outlet=A,this.contexts.set(m,x)}onChildOutletDestroyed(m){const A=this.getContext(m);A&&(A.outlet=null,A.attachRef=null)}onOutletDeactivated(){const m=this.contexts;return this.contexts=new Map,m}onOutletReAttached(m){this.contexts=m}getOrCreateContext(m){let A=this.getContext(m);return A||(A=new Ro,this.contexts.set(m,A)),A}getContext(m){return this.contexts.get(m)||null}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();class jt{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const m=this.pathFromRoot(C);return m.length>1?m[m.length-2]:null}children(C){const m=On(C,this._root);return m?m.children.map(A=>A.value):[]}firstChild(C){const m=On(C,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(C){const m=jn(C,this._root);return m.length<2?[]:m[m.length-2].children.map(x=>x.value).filter(x=>x!==C)}pathFromRoot(C){return jn(C,this._root).map(m=>m.value)}}function On(y,C){if(y===C.value)return C;for(const m of C.children){const A=On(y,m);if(A)return A}return null}function jn(y,C){if(y===C.value)return[C];for(const m of C.children){const A=jn(y,m);if(A.length)return A.unshift(C),A}return[]}class li{constructor(C,m){this.value=C,this.children=m}toString(){return`TreeNode(${this.value})`}}function Ln(y){const C={};return y&&y.children.forEach(m=>C[m.value.outlet]=m),C}class co extends jt{constructor(C,m){super(C),this.snapshot=m,rn(this,C)}toString(){return this.snapshot.toString()}}function ks(y,C){const m=function Or(y,C){const H=new Ke([],{},{},"",{},tt,C,null,{});return new Dt("",new li(H,[]))}(0,C),A=new ce.X([new Nt("",{})]),x=new ce.X({}),N=new ce.X({}),H=new ce.X({}),ie=new ce.X(""),Z=new cs(A,x,H,ie,N,tt,C,m.root);return Z.snapshot=m.root,new co(new li(Z,[]),m)}class cs{constructor(C,m,A,x,N,H,ie,Z){this.urlSubject=C,this.paramsSubject=m,this.queryParamsSubject=A,this.fragmentSubject=x,this.dataSubject=N,this.outlet=H,this.component=ie,this._futureSnapshot=Z,this.title=this.dataSubject?.pipe((0,ht.U)(Xe=>Xe[Li]))??(0,oe.of)(void 0),this.url=C,this.params=m,this.queryParams=A,this.fragment=x,this.data=N}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(C=>un(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(C=>un(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function el(y,C="emptyOnly"){const m=y.pathFromRoot;let A=0;if("always"!==C)for(A=m.length-1;A>=1;){const x=m[A],N=m[A-1];if(x.routeConfig&&""===x.routeConfig.path)A--;else{if(N.component)break;A--}}return function fn(y){return y.reduce((C,m)=>({params:{...C.params,...m.params},data:{...C.data,...m.data},resolve:{...m.data,...C.resolve,...m.routeConfig?.data,...m._resolvedData}}),{params:{},data:{},resolve:{}})}(m.slice(A))}class Ke{get title(){return this.data?.[Li]}constructor(C,m,A,x,N,H,ie,Z,Xe){this.url=C,this.params=m,this.queryParams=A,this.fragment=x,this.data=N,this.outlet=H,this.component=ie,this.routeConfig=Z,this._resolve=Xe}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=un(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=un(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(A=>A.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Dt extends jt{constructor(C,m){super(m),this.url=C,rn(this,m)}toString(){return gi(this._root)}}function rn(y,C){C.value._routerState=y,C.children.forEach(m=>rn(y,m))}function gi(y){const C=y.children.length>0?` { ${y.children.map(gi).join(", ")} } `:"";return`${y.value}${C}`}function In(y){if(y.snapshot){const C=y.snapshot,m=y._futureSnapshot;y.snapshot=m,gt(C.queryParams,m.queryParams)||y.queryParamsSubject.next(m.queryParams),C.fragment!==m.fragment&&y.fragmentSubject.next(m.fragment),gt(C.params,m.params)||y.paramsSubject.next(m.params),function oi(y,C){if(y.length!==C.length)return!1;for(let m=0;m<y.length;++m)if(!gt(y[m],C[m]))return!1;return!0}(C.url,m.url)||y.urlSubject.next(m.url),gt(C.data,m.data)||y.dataSubject.next(m.data)}else y.snapshot=y._futureSnapshot,y.dataSubject.next(y._futureSnapshot.data)}function Hn(y,C){const m=gt(y.params,C.params)&&function Hr(y,C){return ai(y,C)&&y.every((m,A)=>gt(m.parameters,C[A].parameters))}(y.url,C.url);return m&&!(!y.parent!=!C.parent)&&(!y.parent||Hn(y.parent,C.parent))}let Lr=(()=>{class y{constructor(){this.activated=null,this._activatedRoute=null,this.name=tt,this.activateEvents=new M.vpe,this.deactivateEvents=new M.vpe,this.attachEvents=new M.vpe,this.detachEvents=new M.vpe,this.parentContexts=(0,M.f3M)(pr),this.location=(0,M.f3M)(M.s_b),this.changeDetector=(0,M.f3M)(M.sBO),this.environmentInjector=(0,M.f3M)(M.lqb),this.inputBinder=(0,M.f3M)(Ki,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(m){if(m.name){const{firstChange:A,previousValue:x}=m.name;if(A)return;this.isTrackedInParentContexts(x)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(x)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(m){return this.parentContexts.getContext(m)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const m=this.parentContexts.getContext(this.name);m?.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M.vHH(4012,!1);this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,A){this.activated=m,this._activatedRoute=A,this.location.insert(m.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,A){if(this.isActivated)throw new M.vHH(4013,!1);this._activatedRoute=m;const x=this.location,H=m.snapshot.component,ie=this.parentContexts.getOrCreateContext(this.name).children,Z=new pn(m,ie,x.injector);this.activated=x.createComponent(H,{index:x.length,injector:Z,environmentInjector:A??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275dir=M.lG2({type:y,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[M.TTD]})}return y})();class pn{constructor(C,m,A){this.route=C,this.childContexts=m,this.parent=A}get(C,m){return C===cs?this.route:C===pr?this.childContexts:this.parent.get(C,m)}}const Ki=new M.OlP("");let gr=(()=>{class y{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(m){this.unsubscribeFromRouteData(m),this.subscribeToRouteData(m)}unsubscribeFromRouteData(m){this.outletDataSubscriptions.get(m)?.unsubscribe(),this.outletDataSubscriptions.delete(m)}subscribeToRouteData(m){const{activatedRoute:A}=m,x=fe([A.queryParams,A.params,A.data]).pipe((0,et.w)(([N,H,ie],Z)=>(ie={...N,...H,...ie},0===Z?(0,oe.of)(ie):Promise.resolve(ie)))).subscribe(N=>{if(!m.isActivated||!m.activatedComponentRef||m.activatedRoute!==A||null===A.component)return void this.unsubscribeFromRouteData(m);const H=(0,M.qFp)(A.component);if(H)for(const{templateName:ie}of H.inputs)m.activatedComponentRef.setInput(ie,N[ie]);else this.unsubscribeFromRouteData(m)});this.outletDataSubscriptions.set(m,x)}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac})}return y})();function qi(y,C,m){if(m&&y.shouldReuseRoute(C.value,m.value.snapshot)){const A=m.value;A._futureSnapshot=C.value;const x=function us(y,C,m){return C.children.map(A=>{for(const x of m.children)if(y.shouldReuseRoute(A.value,x.value.snapshot))return qi(y,A,x);return qi(y,A)})}(y,C,m);return new li(A,x)}{if(y.shouldAttach(C.value)){const N=y.retrieve(C.value);if(null!==N){const H=N.route;return H.value._futureSnapshot=C.value,H.children=C.children.map(ie=>qi(y,ie)),H}}const A=function sr(y){return new cs(new ce.X(y.url),new ce.X(y.params),new ce.X(y.queryParams),new ce.X(y.fragment),new ce.X(y.data),y.outlet,y.component,y)}(C.value),x=C.children.map(N=>qi(y,N));return new li(A,x)}}const gn="ngNavigationCancelingError";function mr(y,C){const{redirectTo:m,navigationBehaviorOptions:A}=Sn(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,x=zr(!1,0,C);return x.url=m,x.navigationBehaviorOptions=A,x}function zr(y,C,m){const A=new Error("NavigationCancelingError: "+(y||""));return A[gn]=!0,A.cancellationCode=C,m&&(A.url=m),A}function Nr(y){return y&&y[gn]}let vr=(()=>{class y{static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275cmp=M.Xpm({type:y,selectors:[["ng-component"]],standalone:!0,features:[M.jDz],decls:1,vars:0,template:function(A,x){1&A&&M._UZ(0,"router-outlet")},dependencies:[Lr],encapsulation:2})}return y})();function Wr(y){const C=y.children&&y.children.map(Wr),m=C?{...y,children:C}:{...y};return!m.component&&!m.loadComponent&&(C||m.loadChildren)&&m.outlet&&m.outlet!==tt&&(m.component=vr),m}function ni(y){return y.outlet||tt}function An(y){if(!y)return null;if(y.routeConfig?._injector)return y.routeConfig._injector;for(let C=y.parent;C;C=C.parent){const m=C.routeConfig;if(m?._loadedInjector)return m._loadedInjector;if(m?._injector)return m._injector}return null}class Yn{constructor(C,m,A,x,N){this.routeReuseStrategy=C,this.futureState=m,this.currState=A,this.forwardEvent=x,this.inputBindingEnabled=N}activate(C){const m=this.futureState._root,A=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,A,C),In(this.futureState.root),this.activateChildRoutes(m,A,C)}deactivateChildRoutes(C,m,A){const x=Ln(m);C.children.forEach(N=>{const H=N.value.outlet;this.deactivateRoutes(N,x[H],A),delete x[H]}),Object.values(x).forEach(N=>{this.deactivateRouteAndItsChildren(N,A)})}deactivateRoutes(C,m,A){const x=C.value,N=m?m.value:null;if(x===N)if(x.component){const H=A.getContext(x.outlet);H&&this.deactivateChildRoutes(C,m,H.children)}else this.deactivateChildRoutes(C,m,A);else N&&this.deactivateRouteAndItsChildren(m,A)}deactivateRouteAndItsChildren(C,m){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,m):this.deactivateRouteAndOutlet(C,m)}detachAndStoreRouteSubtree(C,m){const A=m.getContext(C.value.outlet),x=A&&C.value.component?A.children:m,N=Ln(C);for(const H of Object.keys(N))this.deactivateRouteAndItsChildren(N[H],x);if(A&&A.outlet){const H=A.outlet.detach(),ie=A.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:H,route:C,contexts:ie})}}deactivateRouteAndOutlet(C,m){const A=m.getContext(C.value.outlet),x=A&&C.value.component?A.children:m,N=Ln(C);for(const H of Object.keys(N))this.deactivateRouteAndItsChildren(N[H],x);A&&(A.outlet&&(A.outlet.deactivate(),A.children.onOutletDeactivated()),A.attachRef=null,A.route=null)}activateChildRoutes(C,m,A){const x=Ln(m);C.children.forEach(N=>{this.activateRoutes(N,x[N.value.outlet],A),this.forwardEvent(new da(N.value.snapshot))}),C.children.length&&this.forwardEvent(new To(C.value.snapshot))}activateRoutes(C,m,A){const x=C.value,N=m?m.value:null;if(In(x),x===N)if(x.component){const H=A.getOrCreateContext(x.outlet);this.activateChildRoutes(C,m,H.children)}else this.activateChildRoutes(C,m,A);else if(x.component){const H=A.getOrCreateContext(x.outlet);if(this.routeReuseStrategy.shouldAttach(x.snapshot)){const ie=this.routeReuseStrategy.retrieve(x.snapshot);this.routeReuseStrategy.store(x.snapshot,null),H.children.onOutletReAttached(ie.contexts),H.attachRef=ie.componentRef,H.route=ie.route.value,H.outlet&&H.outlet.attach(ie.componentRef,ie.route.value),In(ie.route.value),this.activateChildRoutes(C,null,H.children)}else{const ie=An(x.snapshot);H.attachRef=null,H.route=x,H.injector=ie,H.outlet&&H.outlet.activateWith(x,H.injector),this.activateChildRoutes(C,null,H.children)}}else this.activateChildRoutes(C,null,A)}}class Bs{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class ji{constructor(C,m){this.component=C,this.route=m}}function ds(y,C,m){const A=y._root;return js(A,C?C._root:null,m,[A.value])}function br(y,C){const m=Symbol(),A=C.get(y,m);return A===m?"function"!=typeof y||(0,M.Z0I)(y)?C.get(y):y:A}function js(y,C,m,A,x={canDeactivateChecks:[],canActivateChecks:[]}){const N=Ln(C);return y.children.forEach(H=>{(function En(y,C,m,A,x={canDeactivateChecks:[],canActivateChecks:[]}){const N=y.value,H=C?C.value:null,ie=m?m.getContext(y.value.outlet):null;if(H&&N.routeConfig===H.routeConfig){const Z=function fa(y,C,m){if("function"==typeof m)return m(y,C);switch(m){case"pathParamsChange":return!ai(y.url,C.url);case"pathParamsOrQueryParamsChange":return!ai(y.url,C.url)||!gt(y.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hn(y,C)||!gt(y.queryParams,C.queryParams);default:return!Hn(y,C)}}(H,N,N.routeConfig.runGuardsAndResolvers);Z?x.canActivateChecks.push(new Bs(A)):(N.data=H.data,N._resolvedData=H._resolvedData),js(y,C,N.component?ie?ie.children:null:m,A,x),Z&&ie&&ie.outlet&&ie.outlet.isActivated&&x.canDeactivateChecks.push(new ji(ie.outlet.component,H))}else H&&Gr(C,ie,x),x.canActivateChecks.push(new Bs(A)),js(y,null,N.component?ie?ie.children:null:m,A,x)})(H,N[H.value.outlet],m,A.concat([H.value]),x),delete N[H.value.outlet]}),Object.entries(N).forEach(([H,ie])=>Gr(ie,m.getContext(H),x)),x}function Gr(y,C,m){const A=Ln(y),x=y.value;Object.entries(A).forEach(([N,H])=>{Gr(H,x.component?C?C.children.getContext(N):null:C,m)}),m.canDeactivateChecks.push(new ji(x.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,x))}function Hs(y){return"function"==typeof y}function uo(y){return y instanceof vt||"EmptyError"===y?.name}const Vs=Symbol("INITIAL_VALUE");function hs(){return(0,et.w)(y=>fe(y.map(C=>C.pipe((0,ot.q)(1),function Ir(...y){const C=(0,ae.yG)(y);return(0,si.e)((m,A)=>{(C?(0,qt.z)(y,m,C):(0,qt.z)(y,m)).subscribe(A)})}(Vs)))).pipe((0,ht.U)(C=>{for(const m of C)if(!0!==m){if(m===Vs)return Vs;if(!1===m||m instanceof jr)return m}return!0}),(0,pi.h)(C=>C!==Vs),(0,ot.q)(1)))}function No(y){return(0,Ve.z)((0,De.b)(C=>{if(Sn(C))throw mr(0,C)}),(0,ht.U)(C=>!0===C))}class Kr{constructor(C){this.segmentGroup=C||null}}class xi{constructor(C){this.urlTree=C}}function qr(y){return(0,_e._)(new Kr(y))}function ko(y){return(0,_e._)(new xi(y))}class Fo{constructor(C,m){this.urlSerializer=C,this.urlTree=m}noMatchError(C){return new M.vHH(4002,!1)}lineralizeSegments(C,m){let A=[],x=m.root;for(;;){if(A=A.concat(x.segments),0===x.numberOfChildren)return(0,oe.of)(A);if(x.numberOfChildren>1||!x.children[tt])return(0,_e._)(new M.vHH(4e3,!1));x=x.children[tt]}}applyRedirectCommands(C,m,A){return this.applyRedirectCreateUrlTree(m,this.urlSerializer.parse(m),C,A)}applyRedirectCreateUrlTree(C,m,A,x){const N=this.createSegmentGroup(C,m.root,A,x);return new jr(N,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(C,m){const A={};return Object.entries(C).forEach(([x,N])=>{if("string"==typeof N&&N.startsWith(":")){const ie=N.substring(1);A[x]=m[ie]}else A[x]=N}),A}createSegmentGroup(C,m,A,x){const N=this.createSegments(C,m.segments,A,x);let H={};return Object.entries(m.children).forEach(([ie,Z])=>{H[ie]=this.createSegmentGroup(C,Z,A,x)}),new Wt(N,H)}createSegments(C,m,A,x){return m.map(N=>N.path.startsWith(":")?this.findPosParam(C,N,x):this.findOrReturn(N,A))}findPosParam(C,m,A){const x=A[m.path.substring(1)];if(!x)throw new M.vHH(4001,!1);return x}findOrReturn(C,m){let A=0;for(const x of m){if(x.path===C.path)return m.splice(A),x;A++}return C}}const fs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Us(y,C,m,A,x){const N=Xr(y,C,m);return N.matched?(A=function ti(y,C){return y.providers&&!y._injector&&(y._injector=(0,M.MMx)(y.providers,C,`Route: ${y.path}`)),y._injector??C}(C,A),function Qn(y,C,m,A){const x=C.canMatch;if(!x||0===x.length)return(0,oe.of)(!0);const N=x.map(H=>{const ie=br(H,y);return rt(function bc(y){return y&&Hs(y.canMatch)}(ie)?ie.canMatch(C,m):y.runInContext(()=>ie(C,m)))});return(0,oe.of)(N).pipe(hs(),No())}(A,C,m).pipe((0,ht.U)(H=>!0===H?N:{...fs}))):(0,oe.of)(N)}function Xr(y,C,m){if(""===C.path)return"full"===C.pathMatch&&(y.hasChildren()||m.length>0)?{...fs}:{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const x=(C.matcher||Wn)(m,y,C);if(!x)return{...fs};const N={};Object.entries(x.posParams??{}).forEach(([ie,Z])=>{N[ie]=Z.path});const H=x.consumed.length>0?{...N,...x.consumed[x.consumed.length-1].parameters}:N;return{matched:!0,consumedSegments:x.consumed,remainingSegments:m.slice(x.consumed.length),parameters:H,positionalParamSegments:x.posParams??{}}}function ho(y,C,m,A){return m.length>0&&function xn(y,C,m){return m.some(A=>Vi(y,C,A)&&ni(A)!==tt)}(y,m,A)?{segmentGroup:new Wt(C,ba(A,new Wt(m,y.children))),slicedSegments:[]}:0===m.length&&function $s(y,C,m){return m.some(A=>Vi(y,C,A))}(y,m,A)?{segmentGroup:new Wt(y.segments,ya(y,0,m,A,y.children)),slicedSegments:m}:{segmentGroup:new Wt(y.segments,y.children),slicedSegments:m}}function ya(y,C,m,A,x){const N={};for(const H of A)if(Vi(y,m,H)&&!x[ni(H)]){const ie=new Wt([],{});N[ni(H)]=ie}return{...x,...N}}function ba(y,C){const m={};m[tt]=C;for(const A of y)if(""===A.path&&ni(A)!==tt){const x=new Wt([],{});m[ni(A)]=x}return m}function Vi(y,C,m){return(!(y.hasChildren()||C.length>0)||"full"!==m.pathMatch)&&""===m.path}class Cc{constructor(C,m,A,x,N,H,ie){this.injector=C,this.configLoader=m,this.rootComponentType=A,this.config=x,this.urlTree=N,this.paramsInheritanceStrategy=H,this.urlSerializer=ie,this.allowRedirects=!0,this.applyRedirects=new Fo(this.urlSerializer,this.urlTree)}noMatchError(C){return new M.vHH(4002,!1)}recognize(){const C=ho(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,tt).pipe(Mt(m=>{if(m instanceof xi)return this.allowRedirects=!1,this.urlTree=m.urlTree,this.match(m.urlTree);throw m instanceof Kr?this.noMatchError(m):m}),(0,ht.U)(m=>{const A=new Ke([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tt,this.rootComponentType,null,{}),x=new li(A,m),N=new Dt("",x),H=function oa(y,C,m=null,A=null){return os(ki(y),C,m,A)}(A,[],this.urlTree.queryParams,this.urlTree.fragment);return H.queryParams=this.urlTree.queryParams,N.url=this.urlSerializer.serialize(H),this.inheritParamsAndData(N._root),{state:N,tree:H}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C.root,tt).pipe(Mt(A=>{throw A instanceof Kr?this.noMatchError(A):A}))}inheritParamsAndData(C){const m=C.value,A=el(m,this.paramsInheritanceStrategy);m.params=Object.freeze(A.params),m.data=Object.freeze(A.data),C.children.forEach(x=>this.inheritParamsAndData(x))}processSegmentGroup(C,m,A,x){return 0===A.segments.length&&A.hasChildren()?this.processChildren(C,m,A):this.processSegment(C,m,A,A.segments,x,!0)}processChildren(C,m,A){const x=[];for(const N of Object.keys(A.children))"primary"===N?x.unshift(N):x.push(N);return(0,Q.D)(x).pipe(Le(N=>{const H=A.children[N],ie=function Fs(y,C){const m=y.filter(A=>ni(A)===C);return m.push(...y.filter(A=>ni(A)!==C)),m}(m,N);return this.processSegmentGroup(C,ie,H,N)}),function yt(y,C){return(0,si.e)(function qn(y,C,m,A,x){return(N,H)=>{let ie=m,Z=C,Xe=0;N.subscribe((0,q.x)(H,_t=>{const Qt=Xe++;Z=ie?y(Z,_t,Qt):(ie=!0,_t),A&&H.next(Z)},x&&(()=>{ie&&H.next(Z),H.complete()})))}}(y,C,arguments.length>=2,!0))}((N,H)=>(N.push(...H),N)),X(null),function at(y,C){const m=arguments.length>=2;return A=>A.pipe(y?(0,pi.h)((x,N)=>y(x,N,A)):Re.y,$t(1),m?X(C):le(()=>new vt))}(),(0,on.z)(N=>{if(null===N)return qr(A);const H=Ws(N);return function il(y){y.sort((C,m)=>C.value.outlet===tt?-1:m.value.outlet===tt?1:C.value.outlet.localeCompare(m.value.outlet))}(H),(0,oe.of)(H)}))}processSegment(C,m,A,x,N,H){return(0,Q.D)(m).pipe(Le(ie=>this.processSegmentAgainstRoute(ie._injector??C,m,ie,A,x,N,H).pipe(Mt(Z=>{if(Z instanceof Kr)return(0,oe.of)(null);throw Z}))),pe(ie=>!!ie),Mt(ie=>{if(uo(ie))return function Ac(y,C,m){return 0===C.length&&!y.children[m]}(A,x,N)?(0,oe.of)([]):qr(A);throw ie}))}processSegmentAgainstRoute(C,m,A,x,N,H,ie){return function Bo(y,C,m,A){return!!(ni(y)===A||A!==tt&&Vi(C,m,y))&&("**"===y.path||Xr(C,y,m).matched)}(A,x,N,H)?void 0===A.redirectTo?this.matchSegmentAgainstRoute(C,x,A,N,H,ie):ie&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,x,m,A,N,H):qr(x):qr(x)}expandSegmentAgainstRouteUsingRedirect(C,m,A,x,N,H){return"**"===x.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,A,x,H):this.expandRegularSegmentAgainstRouteUsingRedirect(C,m,A,x,N,H)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,m,A,x){const N=this.applyRedirects.applyRedirectCommands([],A.redirectTo,{});return A.redirectTo.startsWith("/")?ko(N):this.applyRedirects.lineralizeSegments(A,N).pipe((0,on.z)(H=>{const ie=new Wt(H,{});return this.processSegment(C,m,ie,H,x,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,m,A,x,N,H){const{matched:ie,consumedSegments:Z,remainingSegments:Xe,positionalParamSegments:_t}=Xr(m,x,N);if(!ie)return qr(m);const Qt=this.applyRedirects.applyRedirectCommands(Z,x.redirectTo,_t);return x.redirectTo.startsWith("/")?ko(Qt):this.applyRedirects.lineralizeSegments(x,Qt).pipe((0,on.z)(Ut=>this.processSegment(C,A,m,Ut.concat(Xe),H,!1)))}matchSegmentAgainstRoute(C,m,A,x,N,H){let ie;if("**"===A.path){const Z=x.length>0?Ne(x).parameters:{},Xe=new Ke(x,Z,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R(A),ni(A),A.component??A._loadedComponent??null,A,S(A));ie=(0,oe.of)({snapshot:Xe,consumedSegments:[],remainingSegments:[]}),m.children={}}else ie=Us(m,A,x,C).pipe((0,ht.U)(({matched:Z,consumedSegments:Xe,remainingSegments:_t,parameters:Qt})=>Z?{snapshot:new Ke(Xe,Qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R(A),ni(A),A.component??A._loadedComponent??null,A,S(A)),consumedSegments:Xe,remainingSegments:_t}:null));return ie.pipe((0,et.w)(Z=>null===Z?qr(m):this.getChildConfig(C=A._injector??C,A,x).pipe((0,et.w)(({routes:Xe})=>{const _t=A._loadedInjector??C,{snapshot:Qt,consumedSegments:Ut,remainingSegments:yi}=Z,{segmentGroup:qs,slicedSegments:mo}=ho(m,Ut,yi,Xe);if(0===mo.length&&qs.hasChildren())return this.processChildren(_t,Xe,qs).pipe((0,ht.U)(di=>null===di?null:[new li(Qt,di)]));if(0===Xe.length&&0===mo.length)return(0,oe.of)([new li(Qt,[])]);const Un=ni(A)===N;return this.processSegment(_t,Xe,qs,mo,Un?tt:N,!0).pipe((0,ht.U)(di=>[new li(Qt,di)]))}))))}getChildConfig(C,m,A){return m.children?(0,oe.of)({routes:m.children,injector:C}):m.loadChildren?void 0!==m._loadedRoutes?(0,oe.of)({routes:m._loadedRoutes,injector:m._loadedInjector}):function nl(y,C,m,A){const x=C.canLoad;if(void 0===x||0===x.length)return(0,oe.of)(!0);const N=x.map(H=>{const ie=br(H,y);return rt(function mc(y){return y&&Hs(y.canLoad)}(ie)?ie.canLoad(C,m):y.runInContext(()=>ie(C,m)))});return(0,oe.of)(N).pipe(hs(),No())}(C,m,A).pipe((0,on.z)(x=>x?this.configLoader.loadChildren(C,m).pipe((0,De.b)(N=>{m._loadedRoutes=N.routes,m._loadedInjector=N.injector})):function va(y){return(0,_e._)(zr(!1,3))}())):(0,oe.of)({routes:[],injector:C})}}function ps(y){const C=y.value.routeConfig;return C&&""===C.path}function Ws(y){const C=[],m=new Set;for(const A of y){if(!ps(A)){C.push(A);continue}const x=C.find(N=>A.value.routeConfig===N.value.routeConfig);void 0!==x?(x.children.push(...A.children),m.add(x)):C.push(A)}for(const A of m){const x=Ws(A.children);C.push(new li(A.value,x))}return C.filter(A=>!m.has(A))}function R(y){return y.data||{}}function S(y){return y.resolve||{}}function Zt(y){return"string"==typeof y.title||null===y.title}function kt(y){return(0,et.w)(C=>{const m=y(C);return m?(0,Q.D)(m).pipe((0,ht.U)(()=>C)):(0,oe.of)(C)})}const It=new M.OlP("ROUTES");let mn=(()=>{class y{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,M.f3M)(M.Sil)}loadComponent(m){if(this.componentLoaders.get(m))return this.componentLoaders.get(m);if(m._loadedComponent)return(0,oe.of)(m._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(m);const A=rt(m.loadComponent()).pipe((0,ht.U)(or),(0,De.b)(N=>{this.onLoadEndListener&&this.onLoadEndListener(m),m._loadedComponent=N}),bt(()=>{this.componentLoaders.delete(m)})),x=new Ye.c(A,()=>new ge.x).pipe((0,it.x)());return this.componentLoaders.set(m,x),x}loadChildren(m,A){if(this.childrenLoaders.get(A))return this.childrenLoaders.get(A);if(A._loadedRoutes)return(0,oe.of)({routes:A._loadedRoutes,injector:A._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(A);const N=function an(y,C,m,A){return rt(y.loadChildren()).pipe((0,ht.U)(or),(0,on.z)(x=>x instanceof M.YKP||Array.isArray(x)?(0,oe.of)(x):(0,Q.D)(C.compileModuleAsync(x))),(0,ht.U)(x=>{A&&A(y);let N,H,ie=!1;return Array.isArray(x)?(H=x,!0):(N=x.create(m).injector,H=N.get(It,[],{optional:!0,self:!0}).flat()),{routes:H.map(Wr),injector:N}}))}(A,this.compiler,m,this.onLoadEndListener).pipe(bt(()=>{this.childrenLoaders.delete(A)})),H=new Ye.c(N,()=>new ge.x).pipe((0,it.x)());return this.childrenLoaders.set(A,H),H}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();function or(y){return function Tn(y){return y&&"object"==typeof y&&"default"in y}(y)?y.default:y}let Ui=(()=>{class y{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ge.x,this.transitionAbortSubject=new ge.x,this.configLoader=(0,M.f3M)(mn),this.environmentInjector=(0,M.f3M)(M.lqb),this.urlSerializer=(0,M.f3M)($i),this.rootContexts=(0,M.f3M)(pr),this.inputBindingEnabled=null!==(0,M.f3M)(Ki,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,oe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=x=>this.events.next(new fr(x)),this.configLoader.onLoadStartListener=x=>this.events.next(new ao(x))}complete(){this.transitions?.complete()}handleNavigationRequest(m){const A=++this.navigationId;this.transitions?.next({...this.transitions.value,...m,id:A})}setupNavigations(m,A,x){return this.transitions=new ce.X({id:0,currentUrlTree:A,currentRawUrl:A,currentBrowserUrl:A,extractedUrl:m.urlHandlingStrategy.extract(A),urlAfterRedirects:m.urlHandlingStrategy.extract(A),rawUrl:A,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mt,restoredState:null,currentSnapshot:x.snapshot,targetSnapshot:null,currentRouterState:x,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,pi.h)(N=>0!==N.id),(0,ht.U)(N=>({...N,extractedUrl:m.urlHandlingStrategy.extract(N.rawUrl)})),(0,et.w)(N=>{this.currentTransition=N;let H=!1,ie=!1;return(0,oe.of)(N).pipe((0,De.b)(Z=>{this.currentNavigation={id:Z.id,initialUrl:Z.rawUrl,extractedUrl:Z.extractedUrl,trigger:Z.source,extras:Z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,et.w)(Z=>{const Xe=Z.currentBrowserUrl.toString(),_t=!m.navigated||Z.extractedUrl.toString()!==Xe||Xe!==Z.currentUrlTree.toString();if(!_t&&"reload"!==(Z.extras.onSameUrlNavigation??m.onSameUrlNavigation)){const Ut="";return this.events.next(new $r(Z.id,this.urlSerializer.serialize(Z.rawUrl),Ut,0)),Z.resolve(null),ct.E}if(m.urlHandlingStrategy.shouldProcessUrl(Z.rawUrl))return(0,oe.of)(Z).pipe((0,et.w)(Ut=>{const yi=this.transitions?.getValue();return this.events.next(new as(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),Ut.source,Ut.restoredState)),yi!==this.transitions?.getValue()?ct.E:Promise.resolve(Ut)}),function P(y,C,m,A,x,N){return(0,on.z)(H=>function zs(y,C,m,A,x,N,H="emptyOnly"){return new Cc(y,C,m,A,x,H,N).recognize()}(y,C,m,A,H.extractedUrl,x,N).pipe((0,ht.U)(({state:ie,tree:Z})=>({...H,targetSnapshot:ie,urlAfterRedirects:Z}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,m.config,this.urlSerializer,m.paramsInheritanceStrategy),(0,De.b)(Ut=>{N.targetSnapshot=Ut.targetSnapshot,N.urlAfterRedirects=Ut.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Ut.urlAfterRedirects};const yi=new Ls(Ut.id,this.urlSerializer.serialize(Ut.extractedUrl),this.urlSerializer.serialize(Ut.urlAfterRedirects),Ut.targetSnapshot);this.events.next(yi)}));if(_t&&m.urlHandlingStrategy.shouldProcessUrl(Z.currentRawUrl)){const{id:Ut,extractedUrl:yi,source:qs,restoredState:mo,extras:Un}=Z,di=new as(Ut,this.urlSerializer.serialize(yi),qs,mo);this.events.next(di);const xt=ks(0,this.rootComponentType).snapshot;return this.currentTransition=N={...Z,targetSnapshot:xt,urlAfterRedirects:yi,extras:{...Un,skipLocationChange:!1,replaceUrl:!1}},(0,oe.of)(N)}{const Ut="";return this.events.next(new $r(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Ut,1)),Z.resolve(null),ct.E}}),(0,De.b)(Z=>{const Xe=new Io(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects),Z.targetSnapshot);this.events.next(Xe)}),(0,ht.U)(Z=>(this.currentTransition=N={...Z,guards:ds(Z.targetSnapshot,Z.currentSnapshot,this.rootContexts)},N)),function Lo(y,C){return(0,on.z)(m=>{const{targetSnapshot:A,currentSnapshot:x,guards:{canActivateChecks:N,canDeactivateChecks:H}}=m;return 0===H.length&&0===N.length?(0,oe.of)({...m,guardsResult:!0}):function Yr(y,C,m,A){return(0,Q.D)(y).pipe((0,on.z)(x=>function Hi(y,C,m,A,x){const N=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!N||0===N.length)return(0,oe.of)(!0);const H=N.map(ie=>{const Z=An(C)??x,Xe=br(ie,Z);return rt(function tl(y){return y&&Hs(y.canDeactivate)}(Xe)?Xe.canDeactivate(y,C,m,A):Z.runInContext(()=>Xe(y,C,m,A))).pipe(pe())});return(0,oe.of)(H).pipe(hs())}(x.component,x.route,m,C,A)),pe(x=>!0!==x,!0))}(H,A,x,y).pipe((0,on.z)(ie=>ie&&function gc(y){return"boolean"==typeof y}(ie)?function pa(y,C,m,A){return(0,Q.D)(C).pipe(Le(x=>(0,qt.z)(function ci(y,C){return null!==y&&C&&C(new xo(y)),(0,oe.of)(!0)}(x.route.parent,A),function wc(y,C){return null!==y&&C&&C(new ua(y)),(0,oe.of)(!0)}(x.route,A),function Vn(y,C,m){const A=C[C.length-1],N=C.slice(0,C.length-1).reverse().map(H=>function Ii(y){const C=y.routeConfig?y.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:y,guards:C}:null}(H)).filter(H=>null!==H).map(H=>(0,Ge.P)(()=>{const ie=H.guards.map(Z=>{const Xe=An(H.node)??m,_t=br(Z,Xe);return rt(function yc(y){return y&&Hs(y.canActivateChild)}(_t)?_t.canActivateChild(A,y):Xe.runInContext(()=>_t(A,y))).pipe(pe())});return(0,oe.of)(ie).pipe(hs())}));return(0,oe.of)(N).pipe(hs())}(y,x.path,m),function ga(y,C,m){const A=C.routeConfig?C.routeConfig.canActivate:null;if(!A||0===A.length)return(0,oe.of)(!0);const x=A.map(N=>(0,Ge.P)(()=>{const H=An(C)??m,ie=br(N,H);return rt(function vc(y){return y&&Hs(y.canActivate)}(ie)?ie.canActivate(C,y):H.runInContext(()=>ie(C,y))).pipe(pe())}));return(0,oe.of)(x).pipe(hs())}(y,x.route,m))),pe(x=>!0!==x,!0))}(A,N,y,C):(0,oe.of)(ie)),(0,ht.U)(ie=>({...m,guardsResult:ie})))})}(this.environmentInjector,Z=>this.events.next(Z)),(0,De.b)(Z=>{if(N.guardsResult=Z.guardsResult,Sn(Z.guardsResult))throw mr(0,Z.guardsResult);const Xe=new la(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects),Z.targetSnapshot,!!Z.guardsResult);this.events.next(Xe)}),(0,pi.h)(Z=>!!Z.guardsResult||(this.cancelNavigationTransition(Z,"",3),!1)),kt(Z=>{if(Z.guards.canActivateChecks.length)return(0,oe.of)(Z).pipe((0,De.b)(Xe=>{const _t=new ca(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(_t)}),(0,et.w)(Xe=>{let _t=!1;return(0,oe.of)(Xe).pipe(function V(y,C){return(0,on.z)(m=>{const{targetSnapshot:A,guards:{canActivateChecks:x}}=m;if(!x.length)return(0,oe.of)(m);let N=0;return(0,Q.D)(x).pipe(Le(H=>function te(y,C,m,A){const x=y.routeConfig,N=y._resolve;return void 0!==x?.title&&!Zt(x)&&(N[Li]=x.title),function Se(y,C,m,A){const x=function We(y){return[...Object.keys(y),...Object.getOwnPropertySymbols(y)]}(y);if(0===x.length)return(0,oe.of)({});const N={};return(0,Q.D)(x).pipe((0,on.z)(H=>function Xt(y,C,m,A){const x=An(C)??A,N=br(y,x);return rt(N.resolve?N.resolve(C,m):x.runInContext(()=>N(C,m)))}(y[H],C,m,A).pipe(pe(),(0,De.b)(ie=>{N[H]=ie}))),$t(1),(0,wt.h)(N),Mt(H=>uo(H)?ct.E:(0,_e._)(H)))}(N,y,C,A).pipe((0,ht.U)(H=>(y._resolvedData=H,y.data=el(y,m).resolve,x&&Zt(x)&&(y.data[Li]=x.title),null)))}(H.route,A,y,C)),(0,De.b)(()=>N++),$t(1),(0,on.z)(H=>N===x.length?(0,oe.of)(m):ct.E))})}(m.paramsInheritanceStrategy,this.environmentInjector),(0,De.b)({next:()=>_t=!0,complete:()=>{_t||this.cancelNavigationTransition(Xe,"",2)}}))}),(0,De.b)(Xe=>{const _t=new Ns(Xe.id,this.urlSerializer.serialize(Xe.extractedUrl),this.urlSerializer.serialize(Xe.urlAfterRedirects),Xe.targetSnapshot);this.events.next(_t)}))}),kt(Z=>{const Xe=_t=>{const Qt=[];_t.routeConfig?.loadComponent&&!_t.routeConfig._loadedComponent&&Qt.push(this.configLoader.loadComponent(_t.routeConfig).pipe((0,De.b)(Ut=>{_t.component=Ut}),(0,ht.U)(()=>{})));for(const Ut of _t.children)Qt.push(...Xe(Ut));return Qt};return fe(Xe(Z.targetSnapshot.root)).pipe(X(),(0,ot.q)(1))}),kt(()=>this.afterPreactivation()),(0,ht.U)(Z=>{const Xe=function At(y,C,m){const A=qi(y,C._root,m?m._root:void 0);return new co(A,C)}(m.routeReuseStrategy,Z.targetSnapshot,Z.currentRouterState);return this.currentTransition=N={...Z,targetRouterState:Xe},N}),(0,De.b)(()=>{this.events.next(new Rn)}),((y,C,m,A)=>(0,ht.U)(x=>(new Yn(C,x.targetRouterState,x.currentRouterState,m,A).activate(y),x)))(this.rootContexts,m.routeReuseStrategy,Z=>this.events.next(Z),this.inputBindingEnabled),(0,ot.q)(1),(0,De.b)({next:Z=>{H=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mn(Z.id,this.urlSerializer.serialize(Z.extractedUrl),this.urlSerializer.serialize(Z.urlAfterRedirects))),m.titleStrategy?.updateTitle(Z.targetRouterState.snapshot),Z.resolve(!0)},complete:()=>{H=!0}}),(0,ln.R)(this.transitionAbortSubject.pipe((0,De.b)(Z=>{throw Z}))),bt(()=>{H||ie||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),Mt(Z=>{if(ie=!0,Nr(Z))this.events.next(new hn(N.id,this.urlSerializer.serialize(N.extractedUrl),Z.message,Z.cancellationCode)),function Xi(y){return Nr(y)&&Sn(y.url)}(Z)?this.events.next(new ls(Z.url)):N.resolve(!1);else{this.events.next(new Gn(N.id,this.urlSerializer.serialize(N.extractedUrl),Z,N.targetSnapshot??void 0));try{N.resolve(m.errorHandler(Z))}catch(Xe){N.reject(Xe)}}return ct.E}))}))}cancelNavigationTransition(m,A,x){const N=new hn(m.id,this.urlSerializer.serialize(m.extractedUrl),A,x);this.events.next(N),m.resolve(!1)}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();function ar(y){return y!==mt}let ui=(()=>{class y{buildTitle(m){let A,x=m.root;for(;void 0!==x;)A=this.getResolvedTitleForRoute(x)??A,x=x.children.find(N=>N.outlet===tt);return A}getResolvedTitleForRoute(m){return m.data[Li]}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(lr)},providedIn:"root"})}return y})(),lr=(()=>{class y extends ui{constructor(m){super(),this.title=m}updateTitle(m){const A=this.buildTitle(m);void 0!==A&&this.title.setTitle(A)}static#e=this.\u0275fac=function(A){return new(A||y)(M.LFG(Nn.Dx))};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),kr=(()=>{class y{static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(rl)},providedIn:"root"})}return y})();class Zr{shouldDetach(C){return!1}store(C,m){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,m){return C.routeConfig===m.routeConfig}}let rl=(()=>{class y extends Zr{static#e=this.\u0275fac=function(){let m;return function(x){return(m||(m=M.n5z(y)))(x||y)}}();static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Gs=new M.OlP("",{providedIn:"root",factory:()=>({})});let Dc=(()=>{class y{static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:function(){return(0,M.f3M)(_a)},providedIn:"root"})}return y})(),_a=(()=>{class y{shouldProcessUrl(m){return!0}extract(m){return m}merge(m,A){return m}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();var Ys=function(y){return y[y.COMPLETE=0]="COMPLETE",y[y.FAILED=1]="FAILED",y[y.REDIRECTING=2]="REDIRECTING",y}(Ys||{});function cr(y,C){y.events.pipe((0,pi.h)(m=>m instanceof Mn||m instanceof hn||m instanceof Gn||m instanceof $r),(0,ht.U)(m=>m instanceof Mn||m instanceof $r?Ys.COMPLETE:m instanceof hn&&(0===m.code||1===m.code)?Ys.REDIRECTING:Ys.FAILED),(0,pi.h)(m=>m!==Ys.REDIRECTING),(0,ot.q)(1)).subscribe(()=>{C()})}function sl(y){throw y}function ol(y,C,m){return C.parse("/")}const dn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class y{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,M.f3M)(M.c2e),this.isNgZoneEnabled=!1,this._events=new ge.x,this.options=(0,M.f3M)(Gs,{optional:!0})||{},this.pendingTasks=(0,M.f3M)(M.HDt),this.errorHandler=this.options.errorHandler||sl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ol,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,M.f3M)(Dc),this.routeReuseStrategy=(0,M.f3M)(kr),this.titleStrategy=(0,M.f3M)(ui),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,M.f3M)(It,{optional:!0})?.flat()??[],this.navigationTransitions=(0,M.f3M)(Ui),this.urlSerializer=(0,M.f3M)($i),this.location=(0,M.f3M)(we.Ye),this.componentInputBindingEnabled=!!(0,M.f3M)(Ki,{optional:!0}),this.eventsSubscription=new Ue.w0,this.isNgZoneEnabled=(0,M.f3M)(M.R0b)instanceof M.R0b&&M.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ks(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(m=>{this.lastSuccessfulId=m.id,this.currentPageId=this.browserPageId},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const m=this.navigationTransitions.events.subscribe(A=>{try{const{currentTransition:x}=this.navigationTransitions;if(null===x)return void(fo(A)&&this._events.next(A));if(A instanceof as)ar(x.source)&&(this.browserUrlTree=x.extractedUrl);else if(A instanceof $r)this.rawUrlTree=x.rawUrl;else if(A instanceof Ls){if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(N,x)}this.browserUrlTree=x.urlAfterRedirects}}else if(A instanceof Rn)this.currentUrlTree=x.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl),this.routerState=x.targetRouterState,"deferred"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,x),this.browserUrlTree=x.urlAfterRedirects);else if(A instanceof hn)0!==A.code&&1!==A.code&&(this.navigated=!0),(3===A.code||2===A.code)&&this.restoreHistory(x);else if(A instanceof ls){const N=this.urlHandlingStrategy.merge(A.url,x.currentRawUrl),H={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ar(x.source)};this.scheduleNavigation(N,mt,null,H,{resolve:x.resolve,reject:x.reject,promise:x.promise})}A instanceof Gn&&this.restoreHistory(x,!0),A instanceof Mn&&(this.navigated=!0),fo(A)&&this._events.next(A)}catch(x){this.navigationTransitions.transitionAbortSubject.next(x)}});this.eventsSubscription.add(m)}resetRootComponentType(m){this.routerState.root.component=m,this.navigationTransitions.rootComponentType=m}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const m=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),mt,m)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const A="popstate"===m.type?"popstate":"hashchange";"popstate"===A&&setTimeout(()=>{this.navigateToSyncWithBrowser(m.url,A,m.state)},0)}))}navigateToSyncWithBrowser(m,A,x){const N={replaceUrl:!0},H=x?.navigationId?x:null;if(x){const Z={...x};delete Z.navigationId,delete Z.\u0275routerPageId,0!==Object.keys(Z).length&&(N.state=Z)}const ie=this.parseUrl(m);this.scheduleNavigation(ie,A,H,N)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(m){this.config=m.map(Wr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(m,A={}){const{relativeTo:x,queryParams:N,fragment:H,queryParamsHandling:ie,preserveFragment:Z}=A,Xe=Z?this.currentUrlTree.fragment:H;let Qt,_t=null;switch(ie){case"merge":_t={...this.currentUrlTree.queryParams,...N};break;case"preserve":_t=this.currentUrlTree.queryParams;break;default:_t=N||null}null!==_t&&(_t=this.removeEmptyProps(_t));try{Qt=ki(x?x.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof m[0]||!m[0].startsWith("/"))&&(m=[]),Qt=this.currentUrlTree.root}return os(Qt,m,_t,Xe??null)}navigateByUrl(m,A={skipLocationChange:!1}){const x=Sn(m)?m:this.parseUrl(m),N=this.urlHandlingStrategy.merge(x,this.rawUrlTree);return this.scheduleNavigation(N,mt,null,A)}navigate(m,A={skipLocationChange:!1}){return function Ti(y){for(let C=0;C<y.length;C++)if(null==y[C])throw new M.vHH(4008,!1)}(m),this.navigateByUrl(this.createUrlTree(m,A),A)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let A;try{A=this.urlSerializer.parse(m)}catch(x){A=this.malformedUriErrorHandler(x,this.urlSerializer,m)}return A}isActive(m,A){let x;if(x=!0===A?{...dn}:!1===A?{...jo}:A,Sn(m))return Be(this.currentUrlTree,m,x);const N=this.parseUrl(m);return Be(this.currentUrlTree,N,x)}removeEmptyProps(m){return Object.keys(m).reduce((A,x)=>{const N=m[x];return null!=N&&(A[x]=N),A},{})}scheduleNavigation(m,A,x,N,H){if(this.disposed)return Promise.resolve(!1);let ie,Z,Xe;H?(ie=H.resolve,Z=H.reject,Xe=H.promise):Xe=new Promise((Qt,Ut)=>{ie=Qt,Z=Ut});const _t=this.pendingTasks.add();return cr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_t))}),this.navigationTransitions.handleNavigationRequest({source:A,restoredState:x,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:m,extras:N,resolve:ie,reject:Z,promise:Xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Xe.catch(Qt=>Promise.reject(Qt))}setBrowserUrl(m,A){const x=this.urlSerializer.serialize(m);if(this.location.isCurrentPathEqualTo(x)||A.extras.replaceUrl){const H={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId)};this.location.replaceState(x,"",H)}else{const N={...A.extras.state,...this.generateNgRouterState(A.id,this.browserPageId+1)};this.location.go(x,"",N)}}restoreHistory(m,A=!1){if("computed"===this.canceledNavigationResolution){const N=this.currentPageId-this.browserPageId;0!==N?this.location.historyGo(N):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===N&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(A&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(m,A){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:A}:{navigationId:m}}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();function fo(y){return!(y instanceof Rn||y instanceof ls)}class al{}let ms=(()=>{class y{preload(m,A){return A().pipe(Mt(()=>(0,oe.of)(null)))}static#e=this.\u0275fac=function(A){return new(A||y)};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),ii=(()=>{class y{constructor(m,A,x,N,H){this.router=m,this.injector=x,this.preloadingStrategy=N,this.loader=H}setUpPreloading(){this.subscription=this.router.events.pipe((0,pi.h)(m=>m instanceof Mn),Le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,A){const x=[];for(const N of A){N.providers&&!N._injector&&(N._injector=(0,M.MMx)(N.providers,m,`Route: ${N.path}`));const H=N._injector??m,ie=N._loadedInjector??H;(N.loadChildren&&!N._loadedRoutes&&void 0===N.canLoad||N.loadComponent&&!N._loadedComponent)&&x.push(this.preloadConfig(H,N)),(N.children||N._loadedRoutes)&&x.push(this.processRoutes(ie,N.children??N._loadedRoutes))}return(0,Q.D)(x).pipe((0,pt.J)())}preloadConfig(m,A){return this.preloadingStrategy.preload(A,()=>{let x;x=A.loadChildren&&void 0===A.canLoad?this.loader.loadChildren(m,A):(0,oe.of)(null);const N=x.pipe((0,on.z)(H=>null===H?(0,oe.of)(void 0):(A._loadedRoutes=H.routes,A._loadedInjector=H.injector,this.processRoutes(H.injector??m,H.routes))));if(A.loadComponent&&!A._loadedComponent){const H=this.loader.loadComponent(A);return(0,Q.D)([N,H]).pipe((0,pt.J)())}return N})}static#e=this.\u0275fac=function(A){return new(A||y)(M.LFG(mi),M.LFG(M.Sil),M.LFG(M.lqb),M.LFG(al),M.LFG(mn))};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Cn=new M.OlP("");let Jn=(()=>{class y{constructor(m,A,x,N,H={}){this.urlSerializer=m,this.transitions=A,this.viewportScroller=x,this.zone=N,this.options=H,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},H.scrollPositionRestoration=H.scrollPositionRestoration||"disabled",H.anchorScrolling=H.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof as?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof Mn?(this.lastId=m.id,this.scheduleScrollEvent(m,this.urlSerializer.parse(m.urlAfterRedirects).fragment)):m instanceof $r&&0===m.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(m,this.urlSerializer.parse(m.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof Po&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,A){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Po(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,A))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(A){M.$Z()};static#t=this.\u0275prov=M.Yz7({token:y,factory:y.\u0275fac})}return y})();function vn(y,C){return{\u0275kind:y,\u0275providers:C}}function cl(){const y=(0,M.f3M)(M.zs3);return C=>{const m=y.get(M.z2F);if(C!==m.components[0])return;const A=y.get(mi),x=y.get(Aa);1===y.get(Ca)&&A.initialNavigation(),y.get(dl,null,M.XFs.Optional)?.setUpPreloading(),y.get(Cn,null,M.XFs.Optional)?.init(),A.resetRootComponentType(m.componentTypes[0]),x.closed||(x.next(),x.complete(),x.unsubscribe())}}const Aa=new M.OlP("",{factory:()=>new ge.x}),Ca=new M.OlP("",{providedIn:"root",factory:()=>1}),dl=new M.OlP("");function Mc(y){return vn(0,[{provide:dl,useExisting:ii},{provide:al,useExisting:y}])}const Da=new M.OlP("ROUTER_FORROOT_GUARD"),ri=[we.Ye,{provide:$i,useClass:xs},mi,pr,{provide:cs,useFactory:function wa(y){return y.routerState.root},deps:[mi]},mn,[]];function hl(){return new M.PXZ("Router",mi)}let po=(()=>{class y{constructor(m){}static forRoot(m,A){return{ngModule:y,providers:[ri,[],{provide:It,multi:!0,useValue:m},{provide:Da,useFactory:xc,deps:[[mi,new M.FiY,new M.tp0]]},{provide:Gs,useValue:A||{}},A?.useHash?{provide:we.S$,useClass:we.Do}:{provide:we.S$,useClass:we.b0},{provide:Cn,useFactory:()=>{const y=(0,M.f3M)(we.EM),C=(0,M.f3M)(M.R0b),m=(0,M.f3M)(Gs),A=(0,M.f3M)(Ui),x=(0,M.f3M)($i);return m.scrollOffset&&y.setOffset(m.scrollOffset),new Jn(x,A,y,C,m)}},A?.preloadingStrategy?Mc(A.preloadingStrategy).\u0275providers:[],{provide:M.PXZ,multi:!0,useFactory:hl},A?.initialNavigation?Fu(A):[],A?.bindToComponentInputs?vn(8,[gr,{provide:Ki,useExisting:gr}]).\u0275providers:[],[{provide:Ia,useFactory:cl},{provide:M.tb,multi:!0,useExisting:Ia}]]}}static forChild(m){return{ngModule:y,providers:[{provide:It,multi:!0,useValue:m}]}}static#e=this.\u0275fac=function(A){return new(A||y)(M.LFG(Da,8))};static#t=this.\u0275mod=M.oAB({type:y});static#n=this.\u0275inj=M.cJS({})}return y})();function xc(y){return"guarded"}function Fu(y){return["disabled"===y.initialNavigation?vn(3,[{provide:M.ip1,multi:!0,useFactory:()=>{const C=(0,M.f3M)(mi);return()=>{C.setUpLocationChangeListener()}}},{provide:Ca,useValue:2}]).\u0275providers:[],"enabledBlocking"===y.initialNavigation?vn(2,[{provide:Ca,useValue:0},{provide:M.ip1,multi:!0,deps:[M.zs3],useFactory:C=>{const m=C.get(we.V_,Promise.resolve());return()=>m.then(()=>new Promise(A=>{const x=C.get(mi),N=C.get(Aa);cr(x,()=>{A(!0)}),C.get(Ui).afterPreactivation=()=>(A(!0),N.closed?(0,oe.of)(void 0):N),x.initialNavigation()}))}}]).\u0275providers:[]]}const Ia=new M.OlP("")},8680:(dt,Ce,F)=>{F.d(Ce,{rQ:()=>Jg,xC:()=>lu});var M={};F.r(M),F.d(M,{AbortException:()=>Sc,AnnotationEditorLayer:()=>xh,AnnotationEditorParamsType:()=>cl,AnnotationEditorType:()=>Aa,AnnotationEditorUIManager:()=>Ca,AnnotationLayer:()=>ul,AnnotationMode:()=>Ks,CMapCompressionType:()=>Lu,ColorPicker:()=>dl,DOMSVGFactory:()=>Mc,DrawLayer:()=>Nu,FeatureTest:()=>ku,GlobalWorkerOptions:()=>Oe,ImageKind:()=>zt,InvalidPDFException:()=>Ic,MissingPDFException:()=>Da,OPS:()=>ri,PDFDataRangeTransport:()=>hl,PDFDateString:()=>po,PDFWorker:()=>_r,PasswordResponses:()=>Sa,PermissionFlag:()=>Ma,PixelsPerInch:()=>xc,RenderingCancelledException:()=>Fu,TextLayer:()=>Ia,UnexpectedResponseException:()=>vi,Util:()=>Qr,VerbosityLevel:()=>fl,XfaLayer:()=>go,build:()=>Jr,createValidAbsoluteUrl:()=>Bu,fetchData:()=>Tc,getDocument:()=>y,getFilenameFromUrl:()=>C,getPdfFilenameFromUrl:()=>m,getXfaPageViewport:()=>A,isDataScheme:()=>x,isPdfFile:()=>N,noContextMenu:()=>H,normalizeUnicode:()=>ie,setLayerDimensions:()=>Z,shadow:()=>Xe,version:()=>_t});var z={};F.r(z),F.d(z,{AnnotationLayerBuilder:()=>kd,DownloadManager:()=>Fd,EventBus:()=>Pf,FindState:()=>Rf,GenericL10n:()=>Bd,LinkTarget:()=>ea,PDFFindController:()=>jd,PDFHistory:()=>Qs,PDFLinkService:()=>ta,PDFPageView:()=>Of,PDFScriptingManager:()=>Xg,PDFSinglePageViewer:()=>Lf,PDFViewer:()=>Nf,ProgressBar:()=>Zg,RenderingStates:()=>Qg,ScrollMode:()=>Hd,SimpleLinkService:()=>kf,SpreadMode:()=>Ff,StructTreeLayerBuilder:()=>Bf,TextLayerBuilder:()=>jf,XfaLayerBuilder:()=>au,parseQueryString:()=>Ds});var se=F(4769),ee=F(2438),Q=F(8645),oe=F(7715),ce=F(9773),ke=F(4352),Re=F(9360),xe=F(8251),he=F(2181),q=F(5861),Te={d:(f,e)=>{for(var n in e)Te.o(e,n)&&!Te.o(f,n)&&Object.defineProperty(f,n,{enumerable:!0,get:e[n]})},o:(f,e)=>Object.prototype.hasOwnProperty.call(f,e)},fe=globalThis.pdfjsLib={};Te.d(fe,{AbortException:()=>gt,AnnotationEditorLayer:()=>wa,AnnotationEditorParamsType:()=>Ue,AnnotationEditorType:()=>ge,AnnotationEditorUIManager:()=>Rr,AnnotationLayer:()=>Ti,AnnotationMode:()=>ct,CMapCompressionType:()=>Le,ColorPicker:()=>ii,DOMSVGFactory:()=>Di,DrawLayer:()=>vn,FeatureTest:()=>lt,GlobalWorkerOptions:()=>ti,ImageKind:()=>et,InvalidPDFException:()=>Ni,MissingPDFException:()=>un,OPS:()=>De,PDFDataRangeTransport:()=>Xr,PDFDateString:()=>os,PDFWorker:()=>xn,PasswordResponses:()=>Et,PermissionFlag:()=>we,PixelsPerInch:()=>Qe,RenderingCancelledException:()=>Fn,TextLayer:()=>Vn,UnexpectedResponseException:()=>Wn,Util:()=>ze,VerbosityLevel:()=>pe,XfaLayer:()=>R,build:()=>il,createValidAbsoluteUrl:()=>ln,fetchData:()=>Gt,getDocument:()=>ma,getFilenameFromUrl:()=>Ts,getPdfFilenameFromUrl:()=>Ps,getXfaPageViewport:()=>Fi,isDataScheme:()=>ss,isPdfFile:()=>Yt,noContextMenu:()=>Sn,normalizeUnicode:()=>$i,setLayerDimensions:()=>Wi,shadow:()=>pt,version:()=>Cc});const st=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),qe=[1,0,0,1,0,0],Ct=[.001,0,0,.001,0,0],ct={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ge={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},we={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},et={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pe={ERRORS:0,WARNINGS:1,INFOS:5},Le={NONE:0,BINARY:1},De={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Et={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Mt=pe.WARNINGS;function yt(){return Mt}function $t(f){Mt>=pe.INFOS&&console.log(`Info: ${f}`)}function at(f){Mt>=pe.WARNINGS&&console.log(`Warning: ${f}`)}function wt(f){throw new Error(f)}function bt(f,e){f||wt(e)}function ln(f,e=null,n=null){if(!f)return null;try{if(n&&"string"==typeof f&&(n.addDefaultProtocol&&f.startsWith("www.")&&f.match(/\./g)?.length>=2&&(f=`http://${f}`),n.tryConvertEncoding))try{f=function jr(f){return decodeURIComponent(escape(f))}(f)}catch{}const s=e?new URL(f,e):new URL(f);if(function it(f){switch(f?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(s))return s}catch{}return null}function pt(f,e,n,s=!1){return Object.defineProperty(f,e,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}const Nn=function(){function e(n,s){this.message=n,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class tt extends Nn{constructor(e,n){super(e,"PasswordException"),this.code=n}}class Li extends Nn{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class Ni extends Nn{constructor(e){super(e,"InvalidPDFException")}}class un extends Nn{constructor(e){super(e,"MissingPDFException")}}class Wn extends Nn{constructor(e,n){super(e,"UnexpectedResponseException"),this.status=n}}class oi extends Nn{constructor(e){super(e,"FormatError")}}class gt extends Nn{constructor(e){super(e,"AbortException")}}function Tt(f){("object"!=typeof f||void 0===f?.length)&&wt("Invalid argument for bytesToString");const e=f.length,n=8192;if(e<n)return String.fromCharCode.apply(null,f);const s=[];for(let a=0;a<e;a+=n){const c=Math.min(a+n,e),u=f.subarray(a,c);s.push(String.fromCharCode.apply(null,u))}return s.join("")}function Ne(f){"string"!=typeof f&&wt("Invalid argument for stringToBytes");const e=f.length,n=new Uint8Array(e);for(let s=0;s<e;++s)n[s]=255&f.charCodeAt(s);return n}function Je(f){const e=Object.create(null);for(const[n,s]of f)e[n]=s;return e}class lt{static get isLittleEndian(){return pt(this,"isLittleEndian",function Be(){const f=new Uint8Array(4);return f[0]=1,1===new Uint32Array(f.buffer,0,1)[0]}())}static get isEvalSupported(){return pt(this,"isEvalSupported",function cn(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?pt(this,"platform",{isMac:navigator.platform.includes("Mac")}):pt(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return pt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const bn=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));class ze{static makeHexColor(e,n,s){return`#${bn[e]}${bn[n]}${bn[s]}`}static scaleMinMax(e,n){let s;e[0]?(e[0]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=e[3],n[3]*=e[3]):(s=n[0],n[0]=n[1],n[1]=s,s=n[2],n[2]=n[3],n[3]=s,e[1]<0&&(s=n[1],n[1]=n[3],n[3]=s),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(s=n[0],n[0]=n[2],n[2]=s),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static applyTransform(e,n){return[e[0]*n[0]+e[1]*n[2]+n[4],e[0]*n[1]+e[1]*n[3]+n[5]]}static applyInverseTransform(e,n){const s=n[0]*n[3]-n[1]*n[2];return[(e[0]*n[3]-e[1]*n[2]+n[2]*n[5]-n[4]*n[3])/s,(-e[0]*n[1]+e[1]*n[0]+n[4]*n[1]-n[5]*n[0])/s]}static getAxialAlignedBoundingBox(e,n){const s=this.applyTransform(e,n),a=this.applyTransform(e.slice(2,4),n),c=this.applyTransform([e[0],e[3]],n),u=this.applyTransform([e[2],e[1]],n);return[Math.min(s[0],a[0],c[0],u[0]),Math.min(s[1],a[1],c[1],u[1]),Math.max(s[0],a[0],c[0],u[0]),Math.max(s[1],a[1],c[1],u[1])]}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e){const n=[e[0],e[2],e[1],e[3]],s=e[0]*n[0]+e[1]*n[2],u=e[2]*n[1]+e[3]*n[3],h=(s+u)/2,g=Math.sqrt((s+u)**2-4*(s*u-(e[2]*n[0]+e[3]*n[2])*(e[0]*n[1]+e[1]*n[3])))/2,E=h-g||1;return[Math.sqrt(h+g||1),Math.sqrt(E)]}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const s=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(s>a)return null;const c=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return c>u?null:[s,c,a,u]}static#e(e,n,s,a,c,u,h,g,b,E){if(b<=0||b>=1)return;const D=1-b,T=b*b,O=T*b,k=D*(D*(D*e+3*b*n)+3*T*s)+O*a,j=D*(D*(D*c+3*b*u)+3*T*h)+O*g;E[0]=Math.min(E[0],k),E[1]=Math.min(E[1],j),E[2]=Math.max(E[2],k),E[3]=Math.max(E[3],j)}static#t(e,n,s,a,c,u,h,g,b,E,D,T){if(Math.abs(b)<1e-12)return void(Math.abs(E)>=1e-12&&this.#e(e,n,s,a,c,u,h,g,-D/E,T));const O=E**2-4*D*b;if(O<0)return;const k=Math.sqrt(O),j=2*b;this.#e(e,n,s,a,c,u,h,g,(-E+k)/j,T),this.#e(e,n,s,a,c,u,h,g,(-E-k)/j,T)}static bezierBoundingBox(e,n,s,a,c,u,h,g,b){return b?(b[0]=Math.min(b[0],e,h),b[1]=Math.min(b[1],n,g),b[2]=Math.max(b[2],e,h),b[3]=Math.max(b[3],n,g)):b=[Math.min(e,h),Math.min(n,g),Math.max(e,h),Math.max(n,g)],this.#t(e,s,c,h,n,a,u,g,3*(3*(s-c)-e+h),6*(e-2*s+c),3*(s-e),b),this.#t(e,s,c,h,n,a,u,g,3*(3*(a-u)-n+g),6*(n-2*a+u),3*(a-n),b),b}}let ai=null,xr=null;function $i(f){return ai||(ai=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xr=new Map([["\ufb05","\u017ft"]])),f.replaceAll(ai,(e,n,s)=>n?n.normalize("NFKC"):xr.get(s))}const Vr="pdfjs_internal_id_";class Ur{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,s,a,c){return"none"}destroy(e=!1){}}class Ae{#e=!1;constructor({enableHWA:e=!1}={}){this.#e=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,n);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,n,s){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){wt("Abstract method `_createCanvas` called.")}}class J{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}fetch({name:e}){var n=this;return(0,q.Z)(function*(){if(!n.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const s=n.baseUrl+e+(n.isCompressed?".bcmap":"");return n._fetchData(s,n.isCompressed?Le.BINARY:Le.NONE).catch(c=>{throw new Error(`Unable to load ${n.isCompressed?"binary ":""}CMap at: ${s}`)})})()}_fetchData(e,n){wt("Abstract method `_fetchData` called.")}}class ${constructor({baseUrl:e=null}){this.baseUrl=e}fetch({filename:e}){var n=this;return(0,q.Z)(function*(){if(!n.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const s=`${n.baseUrl}${e}`;return n._fetchData(s).catch(a=>{throw new Error(`Unable to load font data at: ${s}`)})})()}_fetchData(e){wt("Abstract method `_fetchData` called.")}}class Y{create(e,n,s=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${e}px`),a.setAttribute("height",`${n}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${n}`),a}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){wt("Abstract method `_createSVG` called.")}}const me="http://www.w3.org/2000/svg";class Qe{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Gt(f){return wn.apply(this,arguments)}function wn(){return(wn=(0,q.Z)(function*(f,e="text"){if(Pr(f,document.baseURI)){const n=yield fetch(f);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{const a=new XMLHttpRequest;a.open("GET",f,!0),a.responseType=e,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){switch(e){case"arraybuffer":case"blob":case"json":return void n(a.response)}return void n(a.responseText)}s(new Error(a.statusText))}},a.send(null)})})).apply(this,arguments)}class kn extends J{_fetchData(e,n){return Gt(e,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):Ne(s),compressionType:n}))}}class zi extends ${_fetchData(e){return Gt(e,"arraybuffer").then(n=>new Uint8Array(n))}}class Di extends Y{_createSVG(e){return document.createElementNS(me,e)}}class rs{constructor({viewBox:e,scale:n,rotation:s,offsetX:a=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=c;const h=(e[2]+e[0])/2,g=(e[3]+e[1])/2;let b,E,D,T,O,k,j,G;switch((s%=360)<0&&(s+=360),s){case 180:b=-1,E=0,D=0,T=1;break;case 90:b=0,E=1,D=1,T=0;break;case 270:b=0,E=-1,D=-1,T=0;break;case 0:b=1,E=0,D=0,T=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(D=-D,T=-T),0===b?(O=Math.abs(g-e[1])*n+a,k=Math.abs(h-e[0])*n+c,j=(e[3]-e[1])*n,G=(e[2]-e[0])*n):(O=Math.abs(h-e[0])*n+a,k=Math.abs(g-e[1])*n+c,j=(e[2]-e[0])*n,G=(e[3]-e[1])*n),this.transform=[b*n,E*n,D*n,T*n,O-b*n*h-D*n*g,k-E*n*h-T*n*g],this.width=j,this.height=G}get rawDims(){const{viewBox:e}=this;return pt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:c=!1}={}){return new rs({viewBox:this.viewBox.slice(),scale:e,rotation:n,offsetX:s,offsetY:a,dontFlip:c})}convertToViewportPoint(e,n){return ze.applyTransform([e,n],this.transform)}convertToViewportRectangle(e){const n=ze.applyTransform([e[0],e[1]],this.transform),s=ze.applyTransform([e[2],e[3]],this.transform);return[n[0],n[1],s[0],s[1]]}convertToPdfPoint(e,n){return ze.applyInverseTransform([e,n],this.transform)}}class Fn extends Nn{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function ss(f){const e=f.length;let n=0;for(;n<e&&""===f[n].trim();)n++;return"data:"===f.substring(n,n+5).toLowerCase()}function Yt(f){return"string"==typeof f&&/\.pdf$/i.test(f)}function Ts(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function Ps(f,e="document.pdf"){if("string"!=typeof f)return e;if(ss(f))return at('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(f);let c=s.exec(a[1])||s.exec(a[2])||s.exec(a[3]);if(c&&(c=c[0],c.includes("%")))try{c=s.exec(decodeURIComponent(c))[0]}catch{}return c||e}class Tr{started=Object.create(null);times=[];time(e){e in this.started&&at(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||at(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:s}of this.times)n=Math.max(s.length,n);for(const{name:s,start:a,end:c}of this.times)e.push(`${s.padEnd(n)} ${c-a}ms\n`);return e.join("")}}function Pr(f,e){try{const{protocol:n}=e?new URL(f,e):new URL(f);return"http:"===n||"https:"===n}catch{return!1}}function Sn(f){f.preventDefault()}let ki;class os{static toDateObject(e){if(!e||"string"!=typeof e)return null;ki||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=ki.exec(e);if(!n)return null;const s=parseInt(n[1],10);let a=parseInt(n[2],10);a=a>=1&&a<=12?a-1:0;let c=parseInt(n[3],10);c=c>=1&&c<=31?c:1;let u=parseInt(n[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(n[5],10);h=h>=0&&h<=59?h:0;let g=parseInt(n[6],10);g=g>=0&&g<=59?g:0;const b=n[7]||"Z";let E=parseInt(n[8],10);E=E>=0&&E<=23?E:0;let D=parseInt(n[9],10)||0;return D=D>=0&&D<=59?D:0,"-"===b?(u+=E,h+=D):"+"===b&&(u-=E,h-=D),new Date(Date.UTC(s,a,c,u,h,g))}}function Fi(f,{scale:e=1,rotation:n=0}){const{width:s,height:a}=f.attributes.style,c=[0,0,parseInt(s),parseInt(a)];return new rs({viewBox:c,scale:e,rotation:n})}function Bn(f){if(f.startsWith("#")){const e=parseInt(f.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(e=>parseInt(e)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(at(`Not a valid color format: "${f}"`),[0,0,0])}function nn(f){const{a:e,b:n,c:s,d:a,e:c,f:u}=f.getTransform();return[e,n,s,a,c,u]}function Si(f){const{a:e,b:n,c:s,d:a,e:c,f:u}=f.getTransform().invertSelf();return[e,n,s,a,c,u]}function Wi(f,e,n=!1,s=!0){if(e instanceof rs){const{pageWidth:a,pageHeight:c}=e.rawDims,{style:u}=f,h=lt.isCSSRoundSupported,g=`var(--scale-factor) * ${a}px`,b=`var(--scale-factor) * ${c}px`,E=h?`round(${g}, 1px)`:`calc(${g})`,D=h?`round(${b}, 1px)`:`calc(${b})`;n&&e.rotation%180!=0?(u.width=D,u.height=E):(u.width=E,u.height=D)}s&&f.setAttribute("data-main-rotation",e.rotation)}class tr{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,tr.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#n._uiManager._signal;e.addEventListener("contextmenu",Sn,{signal:n}),e.addEventListener("pointerdown",tr.#a,{signal:n});const s=this.#i=document.createElement("div");s.className="buttons",e.append(s);const a=this.#n.toolbarPosition;if(a){const{style:c}=e,u="ltr"===this.#n._uiManager.direction?1-a[0]:a[0];c.insetInlineEnd=100*u+"%",c.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),e}static#a(e){e.stopPropagation()}#l(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#d(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#c(e){const n=this.#n._uiManager._signal;e.addEventListener("focusin",this.#l.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",Sn,{signal:n})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#u(){const{editorType:e,_uiManager:n}=this.#n,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",tr.#s[e]),this.#c(s),s.addEventListener("click",a=>{n.delete()},{signal:n._signal}),this.#i.append(s)}get#o(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var n=this;return(0,q.Z)(function*(){const s=yield e.render();n.#c(s),n.#i.prepend(s,n.#o),n.#r=e})()}addColorPicker(e){this.#t=e;const n=e.renderButton();this.#c(n),this.#i.prepend(n,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Gi{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Sn,{signal:this.#n._signal});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#s(),e}#r(e,n){let s=0,a=0;for(const c of e){const u=c.y+c.height;if(u<s)continue;const h=c.x+(n?c.width:0);u>s?(a=h,s=u):n?h>a&&(a=h):h<a&&(a=h)}return[n?1-a:a,s]}show(e,n,s){const[a,c]=this.#r(n,s),{style:u}=this.#t||=this.#i();e.append(this.#t),u.insetInlineEnd=100*a+"%",u.top=`calc(${100*c}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#n._signal;e.addEventListener("contextmenu",Sn,{signal:s}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:s}),this.#e.append(e)}}function nr(f,e,n){for(const s of n)e.addEventListener(s,f[s].bind(f))}class Rs{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class ir{#e=function xs(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const f=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(f);else for(let e=0;e<32;e++)f[e]=Math.floor(255*Math.random());return Tt(f)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;return a.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pt(this,"_isSVGFittingCanvas",a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),0===new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0])))}#i(e,n){var s=this;return(0,q.Z)(function*(){s.#n||=new Map;let a=s.#n.get(e);if(null===a)return null;if(a?.bitmap)return a.refCounter+=1,a;try{let c;if(a||={bitmap:null,id:`image_${s.#e}_${s.#t++}`,refCounter:0,isSvg:!1},"string"==typeof n?(a.url=n,c=yield Gt(n,"blob")):c=a.file=n,"image/svg+xml"===c.type){const u=ir._isSVGFittingCanvas,h=new FileReader,g=new Image,b=new Promise((E,D)=>{g.onload=()=>{a.bitmap=g,a.isSvg=!0,E()},h.onload=(0,q.Z)(function*(){const T=a.svgUrl=h.result;g.src=(yield u)?`${T}#svgView(preserveAspectRatio(none))`:T}),g.onerror=h.onerror=D});h.readAsDataURL(c),yield b}else a.bitmap=yield createImageBitmap(c);a.refCounter=1}catch(c){console.error(c),a=null}return s.#n.set(e,a),a&&s.#n.set(a.id,a),a})()}getFromFile(e){var n=this;return(0,q.Z)(function*(){const{lastModified:s,name:a,size:c,type:u}=e;return n.#i(`${s}_${a}_${c}_${u}`,e)})()}getFromUrl(e){var n=this;return(0,q.Z)(function*(){return n.#i(e,e)})()}getFromId(e){var n=this;return(0,q.Z)(function*(){n.#n||=new Map;const s=n.#n.get(e);return s?s.bitmap?(s.refCounter+=1,s):s.file?n.getFromFile(s.file):n.getFromUrl(s.url):null})()}getSvgUrl(e){const n=this.#n.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#n||=new Map;const n=this.#n.get(e);n&&(n.refCounter-=1,0===n.refCounter&&(n.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class oo{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:n,post:s,mustExec:a,type:c=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(a&&e(),this.#t)return;const g={cmd:e,undo:n,post:s,type:c};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(g);if(u&&this.#e[this.#i].type===c)return h&&(g.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=g);const b=this.#i+1;b===this.#n?this.#e.splice(0,1):(this.#i=b,b<this.#e.length&&this.#e.splice(b)),this.#e.push(g)}undo(){if(-1===this.#i)return;this.#t=!0;const{undo:e,post:n}=this.#e[this.#i];e(),n?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:n}=this.#e[this.#i];e(),n?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class Yi{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=lt.platform;for(const[s,a,c={}]of e)for(const u of s){const h=u.startsWith("mac+");n&&h?(this.callbacks.set(u.slice(4),{callback:a,options:c}),this.allKeys.add(u.split("+").at(-1))):!n&&!h&&(this.callbacks.set(u,{callback:a,options:c}),this.allKeys.add(u.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const s=this.callbacks.get(this.#e(n));if(!s)return;const{callback:a,options:{bubbles:c=!1,args:u=[],checker:h=null}}=s;h&&!h(e,n)||(a.bind(e,...u,n)(),c||(n.stopPropagation(),n.preventDefault()))}}class rr{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function Bt(f){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of f.keys()){e.style.color=n;const s=window.getComputedStyle(e).color;f.set(n,Bn(s))}e.remove()}(e),pt(this,"_colors",e)}convert(e){const n=Bn(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[s,a]of this._colors)if(a.every((c,u)=>c===n[u]))return rr._colorsMapping.get(s);return n}getHexCode(e){const n=this._colors.get(e);return n?ze.makeHexColor(...n):e}}let Rr=(()=>{class f{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#a=null;#l=new oo;#d=null;#c=0;#u=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#v=!1;#m=null;#y=null;#_=null;#w=null;#E=!1;#C=null;#T=new Rs;#M=!1;#A=!1;#I=null;#S=null;#P=null;#L=null;#D=ge.NONE;#b=new Set;#x=null;#R=null;#k=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#N=null;#F=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const n=f.prototype,s=h=>h.#F.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&h.hasSomethingToControl(),a=(h,{target:g})=>{if(g instanceof HTMLInputElement){const{type:b}=g;return"text"!==b&&"number"!==b}return!0},c=this.TRANSLATE_SMALL,u=this.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Yi([[["ctrl+a","mac+meta+a"],n.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],n.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],n.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],n.delete,{checker:a}],[["Enter","mac+Enter"],n.addNewEditorFromKeyboard,{checker:(h,{target:g})=>!(g instanceof HTMLButtonElement)&&h.#F.contains(g)&&!h.isEnterHandled}],[[" ","mac+ "],n.addNewEditorFromKeyboard,{checker:(h,{target:g})=>!(g instanceof HTMLButtonElement)&&h.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],n.unselectAll],[["ArrowLeft","mac+ArrowLeft"],n.translateSelectedEditors,{args:[-c,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n.translateSelectedEditors,{args:[-u,0],checker:s}],[["ArrowRight","mac+ArrowRight"],n.translateSelectedEditors,{args:[c,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n.translateSelectedEditors,{args:[u,0],checker:s}],[["ArrowUp","mac+ArrowUp"],n.translateSelectedEditors,{args:[0,-c],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n.translateSelectedEditors,{args:[0,-u],checker:s}],[["ArrowDown","mac+ArrowDown"],n.translateSelectedEditors,{args:[0,c],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n.translateSelectedEditors,{args:[0,u],checker:s}]]))}constructor(n,s,a,c,u,h,g,b,E,D,T){const O=this._signal=this.#e.signal;this.#F=n,this.#B=s,this.#r=a,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:O}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:O}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:O}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:O}),c._on("setpreference",this.onSetPreference.bind(this),{signal:O}),c._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:O}),this.#J(),this.#ie(),this.#G(),this.#s=u.annotationStorage,this.#m=u.filterFactory,this.#R=h,this.#w=g||null,this.#f=b,this.#g=E,this.#v=D,this.#L=T||null,this.viewParameters={realScale:Qe.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#e?.abort(),this.#e=null,this._signal=null;for(const n of this.#i.values())n.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#l.destroy(),this.#r?.destroy(),this.#C?.hide(),this.#C=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#N&&(clearTimeout(this.#N),this.#N=null)}combinedSignal(n){return AbortSignal.any([this._signal,n.signal])}get mlManager(){return this.#L}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return pt(this,"hcmFilter",this.#R?this.#m.addHCMFilter(this.#R.foreground,this.#R.background):"none")}get direction(){return pt(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return pt(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(n=>n.split("=").map(s=>s.trim()))):null)}get highlightColorNames(){return pt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,n=>n.reverse())):null)}setMainHighlightColorPicker(n){this.#P=n}editAltText(n,s=!1){this.#r?.editAltText(this,n,s)}switchToMode(n,s){this._eventBus.on("annotationeditormodechanged",s,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:n})}setPreference(n,s){this._eventBus.dispatch("setpreference",{source:this,name:n,value:s})}onSetPreference({name:n,value:s}){"enableNewAltTextWhenAddingImage"===n&&(this.#v=s)}onPageChanging({pageNumber:n}){this.#c=n-1}focusMainContainer(){this.#F.focus()}findParent(n,s){for(const a of this.#i.values()){const{x:c,y:u,width:h,height:g}=a.div.getBoundingClientRect();if(n>=c&&n<=c+h&&s>=u&&s<=u+g)return a}return null}disableUserSelect(n=!1){this.#B.classList.toggle("noUserSelect",n)}addShouldRescale(n){this.#p.add(n)}removeShouldRescale(n){this.#p.delete(n)}onScaleChanging({scale:n}){this.commitOrRemove(),this.viewParameters.realScale=n*Qe.PDF_TO_CSS_UNITS;for(const s of this.#p)s.onScaleChanging()}onRotationChanging({pagesRotation:n}){this.commitOrRemove(),this.viewParameters.rotation=n}#H({anchorNode:n}){return n.nodeType===Node.TEXT_NODE?n.parentElement:n}#W(n){const{currentLayer:s}=this;if(s.hasTextLayer(n))return s;for(const a of this.#i.values())if(a.hasTextLayer(n))return a;return null}highlightSelection(n=""){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:c,focusNode:u,focusOffset:h}=s,g=s.toString(),E=this.#H(s).closest(".textLayer"),D=this.getSelectionBoxes(E);if(!D)return;s.empty();const T=this.#W(E),O=this.#D===ge.NONE,k=()=>{T?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:n,boxes:D,anchorNode:a,anchorOffset:c,focusNode:u,focusOffset:h,text:g}),O&&this.showAllEditors("highlight",!0,!0)};O?this.switchToMode(ge.HIGHLIGHT,k):k()}#Z(){const n=document.getSelection();if(!n||n.isCollapsed)return;const a=this.#H(n).closest(".textLayer"),c=this.getSelectionBoxes(a);c&&(this.#C||=new Gi(this),this.#C.show(a,c,"ltr"===this.direction))}addToAnnotationStorage(n){!n.isEmpty()&&this.#s&&!this.#s.has(n.id)&&this.#s.setValue(n.id,n)}#Q(){const n=document.getSelection();if(!n||n.isCollapsed)return void(this.#x&&(this.#C?.hide(),this.#x=null,this.#O({hasSelectedText:!1})));const{anchorNode:s}=n;if(s===this.#x)return;const c=this.#H(n).closest(".textLayer");if(c){if(this.#C?.hide(),this.#x=s,this.#O({hasSelectedText:!0}),(this.#D===ge.HIGHLIGHT||this.#D===ge.NONE)&&(this.#D===ge.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const u=this.#D===ge.HIGHLIGHT?this.#W(c):null;u?.toggleDrawing();const h=new AbortController,g=this.combinedSignal(h),b=E=>{"pointerup"===E.type&&0!==E.button||(h.abort(),u?.toggleDrawing(!0),"pointerup"===E.type&&this.#z("main_toolbar"))};window.addEventListener("pointerup",b,{signal:g}),window.addEventListener("blur",b,{signal:g})}}else this.#x&&(this.#C?.hide(),this.#x=null,this.#O({hasSelectedText:!1}))}#z(n=""){this.#D===ge.HIGHLIGHT?this.highlightSelection(n):this.#f&&this.#Z()}#J(){document.addEventListener("selectionchange",this.#Q.bind(this),{signal:this._signal})}#ee(){if(this.#_)return;this.#_=new AbortController;const n=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:n}),window.addEventListener("blur",this.blur.bind(this),{signal:n})}#te(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#z("main_toolbar")),!this.hasSelection)return;const{activeElement:n}=document;for(const s of this.#b)if(s.div.contains(n)){this.#S=[s,n],s._focusEventsAllowed=!1;break}}focus(){if(!this.#S)return;const[n,s]=this.#S;this.#S=null,s.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}#G(){if(this.#I)return;this.#I=new AbortController;const n=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:n}),window.addEventListener("keyup",this.keyup.bind(this),{signal:n})}#ne(){this.#I?.abort(),this.#I=null}#Y(){if(this.#d)return;this.#d=new AbortController;const n=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:n}),document.addEventListener("cut",this.cut.bind(this),{signal:n}),document.addEventListener("paste",this.paste.bind(this),{signal:n})}#K(){this.#d?.abort(),this.#d=null}#ie(){const n=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:n}),document.addEventListener("drop",this.drop.bind(this),{signal:n})}addEditListeners(){this.#G(),this.#Y()}removeEditListeners(){this.#ne(),this.#K()}dragOver(n){for(const{type:s}of n.dataTransfer.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(s))return n.dataTransfer.dropEffect="copy",void n.preventDefault()}drop(n){for(const s of n.dataTransfer.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(s.type))return a.paste(s,this.currentLayer),void n.preventDefault()}copy(n){if(n.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const s=[];for(const a of this.#b){const c=a.serialize(!0);c&&s.push(c)}0!==s.length&&n.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(n){this.copy(n),this.delete()}paste(n){n.preventDefault();const{clipboardData:s}=n;for(const u of s.items)for(const h of this.#h)if(h.isHandlingMimeForPasting(u.type))return void h.paste(u,this.currentLayer);let a=s.getData("application/pdfjs");if(!a)return;try{a=JSON.parse(a)}catch(u){return void at(`paste: "${u.message}".`)}if(!Array.isArray(a))return;this.unselectAll();const c=this.currentLayer;try{const u=[];for(const b of a){const E=c.deserialize(b);if(!E)return;u.push(E)}this.addCommands({cmd:()=>{for(const b of u)this.#q(b);this.#X(u)},undo:()=>{for(const b of u)b.remove()},mustExec:!0})}catch(u){at(`paste: "${u.message}".`)}}keydown(n){!this.isShiftKeyDown&&"Shift"===n.key&&(this.isShiftKeyDown=!0),this.#D!==ge.NONE&&!this.isEditorHandlingKeyboard&&f._keyboardManager.exec(this,n)}keyup(n){this.isShiftKeyDown&&"Shift"===n.key&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#z("main_toolbar")))}onEditingAction({name:n}){switch(n){case"undo":case"redo":case"delete":case"selectAll":this[n]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#O(n){Object.entries(n).some(([a,c])=>this.#V[a]!==c)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,n)}),this.#D===ge.HIGHLIGHT&&!1===n.hasSelectedEditor&&this.#U([[Ue.HIGHLIGHT_FREE,!0]]))}#U(n){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:n})}setEditingState(n){n?(this.#ee(),this.#Y(),this.#O({isEditing:this.#D!==ge.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#te(),this.#K(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(n){if(!this.#h){this.#h=n;for(const s of this.#h)this.#U(s.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#i.get(this.#c)}getLayer(n){return this.#i.get(n)}get currentPageIndex(){return this.#c}addLayer(n){this.#i.set(n.pageIndex,n),this.#M?n.enable():n.disable()}removeLayer(n){this.#i.delete(n.pageIndex)}updateMode(n,s=null,a=!1){if(this.#D!==n){if(this.#D=n,n===ge.NONE)return this.setEditingState(!1),void this.#se();this.setEditingState(!0),this.#re(),this.unselectAll();for(const c of this.#i.values())c.updateMode(n);if(!s&&a)return void this.addNewEditorFromKeyboard();if(s)for(const c of this.#n.values())if(c.annotationElementId===s){this.setSelected(c),c.enterInEditMode();break}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(n){n!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:n})}updateParams(n,s){if(this.#h){switch(n){case Ue.CREATE:return void this.currentLayer.addNewEditor();case Ue.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(s);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#k||=new Map).set(n,s),this.showAllEditors("highlight",s)}for(const a of this.#b)a.updateParams(n,s);for(const a of this.#h)a.updateDefaultParams(n,s)}}showAllEditors(n,s,a=!1){for(const u of this.#n.values())u.editorType===n&&u.show(s);(this.#k?.get(Ue.HIGHLIGHT_SHOW_ALL)??!0)!==s&&this.#U([[Ue.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(n=!1){if(this.#A!==n){this.#A=n;for(const s of this.#i.values())n?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",n)}}#re(){if(!this.#M){this.#M=!0;for(const n of this.#i.values())n.enable();for(const n of this.#n.values())n.enable()}}#se(){if(this.unselectAll(),this.#M){this.#M=!1;for(const n of this.#i.values())n.disable();for(const n of this.#n.values())n.disable()}}getEditors(n){const s=[];for(const a of this.#n.values())a.pageIndex===n&&s.push(a);return s}getEditor(n){return this.#n.get(n)}addEditor(n){this.#n.set(n.id,n)}removeEditor(n){n.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(n.id),this.unselect(n),(!n.annotationElementId||!this.#u.has(n.annotationElementId))&&this.#s?.remove(n.id)}addDeletedAnnotationElement(n){this.#u.add(n.annotationElementId),this.addChangedExistingAnnotation(n),n.deleted=!0}isDeletedAnnotationElement(n){return this.#u.has(n)}removeDeletedAnnotationElement(n){this.#u.delete(n.annotationElementId),this.removeChangedExistingAnnotation(n),n.deleted=!1}#q(n){const s=this.#i.get(n.pageIndex);s?s.addOrRebuild(n):(this.addEditor(n),this.addToAnnotationStorage(n))}setActiveEditor(n){this.#t!==n&&(this.#t=n,n&&this.#U(n.propertiesToUpdate))}get#oe(){let n=null;for(n of this.#b);return n}updateUI(n){this.#oe===n&&this.#U(n.propertiesToUpdate)}toggleSelected(n){if(this.#b.has(n))return this.#b.delete(n),n.unselect(),void this.#O({hasSelectedEditor:this.hasSelection});this.#b.add(n),n.select(),this.#U(n.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(n){for(const s of this.#b)s!==n&&s.unselect();this.#b.clear(),this.#b.add(n),n.select(),this.#U(n.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(n){return this.#b.has(n)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(n){n.unselect(),this.#b.delete(n),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#b.size}get isEnterHandled(){return 1===this.#b.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#O({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#l.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(n){this.#l.add(n),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const n of this.#n.values())return n.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const n=[...this.#b];this.addCommands({cmd:()=>{for(const c of n)c.remove()},undo:()=>{for(const c of n)this.#q(c)},mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#X(n){for(const s of this.#b)s.unselect();this.#b.clear();for(const s of n)s.isEmpty()||(this.#b.add(s),s.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const n of this.#b)n.commit();this.#X(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#D===ge.NONE))&&this.hasSelection){for(const n of this.#b)n.unselect();this.#b.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(n,s,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=n,this.#j[1]+=s;const[c,u]=this.#j,h=[...this.#b];this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.#N=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const b of h)this.#n.has(b.id)&&b.translateInPage(c,u)},undo:()=>{for(const b of h)this.#n.has(b.id)&&b.translateInPage(-c,-u)},mustExec:!1})},1e3);for(const b of h)b.translateInPage(n,s)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const n of this.#b)this.#o.set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const n=this.#o;this.#o=null;let s=!1;for(const[{x:c,y:u,pageIndex:h},g]of n)g.newX=c,g.newY=u,g.newPageIndex=h,s||=c!==g.savedX||u!==g.savedY||h!==g.savedPageIndex;if(!s)return!1;const a=(c,u,h,g)=>{if(this.#n.has(c.id)){const b=this.#i.get(g);b?c._setParentAndPosition(b,u,h):(c.pageIndex=g,c.x=u,c.y=h)}};return this.addCommands({cmd:()=>{for(const[c,{newX:u,newY:h,newPageIndex:g}]of n)a(c,u,h,g)},undo:()=>{for(const[c,{savedX:u,savedY:h,savedPageIndex:g}]of n)a(c,u,h,g)},mustExec:!0}),!0}dragSelectedEditors(n,s){if(this.#o)for(const a of this.#o.keys())a.drag(n,s)}rebuild(n){if(null===n.parent){const s=this.getLayer(n.pageIndex);s?(s.changeParent(n),s.addOrRebuild(n)):(this.addEditor(n),this.addToAnnotationStorage(n),n.rebuild())}else n.parent.addOrRebuild(n)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#b.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(n){return this.#t===n}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return pt(this,"imageManager",new ir)}getSelectionBoxes(n){if(!n)return null;const s=document.getSelection();for(let E=0,D=s.rangeCount;E<D;E++)if(!n.contains(s.getRangeAt(E).commonAncestorContainer))return null;const{x:a,y:c,width:u,height:h}=n.getBoundingClientRect();let g;switch(n.getAttribute("data-main-rotation")){case"90":g=(E,D,T,O)=>({x:(D-c)/h,y:1-(E+T-a)/u,width:O/h,height:T/u});break;case"180":g=(E,D,T,O)=>({x:1-(E+T-a)/u,y:1-(D+O-c)/h,width:T/u,height:O/h});break;case"270":g=(E,D,T,O)=>({x:1-(D+O-c)/h,y:(E-a)/u,width:O/h,height:T/u});break;default:g=(E,D,T,O)=>({x:(E-a)/u,y:(D-c)/h,width:T/u,height:O/h})}const b=[];for(let E=0,D=s.rangeCount;E<D;E++){const T=s.getRangeAt(E);if(!T.collapsed)for(const{x:O,y:k,width:j,height:G}of T.getClientRects())0===j||0===G||b.push(g(O,k,j,G))}return 0===b.length?null:b}addChangedExistingAnnotation({annotationElementId:n,id:s}){(this.#a||=new Map).set(n,s)}removeChangedExistingAnnotation({annotationElementId:n}){this.#a?.delete(n)}renderAnnotationElement(n){const s=this.#a?.get(n.data.id);if(!s)return;const a=this.#s.getRawValue(s);a&&(this.#D===ge.NONE&&!a.hasBeenModified||a.renderAnnotationElement(n))}}return f})(),Os=(()=>{class f{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=!1;#a=null;#l=null;#d=null;#c=null;#u=!1;static _l10nPromise=null;constructor(n){this.#l=n,this.#u=n._uiManager.useNewAltTextFlow}static initialize(n){f._l10nPromise||=n}render(){var n=this;return(0,q.Z)(function*(){const s=n.#n=document.createElement("button");let a;s.className="altText",n.#u?(s.classList.add("new"),a=yield f._l10nPromise.get("pdfjs-editor-new-alt-text-missing-button-label")):a=yield f._l10nPromise.get("pdfjs-editor-alt-text-button-label"),s.textContent=a,s.setAttribute("aria-label",a),s.tabIndex="0";const c=n.#l._uiManager._signal;s.addEventListener("contextmenu",Sn,{signal:c}),s.addEventListener("pointerdown",h=>h.stopPropagation(),{signal:c});const u=h=>{h.preventDefault(),n.#l._uiManager.editAltText(n.#l),n.#u&&n.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:n.#o}})};return s.addEventListener("click",u,{capture:!0,signal:c}),s.addEventListener("keydown",h=>{h.target===s&&"Enter"===h.key&&(n.#s=!0,u(h))},{signal:c}),yield n.#h(),s})()}get#o(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#u?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#u?null!==this.#e||!!this.#d:this.isEmpty()}get guessedText(){return this.#d}setGuessedText(n){var s=this;return(0,q.Z)(function*(){null===s.#e&&(s.#d=n,s.#c=yield f._l10nPromise.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer")({generatedAltText:n}),s.#h())})()}toggleAltTextBadge(n=!1){if(!this.#u||this.#e)return this.#a?.remove(),void(this.#a=null);if(!this.#a){const s=this.#a=document.createElement("div");s.className="noAltTextBadge",this.#l.div.append(s)}this.#a.classList.toggle("hidden",!n)}serialize(n){let s=this.#e;return!n&&this.#d===s&&(s=this.#c),{altText:s,decorative:this.#t,guessedText:this.#d,textWithDisclaimer:this.#c}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:n,decorative:s,guessedText:a,textWithDisclaimer:c,cancel:u=!1}){a&&(this.#d=a,this.#c=c),(this.#e!==n||this.#t!==s)&&(u||(this.#e=n,this.#t=s),this.#h())}toggle(n=!1){this.#n&&(!n&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!n)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#o}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a?.remove(),this.#a=null}#h(){var n=this;return(0,q.Z)(function*(){const s=n.#n;if(!s)return;if(n.#u){const u=n.#o,h="review"===u?"to-review":u;if(s.classList.toggle("done",!!n.#e),f._l10nPromise.get(`pdfjs-editor-new-alt-text-${h}-button-label`).then(g=>{s.setAttribute("aria-label",g);for(const b of s.childNodes)if(b.nodeType===Node.TEXT_NODE){b.textContent=g;break}}),!n.#e)return void n.#i?.remove()}else{if(!n.#e&&!n.#t)return s.classList.remove("done"),void n.#i?.remove();s.classList.add("done"),f._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(u=>{s.setAttribute("aria-label",u)})}let a=n.#i;if(!a){n.#i=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip");const u=a.id=`alt-text-tooltip-${n.#l.id}`;s.setAttribute("aria-describedby",u);const h=100,g=n.#l._uiManager._signal;g.addEventListener("abort",()=>{clearTimeout(n.#r),n.#r=null},{once:!0}),s.addEventListener("mouseenter",()=>{n.#r=setTimeout(()=>{n.#r=null,n.#i.classList.add("show"),n.#l._reportTelemetry({action:"alt_text_tooltip"})},h)},{signal:g}),s.addEventListener("mouseleave",()=>{n.#r&&(clearTimeout(n.#r),n.#r=null),n.#i?.classList.remove("show")},{signal:g})}a.innerText=n.#t?yield f._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):n.#e,a.parentNode||s.append(a),n.#l.getImageForAltText()?.setAttribute("aria-describedby",a.id)})()}}return f})();class mt{#e=null;#t=null;#n=null;#i=!1;#r=!1;#s=null;#a=null;#l=null;#d="";#c=!1;#u=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#v=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10nPromise=null;static _l10nResizer=null;#y=!1;#_=mt._zIndex++;static _borderLineWidth=-1;static _colorManager=new rr;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=mt.prototype._resizeWithKeyboard,n=Rr.TRANSLATE_SMALL,s=Rr.TRANSLATE_BIG;return pt(this,"_resizerKeyboardManager",new Yi([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],mt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:c,pageY:u}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[c,u];const[h,g]=this.parentDimensions;this.x=e.x/h,this.y=e.y/g,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return pt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new Mi({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n,s){if(mt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),mt._l10nPromise||=new Map([...["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-new-alt-text-added-button-label","pdfjs-editor-new-alt-text-missing-button-label","pdfjs-editor-new-alt-text-to-review-button-label"].map(c=>[c,e.get(c)]),...["pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer"].map(c=>[c,e.get.bind(e,c)])]),s?.strings)for(const c of s.strings)mt._l10nPromise.set(c,e.get(c));if(-1!==mt._borderLineWidth)return;const a=getComputedStyle(document.documentElement);mt._borderLineWidth=parseFloat(a.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){wt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(2*e),this.y+=this.width*e/(2*n);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(2*e),this.y-=this.width*e/(2*n);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#k(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#c?this.#c=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,s,a){const[c,u]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(e+s)/c,this.y=(n+a)/u,this.fixAndSetPosition()}#w([e,n],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/e,this.y+=a/n,this.fixAndSetPosition()}translate(e,n){this.#w(this.parentDimensions,e,n)}translateInPage(e,n){this.#u||=[this.x,this.y],this.#w(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}drag(e,n){this.#u||=[this.x,this.y];const[s,a]=this.parentDimensions;if(this.x+=e/s,this.y+=n/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:E}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,E)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,g]=this.getBaseTranslation();c+=h,u+=g,this.div.style.left=`${(100*c).toFixed(2)}%`,this.div.style.top=`${(100*u).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:s}=mt,a=s/e,c=s/n;switch(this.rotation){case 90:return[-a,c];case 180:return[a,c];case 270:return[a,-c];default:return[-a,-c]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[n,s]=this.pageDimensions;let{x:a,y:c,width:u,height:h}=this;if(u*=n,h*=s,a*=n,c*=s,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(n-u,a)),c=Math.max(0,Math.min(s-h,c));break;case 90:a=Math.max(0,Math.min(n-h,a)),c=Math.min(s,Math.max(u,c));break;case 180:a=Math.min(n,Math.max(u,a)),c=Math.min(s,Math.max(h,c));break;case 270:a=Math.min(n,Math.max(h,a)),c=Math.max(0,Math.min(s-u,c))}this.x=a/=n,this.y=c/=s;const[g,b]=this.getBaseTranslation();a+=g,c+=b;const{style:E}=this.div;E.left=`${(100*a).toFixed(2)}%`,E.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#E(e,n,s){switch(s){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return mt.#E(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return mt.#E(e,n,360-this.parentRotation)}#C(e){switch(e){case 90:{const[n,s]=this.pageDimensions;return[0,-n/s,s/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,s]=this.pageDimensions;return[0,n/s,-s/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,s]}=this,a=n*e,c=s*e;return lt.isCSSRoundSupported?[Math.round(a),Math.round(c)]:[a,c]}setDims(e,n){const[s,a]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*n/a).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:n,width:s}=e,a=s.endsWith("%"),c=!this.#r&&n.endsWith("%");if(a&&c)return;const[u,h]=this.parentDimensions;a||(e.width=`${(100*parseFloat(s)/u).toFixed(2)}%`),!this.#r&&!c&&(e.height=`${(100*parseFloat(n)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const s of e){const a=document.createElement("div");this.#s.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#M.bind(this,s),{signal:n}),a.addEventListener("contextmenu",Sn,{signal:n}),a.tabIndex=-1}this.div.prepend(this.#s)}#M(e,n){n.preventDefault();const{isMac:s}=lt.platform;if(0!==n.button||n.ctrlKey&&s)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1;const c=new AbortController,u=this._uiManager.combinedSignal(c);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("contextmenu",Sn,{signal:u});const h=this.x,g=this.y,b=this.width,E=this.height,D=this.parent.div.style.cursor,T=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const O=()=>{c.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=D,this.div.style.cursor=T,this.#A(h,g,b,E)};window.addEventListener("pointerup",O,{signal:u}),window.addEventListener("blur",O,{signal:u})}#A(e,n,s,a){const c=this.x,u=this.y,h=this.width,g=this.height;c===e&&u===n&&h===s&&g===a||this.addCommands({cmd:()=>{this.width=h,this.height=g,this.x=c,this.y=u;const[b,E]=this.parentDimensions;this.setDims(b*h,E*g),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=a,this.x=e,this.y=n;const[b,E]=this.parentDimensions;this.setDims(b*s,E*a),this.fixAndSetPosition()},mustExec:!0})}#I(e,n){const[s,a]=this.parentDimensions,c=this.x,u=this.y,h=this.width,g=this.height,b=mt.MIN_SIZE/s,E=mt.MIN_SIZE/a,D=Pt=>Math.round(1e4*Pt)/1e4,T=this.#C(this.rotation),O=(Pt,Lt)=>[T[0]*Pt+T[2]*Lt,T[1]*Pt+T[3]*Lt],k=this.#C(360-this.rotation);let G,U,ne=!1,ue=!1;switch(e){case"topLeft":ne=!0,G=(Pt,Lt)=>[0,0],U=(Pt,Lt)=>[Pt,Lt];break;case"topMiddle":G=(Pt,Lt)=>[Pt/2,0],U=(Pt,Lt)=>[Pt/2,Lt];break;case"topRight":ne=!0,G=(Pt,Lt)=>[Pt,0],U=(Pt,Lt)=>[0,Lt];break;case"middleRight":ue=!0,G=(Pt,Lt)=>[Pt,Lt/2],U=(Pt,Lt)=>[0,Lt/2];break;case"bottomRight":ne=!0,G=(Pt,Lt)=>[Pt,Lt],U=(Pt,Lt)=>[0,0];break;case"bottomMiddle":G=(Pt,Lt)=>[Pt/2,Lt],U=(Pt,Lt)=>[Pt/2,0];break;case"bottomLeft":ne=!0,G=(Pt,Lt)=>[0,Lt],U=(Pt,Lt)=>[Pt,0];break;case"middleLeft":ue=!0,G=(Pt,Lt)=>[0,Lt/2],U=(Pt,Lt)=>[Pt,Lt/2]}const de=G(h,g),ve=U(h,g);let ye=O(...ve);const Me=D(c+ye[0]),He=D(u+ye[1]);let re=1,je=1,[nt,Jt]=this.screenToPageTranslation(n.movementX,n.movementY);if([nt,Jt]=[k[0]*(Pt=nt/s)+k[2]*(Lt=Jt/a),k[1]*Pt+k[3]*Lt],ne){const Pt=Math.hypot(h,g);re=je=Math.max(Math.min(Math.hypot(ve[0]-de[0]-nt,ve[1]-de[1]-Jt)/Pt,1/h,1/g),b/h,E/g)}else ue?re=Math.max(b,Math.min(1,Math.abs(ve[0]-de[0]-nt)))/h:je=Math.max(E,Math.min(1,Math.abs(ve[1]-de[1]-Jt)))/g;var Pt,Lt;const sn=D(h*re),en=D(g*je);ye=O(...U(sn,en));const zn=Me-ye[0],Ei=He-ye[1];this.width=sn,this.height=en,this.x=zn,this.y=Ei,this.setDims(s*sn,a*en),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){var e=this;return(0,q.Z)(function*(){return e._editToolbar||e.#h||(e._editToolbar=new tr(e),e.div.append(e._editToolbar.render()),e.#n&&(yield e._editToolbar.addAltText(e.#n))),e._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var e=this;return(0,q.Z)(function*(){e.#n||(Os.initialize(mt._l10nPromise),e.#n=new Os(e),e.#e&&(e.#n.data=e.#e,e.#e=null),yield e.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){var n=this;return(0,q.Z)(function*(){yield n.#n?.setGuessedText(e)})()}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#L();const[e,n]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),nr(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:n}=lt.platform;0!==e.button||e.ctrlKey&&n?e.preventDefault():(this.#c=!0,this._isDraggable?this.#P(e):this.#S(e))}#S(e){const{isMac:n}=lt.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const n=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();const s=new AbortController,a=this._uiManager.combinedSignal(s);n&&(this.div.classList.add("moving"),this.#g=e.clientX,this.#v=e.clientY,window.addEventListener("pointermove",h=>{const{clientX:g,clientY:b}=h,[E,D]=this.screenToPageTranslation(g-this.#g,b-this.#v);this.#g=g,this.#v=b,this._uiManager.dragSelectedEditors(E,D)},{passive:!0,capture:!0,signal:a}));const c=()=>{s.abort(),n&&this.div.classList.remove("moving"),this.#c=!1,this._uiManager.endDragSession()||this.#S(e)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,s){e.changeParent(this),this.x=n,this.y=s,this.fixAndSetPosition()}getRect(e,n,s=this.rotation){const a=this.parentScale,[c,u]=this.pageDimensions,[h,g]=this.pageTranslation,b=e/a,E=n/a,D=this.x*c,T=this.y*u,O=this.width*c,k=this.height*u;switch(s){case 0:return[D+b+h,u-T-E-k+g,D+b+O+h,u-T-E+g];case 90:return[D+E+h,u-T+b+g,D+E+k+h,u-T+b+O+g];case 180:return[D-b-O+h,u-T+E+g,D-b+h,u-T+E+k+g];case 270:return[D-E-k+h,u-T-b-O+g,D-E+h,u-T-b+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[s,a,c,u]=e,h=c-s,g=u-a;switch(this.rotation){case 0:return[s,n-u,h,g];case 90:return[s,n-a,g,h];case 180:return[c,n-a,h,g];case 270:return[c,n-u,g,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#L(){if(this.#l||!this.div)return;this.#l=new AbortController;const e=this._uiManager.combinedSignal(this.#l);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#L()}rotate(e){}serialize(e=!1,n=null){wt("An editor must be serializable")}static deserialize(e,n,s){const a=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:s});a.rotation=e.rotation,a.#e=e.accessibilityData;const[c,u]=a.pageDimensions,[h,g,b,E]=a.getRectInCurrentCoords(e.rect,u);return a.x=h/c,a.y=g/u,a.width=b/c,a.height=E/u,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#l?.abort(),this.#l=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#k(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#s.classList.remove("hidden"),nr(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#a={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#s.children;if(!this.#t){this.#t=Array.from(n);const u=this.#D.bind(this),h=this.#b.bind(this),g=this._uiManager._signal;for(const b of this.#t){const E=b.getAttribute("data-resizer-name");b.setAttribute("role","spinbutton"),b.addEventListener("keydown",u,{signal:g}),b.addEventListener("blur",h,{signal:g}),b.addEventListener("focus",this.#x.bind(this,E),{signal:g}),b.setAttribute("data-l10n-id",mt._l10nResizer[E])}}const s=this.#t[0];let a=0;for(const u of n){if(u===s)break;a++}const c=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(c!==a){if(c<a)for(let h=0;h<a-c;h++)this.#s.append(this.#s.firstChild);else if(c>a)for(let h=0;h<c-a;h++)this.#s.firstChild.before(this.#s.lastChild);let u=0;for(const h of n){const b=this.#t[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",mt._l10nResizer[b])}}this.#R(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#D(e){mt._resizerKeyboardManager.exec(this,e)}#b(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#k()}#x(e){this.#d=this.#p?e:""}#R(e){if(this.#t)for(const n of this.#t)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#p&&this.#I(this.#d,{movementX:e,movementY:n})}#k(){if(this.#p=!1,this.#R(-1),this.#a){const{savedX:e,savedY:n,savedWidth:s,savedHeight:a}=this.#a;this.#A(e,n,s,a),this.#a=null}}_stopResizingWithKeyboard(){this.#k(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,n){this.#r=!0;const s=e/n,{style:a}=this.div;a.aspectRatio=s,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#m||=new Map;const{action:s}=e;let a=this.#m.get(s);return a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(s),0===this.#m.size&&(this.#m=null)},mt._telemetryTimeout),void this.#m.set(s,a)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let n=e.container.querySelector(".annotationContent");if(n){if("CANVAS"===n.nodeName){const s=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),s.before(n)}}else n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);return n}resetAnnotationElement(e){const{firstChild:n}=e.container;"DIV"===n.nodeName&&n.classList.contains("annotationContent")&&n.remove()}}class Mi extends mt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const as=3285377520,Mn=4294901760,hn=65535;class $r{constructor(e){this.h1=e?4294967295&e:as,this.h2=e?4294967295&e:as}update(e){let n,s;if("string"==typeof e){n=new Uint8Array(2*e.length),s=0;for(let j=0,G=e.length;j<G;j++){const U=e.charCodeAt(j);U<=255?n[s++]=U:(n[s++]=U>>>8,n[s++]=255&U)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");n=e.slice(),s=n.byteLength}const a=s>>2,c=s-4*a,u=new Uint32Array(n.buffer,0,a);let h=0,g=0,b=this.h1,E=this.h2;const D=3432918353,T=461845907,O=D&hn,k=T&hn;for(let j=0;j<a;j++)1&j?(h=u[j],h=h*D&Mn|h*O&hn,h=h<<15|h>>>17,h=h*T&Mn|h*k&hn,b^=h,b=b<<13|b>>>19,b=5*b+3864292196):(g=u[j],g=g*D&Mn|g*O&hn,g=g<<15|g>>>17,g=g*T&Mn|g*k&hn,E^=g,E=E<<13|E>>>19,E=5*E+3864292196);switch(h=0,c){case 3:h^=n[4*a+2]<<16;case 2:h^=n[4*a+1]<<8;case 1:h^=n[4*a],h=h*D&Mn|h*O&hn,h=h<<15|h>>>17,h=h*T&Mn|h*k&hn,1&a?b^=h:E^=h}this.h1=b,this.h2=E}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=3981806797*e&Mn|36045*e&hn,n=4283543511*n&Mn|(2950163797*(n<<16|e>>>16)&Mn)>>>16,e^=n>>>1,e=444984403*e&Mn|60499*e&hn,n=3301882366*n&Mn|(3120437893*(n<<16|e>>>16)&Mn)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const Gn=Object.freeze({map:null,hash:"",transfer:void 0});class Ls{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const s=this.#n.get(e);return void 0===s?n:Object.assign(n,s)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const n of this.#n.values())if(n instanceof mt)return;this.onAnnotationEditor(null)}}setValue(e,n){const s=this.#n.get(e);let a=!1;if(void 0!==s)for(const[c,u]of Object.entries(n))s[c]!==u&&(a=!0,s[c]=u);else a=!0,this.#n.set(e,n);a&&this.#i(),n instanceof mt&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(n.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?Je(this.#n):null}setAll(e){for(const[n,s]of Object.entries(e))this.setValue(n,s)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new Io(this)}get serializable(){if(0===this.#n.size)return Gn;const e=new Map,n=new $r,s=[],a=Object.create(null);let c=!1;for(const[u,h]of this.#n){const g=h instanceof mt?h.serialize(!1,a):h;g&&(e.set(u,g),n.update(`${u}:${JSON.stringify(g)}`),c||=!!g.bitmap)}if(c)for(const u of e.values())u.bitmap&&s.push(u.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:s}:Gn}get editorStats(){let e=null;const n=new Map;for(const s of this.#n.values()){if(!(s instanceof mt))continue;const a=s.telemetryFinalData;if(!a)continue;const{type:c}=a;n.has(c)||n.set(c,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const u=e[c]||=new Map;for(const[h,g]of Object.entries(a)){if("type"===h)continue;let b=u.get(h);b||(b=new Map,u.set(h,b));const E=b.get(g)??0;b.set(g,E+1)}}for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const n of this.#n.values())!(n instanceof mt)||!n.annotationElementId||!n.serialize()||e.push(n.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class Io extends Ls{#e;constructor(e){super();const{map:n,hash:s,transfer:a}=e.serializable,c=structuredClone(n,a?{transfer:a}:null);this.#e={map:c,hash:s,transfer:a}}get print(){wt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return pt(this,"modifiedIds",{ids:new Set,hash:""})}}class la{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont({systemFontInfo:e,_inspectFont:n}){var s=this;return(0,q.Z)(function*(){if(e&&!s.#e.has(e.loadedName)){if(bt(!s.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),s.isFontLoadingAPISupported){const{loadedName:a,src:c,style:u}=e,h=new FontFace(a,c,u);s.addNativeFontFace(h);try{yield h.load(),s.#e.add(a),n?.(e)}catch{at(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),s.removeNativeFontFace(h)}return}wt("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(e){var n=this;return(0,q.Z)(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield n.loadSystemFont(e));if(n.isFontLoadingAPISupported){const a=e.createNativeFontFace();if(a){n.addNativeFontFace(a);try{yield a.loaded}catch(c){throw at(`Failed to load font '${a.family}': '${c}'.`),e.disableFontFace=!0,c}}return}const s=e.createFontFaceRule();if(s){if(n.insertRule(s),n.isSyncFontLoadingSupported)return;yield new Promise(a=>{const c=n._queueLoadingCallback(a);n._prepareFontLoadEvent(e,c)})}})()}get isFontLoadingAPISupported(){return pt(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(st||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),pt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:s}=this,a={done:!1,complete:function n(){for(bt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const c=s.shift();setTimeout(c.callback,0)}},callback:e};return s.push(a),a}get _loadTestFont(){return pt(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,n){function s(de,ve){return de.charCodeAt(ve)<<24|de.charCodeAt(ve+1)<<16|de.charCodeAt(ve+2)<<8|255&de.charCodeAt(ve+3)}function a(de,ve,ye,Me){return de.substring(0,ve)+Me+de.substring(ve+ye)}let c,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const g=h.getContext("2d");let b=0;const D=`lt${Date.now()}${this.loadTestFontId++}`;let T=this._loadTestFont;T=a(T,976,D.length,D);const j=1482184792;let G=s(T,16);for(c=0,u=D.length-3;c<u;c+=4)G=G-j+s(D,c)|0;c<D.length&&(G=G-j+s(D+"XXX",c)|0),T=a(T,16,4,function rt(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,255&f)}(G));const U=`url(data:font/opentype;base64,${btoa(T)});`;this.insertRule(`@font-face {font-family:"${D}";src:${U}}`);const ue=this._document.createElement("div");ue.style.visibility="hidden",ue.style.width=ue.style.height="10px",ue.style.position="absolute",ue.style.top=ue.style.left="0px";for(const de of[e.loadedName,D]){const ve=this._document.createElement("span");ve.textContent="Hi",ve.style.fontFamily=de,ue.append(ve)}this._document.body.append(ue),function E(de,ve){if(++b>30)return at("Load test font never loaded."),void ve();g.font="30px "+de,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0?ve():setTimeout(E.bind(null,de,ve))}(D,()=>{ue.remove(),n.complete()})}}class ca{constructor(e,{disableFontFace:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.disableFontFace=!0===n,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=Tt(this.data),n=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(this.cssFontInfo){let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${n}}`}else s=`@font-face {font-family:"${this.loadedName}";src:${n}}`;return this._inspectFont?.(this,n),s}getPathGenerator(e,n){if(void 0!==this.compiledGlyphs[n])return this.compiledGlyphs[n];let s;try{s=e.get(this.loadedName+"_path_"+n)}catch(c){at(`getPathGenerator - ignoring character: "${c}".`)}if(!Array.isArray(s)||0===s.length)return this.compiledGlyphs[n]=function(c,u){};const a=[];for(let c=0,u=s.length;c<u;)switch(s[c++]){case 0:{const[h,g,b,E,D,T]=s.slice(c,c+6);a.push(O=>O.bezierCurveTo(h,g,b,E,D,T)),c+=6}break;case 1:{const[h,g]=s.slice(c,c+2);a.push(b=>b.moveTo(h,g)),c+=2}break;case 2:{const[h,g]=s.slice(c,c+2);a.push(b=>b.lineTo(h,g)),c+=2}break;case 3:{const[h,g,b,E]=s.slice(c,c+4);a.push(D=>D.quadraticCurveTo(h,g,b,E)),c+=4}break;case 4:a.push(h=>h.restore());break;case 5:a.push(h=>h.save());break;case 6:bt(2===a.length,"Scale command is only valid at the third position.");break;case 7:{const[h,g,b,E,D,T]=s.slice(c,c+6);a.push(O=>O.transform(h,g,b,E,D,T)),c+=6}break;case 8:{const[h,g]=s.slice(c,c+2);a.push(b=>b.translate(h,g)),c+=2}}return this.compiledGlyphs[n]=function(u,h){a[0](u),a[1](u),u.scale(h,-h);for(let g=2,b=a.length;g<b;g++)a[g](u)}}}if(st){var Ns=Promise.withResolvers(),ao=null;(function(){var e=(0,q.Z)(function*(){const n=yield import("fs"),s=yield import("http"),a=yield import("https"),c=yield import("url");return new Map(Object.entries({fs:n,http:s,https:a,url:c,canvas:void 0,path2d:void 0}))});return function(){return e.apply(this,arguments)}})()().then(e=>{ao=e,Ns.resolve()},e=>{at(`loadPackages: ${e}`),ao=new Map,Ns.resolve()})}class fr{static get promise(){return Ns.promise}static get(e){return ao?.get(e)}}const xo=function(f){return fr.get("fs").promises.readFile(f).then(n=>new Uint8Array(n))};function ls(f,e){if(!e)return;const n=e[2]-e[0],s=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],n,s),f.clip(a)}class lo{getPattern(){wt("Abstract method `getPattern` called.")}}class Ro extends lo{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;"axial"===this._type?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)n.addColorStop(s[0],s[1]);return n}getPattern(e,n,s,a){let c;if("Stroke"===a||"Fill"===a){const u=n.current.getClippedPathBoundingBox(a,nn(e))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,g=Math.ceil(u[3]-u[1])||1,b=n.cachedCanvases.getCanvas("pattern",h,g,!0),E=b.context;E.clearRect(0,0,E.canvas.width,E.canvas.height),E.beginPath(),E.rect(0,0,E.canvas.width,E.canvas.height),E.translate(-u[0],-u[1]),s=ze.transform(s,[1,0,0,1,u[0],u[1]]),E.transform(...n.baseTransform),this.matrix&&E.transform(...this.matrix),ls(E,this._bbox),E.fillStyle=this._createGradient(E),E.fill(),c=e.createPattern(b.canvas,"no-repeat");const D=new DOMMatrix(s);c.setTransform(D)}else ls(e,this._bbox),c=this._createGradient(e);return c}}function pr(f,e,n,s,a,c,u,h){const g=e.coords,b=e.colors,E=f.data,D=4*f.width;let T;g[n+1]>g[s+1]&&(T=n,n=s,s=T,T=c,c=u,u=T),g[s+1]>g[a+1]&&(T=s,s=a,a=T,T=u,u=h,h=T),g[n+1]>g[s+1]&&(T=n,n=s,s=T,T=c,c=u,u=T);const O=(g[n]+e.offsetX)*e.scaleX,k=(g[n+1]+e.offsetY)*e.scaleY,j=(g[s]+e.offsetX)*e.scaleX,G=(g[s+1]+e.offsetY)*e.scaleY,U=(g[a]+e.offsetX)*e.scaleX,ne=(g[a+1]+e.offsetY)*e.scaleY;if(k>=ne)return;const ue=b[c],de=b[c+1],ve=b[c+2],ye=b[u],Me=b[u+1],He=b[u+2],re=b[h],je=b[h+1],nt=b[h+2],Jt=Math.round(k),sn=Math.round(ne);let en,zn,Ei,Pt,Lt,cu,na,Vl;for(let wi=Jt;wi<=sn;wi++){if(wi<G){const Kn=wi<k?0:(k-wi)/(k-G);en=O-(O-j)*Kn,zn=ue-(ue-ye)*Kn,Ei=de-(de-Me)*Kn,Pt=ve-(ve-He)*Kn}else{let Kn;Kn=wi>ne?1:G===ne?0:(G-wi)/(G-ne),en=j-(j-U)*Kn,zn=ye-(ye-re)*Kn,Ei=Me-(Me-je)*Kn,Pt=He-(He-nt)*Kn}let fi;fi=wi<k?0:wi>ne?1:(k-wi)/(k-ne),Lt=O-(O-U)*fi,cu=ue-(ue-re)*fi,na=de-(de-je)*fi,Vl=ve-(ve-nt)*fi;const Ka=Math.round(Math.min(en,Lt)),dr=Math.round(Math.max(en,Lt));let Js=D*wi+4*Ka;for(let Kn=Ka;Kn<=dr;Kn++)fi=(en-Kn)/(en-Lt),fi<0?fi=0:fi>1&&(fi=1),E[Js++]=zn-(zn-cu)*fi|0,E[Js++]=Ei-(Ei-na)*fi|0,E[Js++]=Pt-(Pt-Vl)*fi|0,E[Js++]=255}}function jt(f,e,n){const s=e.coords,a=e.colors;let c,u;switch(e.type){case"lattice":const h=e.verticesPerRow,g=Math.floor(s.length/h)-1,b=h-1;for(c=0;c<g;c++){let E=c*h;for(let D=0;D<b;D++,E++)pr(f,n,s[E],s[E+1],s[E+h],a[E],a[E+1],a[E+h]),pr(f,n,s[E+h+1],s[E+1],s[E+h],a[E+h+1],a[E+1],a[E+h])}break;case"triangles":for(c=0,u=s.length;c<u;c+=3)pr(f,n,s[c],s[c+1],s[c+2],a[c],a[c+1],a[c+2]);break;default:throw new Error("illegal figure")}}class On extends lo{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,n,s){const h=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),b=Math.ceil(this._bounds[2])-h,E=Math.ceil(this._bounds[3])-g,D=Math.min(Math.ceil(Math.abs(b*e[0]*1.1)),3e3),T=Math.min(Math.ceil(Math.abs(E*e[1]*1.1)),3e3),O=b/D,k=E/T,j={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-g,scaleX:1/O,scaleY:1/k},ne=s.getCanvas("mesh",D+4,T+4,!1),ue=ne.context,de=ue.createImageData(D,T);if(n){const ye=de.data;for(let Me=0,He=ye.length;Me<He;Me+=4)ye[Me]=n[0],ye[Me+1]=n[1],ye[Me+2]=n[2],ye[Me+3]=255}for(const ye of this._figures)jt(de,ye,j);return ue.putImageData(de,2,2),{canvas:ne.canvas,offsetX:h-2*O,offsetY:g-2*k,scaleX:O,scaleY:k}}getPattern(e,n,s,a){let c;if(ls(e,this._bbox),"Shading"===a)c=ze.singularValueDecompose2dScale(nn(e));else if(c=ze.singularValueDecompose2dScale(n.baseTransform),this.matrix){const h=ze.singularValueDecompose2dScale(this.matrix);c=[c[0]*h[0],c[1]*h[1]]}const u=this._createMeshCanvas(c,"Shading"===a?null:this._background,n.cachedCanvases);return"Shading"!==a&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class jn extends lo{getPattern(){return"hotpink"}}let co=(()=>{class f{static MAX_PATTERN_SIZE=3e3;constructor(n,s,a,c,u){this.operatorList=n[2],this.matrix=n[3],this.bbox=n[4],this.xstep=n[5],this.ystep=n[6],this.paintType=n[7],this.tilingType=n[8],this.color=s,this.ctx=a,this.canvasGraphicsFactory=c,this.baseTransform=u}createPatternCanvas(n){const s=this.operatorList,a=this.bbox,c=this.xstep,u=this.ystep,h=this.paintType,b=this.color,E=this.canvasGraphicsFactory;$t("TilingType: "+this.tilingType);const D=a[0],T=a[1],O=a[2],k=a[3],j=ze.singularValueDecompose2dScale(this.matrix),G=ze.singularValueDecompose2dScale(this.baseTransform),U=[j[0]*G[0],j[1]*G[1]],ne=this.getSizeAndScale(c,this.ctx.canvas.width,U[0]),ue=this.getSizeAndScale(u,this.ctx.canvas.height,U[1]),de=n.cachedCanvases.getCanvas("pattern",ne.size,ue.size,!0),ve=de.context,ye=E.createCanvasGraphics(ve);ye.groupLevel=n.groupLevel,this.setFillAndStrokeStyleToContext(ye,h,b);let Me=D,He=T,re=O,je=k;return D<0&&(Me=0,re+=Math.abs(D)),T<0&&(He=0,je+=Math.abs(T)),ve.translate(-ne.scale*Me,-ue.scale*He),ye.transform(ne.scale,0,0,ue.scale,0,0),ve.save(),this.clipBbox(ye,Me,He,re,je),ye.baseTransform=nn(ye.ctx),ye.executeOperatorList(s),ye.endDrawing(),{canvas:de.canvas,scaleX:ne.scale,scaleY:ue.scale,offsetX:Me,offsetY:He}}getSizeAndScale(n,s,a){n=Math.abs(n);const c=Math.max(f.MAX_PATTERN_SIZE,s);let u=Math.ceil(n*a);return u>=c?u=c:a=u/n,{scale:a,size:u}}clipBbox(n,s,a,c,u){n.ctx.rect(s,a,c-s,u-a),n.current.updateRectMinMax(nn(n.ctx),[s,a,c,u]),n.clip(),n.endPath()}setFillAndStrokeStyleToContext(n,s,a){const c=n.ctx,u=n.current;switch(s){case 1:const h=this.ctx;c.fillStyle=h.fillStyle,c.strokeStyle=h.strokeStyle,u.fillColor=h.fillStyle,u.strokeColor=h.strokeStyle;break;case 2:const g=ze.makeHexColor(a[0],a[1],a[2]);c.fillStyle=g,c.strokeStyle=g,u.fillColor=g,u.strokeColor=g;break;default:throw new oi(`Unsupported paint type: ${s}`)}}getPattern(n,s,a,c){let u=a;"Shading"!==c&&(u=ze.transform(u,s.baseTransform),this.matrix&&(u=ze.transform(u,this.matrix)));const h=this.createPatternCanvas(s);let g=new DOMMatrix(u);g=g.translate(h.offsetX,h.offsetY),g=g.scale(1/h.scaleX,1/h.scaleY);const b=n.createPattern(h.canvas,"repeat");return b.setTransform(g),b}}return f})();function Or({src:f,srcPos:e=0,dest:n,width:s,height:a,nonBlackColor:c=4294967295,inverseDecode:u=!1}){const h=lt.isLittleEndian?4278190080:255,[g,b]=u?[c,h]:[h,c],E=s>>3,D=7&s,T=f.length;n=new Uint32Array(n.buffer);let O=0;for(let k=0;k<a;k++){for(const G=e+E;e<G;e++){const U=e<T?f[e]:255;n[O++]=128&U?b:g,n[O++]=64&U?b:g,n[O++]=32&U?b:g,n[O++]=16&U?b:g,n[O++]=8&U?b:g,n[O++]=4&U?b:g,n[O++]=2&U?b:g,n[O++]=1&U?b:g}if(0===D)continue;const j=e<T?f[e++]:255;for(let G=0;G<D;G++)n[O++]=j&1<<7-G?b:g}return{srcPos:e,destPos:O}}class Lr{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,s){let a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,n,s)):(a=this.canvasFactory.create(n,s),this.cache[e]=a),a}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function pn(f,e,n,s,a,c,u,h,g,b){const[E,D,T,O,k,j]=nn(f);if(0===D&&0===T){const ue=Math.round(u*E+k),ve=Math.round(h*O+j),Me=Math.abs(Math.round((u+g)*E+k)-ue)||1,re=Math.abs(Math.round((h+b)*O+j)-ve)||1;return f.setTransform(Math.sign(E),0,0,Math.sign(O),ue,ve),f.drawImage(e,n,s,a,c,0,0,Me,re),f.setTransform(E,D,T,O,k,j),[Me,re]}if(0===E&&0===O){const ue=Math.round(h*T+k),ve=Math.round(u*D+j),Me=Math.abs(Math.round((h+b)*T+k)-ue)||1,re=Math.abs(Math.round((u+g)*D+j)-ve)||1;return f.setTransform(0,Math.sign(D),Math.sign(T),0,ue,ve),f.drawImage(e,n,s,a,c,0,0,re,Me),f.setTransform(E,D,T,O,k,j),[re,Me]}return f.drawImage(e,n,s,a,c,u,h,g,b),[Math.hypot(E,D)*g,Math.hypot(T,O)*b]}class gr{constructor(e,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=qe,this.textMatrixScale=1,this.fontMatrix=Ct,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,n])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,n){this.x=e,this.y=n}updatePathMinMax(e,n,s){[n,s]=ze.applyTransform([n,s],e),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,n){const s=ze.applyTransform(n,e),a=ze.applyTransform(n.slice(2),e),c=ze.applyTransform([n[0],n[3]],e),u=ze.applyTransform([n[2],n[1]],e);this.minX=Math.min(this.minX,s[0],a[0],c[0],u[0]),this.minY=Math.min(this.minY,s[1],a[1],c[1],u[1]),this.maxX=Math.max(this.maxX,s[0],a[0],c[0],u[0]),this.maxY=Math.max(this.maxY,s[1],a[1],c[1],u[1])}updateScalingPathMinMax(e,n){ze.scaleMinMax(e,n),this.minX=Math.min(this.minX,n[0]),this.minY=Math.min(this.minY,n[1]),this.maxX=Math.max(this.maxX,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(e,n,s,a,c,u,h,g,b,E){const D=ze.bezierBoundingBox(n,s,a,c,u,h,g,b,E);E||this.updateRectMinMax(e,D)}getPathBoundingBox(e="Fill",n=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===e){n||wt("Stroke bounding box must include transform.");const a=ze.singularValueDecompose2dScale(n),c=a[0]*this.lineWidth/2,u=a[1]*this.lineWidth/2;s[0]-=c,s[1]-=u,s[2]+=c,s[3]+=u}return s}updateClipFromPath(){const e=ze.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e="Fill",n=null){return ze.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function At(f,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void f.putImageData(e,0,0);const n=e.height,s=e.width,a=n%16,c=(n-a)/16,u=0===a?c:c+1,h=f.createImageData(s,16);let b,g=0;const E=e.data,D=h.data;let T,O,k,j;if(e.kind===et.GRAYSCALE_1BPP){const G=E.byteLength,U=new Uint32Array(D.buffer,0,D.byteLength>>2),ne=U.length,ue=s+7>>3,de=4294967295,ve=lt.isLittleEndian?4278190080:255;for(T=0;T<u;T++){for(k=T<c?16:a,b=0,O=0;O<k;O++){const ye=G-g;let Me=0;const He=ye>ue?s:8*ye-7,re=-8&He;let je=0,nt=0;for(;Me<re;Me+=8)nt=E[g++],U[b++]=128&nt?de:ve,U[b++]=64&nt?de:ve,U[b++]=32&nt?de:ve,U[b++]=16&nt?de:ve,U[b++]=8&nt?de:ve,U[b++]=4&nt?de:ve,U[b++]=2&nt?de:ve,U[b++]=1&nt?de:ve;for(;Me<He;Me++)0===je&&(nt=E[g++],je=128),U[b++]=nt&je?de:ve,je>>=1}for(;b<ne;)U[b++]=0;f.putImageData(h,0,16*T)}}else if(e.kind===et.RGBA_32BPP){for(O=0,j=16*s*4,T=0;T<c;T++)D.set(E.subarray(g,g+j)),g+=j,f.putImageData(h,0,O),O+=16;T<u&&(j=s*a*4,D.set(E.subarray(g,g+j)),f.putImageData(h,0,O))}else{if(e.kind!==et.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(k=16,j=s*k,T=0;T<u;T++){for(T>=c&&(k=a,j=s*k),b=0,O=j;O--;)D[b++]=E[g++],D[b++]=E[g++],D[b++]=E[g++],D[b++]=255;f.putImageData(h,0,16*T)}}}function qi(f,e){if(e.bitmap)return void f.drawImage(e.bitmap,0,0);const n=e.height,s=e.width,a=n%16,c=(n-a)/16,u=0===a?c:c+1,h=f.createImageData(s,16);let g=0;const b=e.data,E=h.data;for(let D=0;D<u;D++){const T=D<c?16:a;({srcPos:g}=Or({src:b,srcPos:g,dest:E,width:s,height:T,nonBlackColor:0})),f.putImageData(h,0,16*D)}}function us(f,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)void 0!==f[s]&&(e[s]=f[s]);void 0!==f.setLineDash&&(e.setLineDash(f.getLineDash()),e.lineDashOffset=f.lineDashOffset)}function sr(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",void 0!==f.setLineDash&&(f.setLineDash([]),f.lineDashOffset=0),!st){const{filter:e}=f;"none"!==e&&""!==e&&(f.filter="none")}}function gn(f,e){if(e)return!0;const n=ze.singularValueDecompose2dScale(f);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Qe.PDF_TO_CSS_UNITS);return n[0]<=s&&n[1]<=s}const mr=["butt","round","square"],zr=["miter","round","bevel"],Xi={},Nr={};class vr{constructor(e,n,s,a,c,{optionalContentConfig:u,markedContentStack:h=null},g,b){this.ctx=e,this.current=new gr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=a,this.filterFactory=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new Lr(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=b,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:s=!1,background:a=null}){const c=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,c,u),this.ctx.fillStyle=h,s){const g=this.cachedCanvases.getCanvas("transparent",c,u);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...nn(this.compositeCtx))}this.ctx.save(),sr(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=nn(this.ctx)}executeOperatorList(e,n,s,a){const c=e.argsArray,u=e.fnArray;let h=n||0;const g=c.length;if(g===h)return h;const b=g-h>10&&"function"==typeof s,E=b?Date.now()+15:0;let D=0;const T=this.commonObjs,O=this.objs;let k;for(;;){if(void 0!==a&&h===a.nextBreakPoint)return a.breakIt(h,s),h;if(k=u[h],k!==De.dependency)this[k].apply(this,c[h]);else for(const j of c[h]){const G=j.startsWith("g_")?T:O;if(!G.has(j))return G.get(j,s),h}if(h++,h===g)return h;if(b&&++D>10){if(Date.now()>E)return s(),h;D=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const s=e.width,a=e.height;let E,D,c=Math.max(Math.hypot(n[0],n[1]),1),u=Math.max(Math.hypot(n[2],n[3]),1),h=s,g=a,b="prescale1";for(;c>2&&h>1||u>2&&g>1;){let T=h,O=g;c>2&&h>1&&(T=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),c/=h/T),u>2&&g>1&&(O=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,u/=g/O),E=this.cachedCanvases.getCanvas(b,T,O),D=E.context,D.clearRect(0,0,T,O),D.drawImage(e,0,0,h,g,0,0,T,O),e=E.canvas,h=T,g=O,b="prescale1"===b?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:g}}_createMaskCanvas(e){const n=this.ctx,{width:s,height:a}=e,c=this.current.fillColor,u=this.current.patternFill,h=nn(n);let g,b,E,D;if((e.bitmap||e.data)&&e.count>1){const He=e.bitmap||e.data.buffer;b=JSON.stringify(u?h:[h.slice(0,4),c]),g=this._cachedBitmapsMap.get(He),g||(g=new Map,this._cachedBitmapsMap.set(He,g));const re=g.get(b);if(re&&!u)return{canvas:re,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};E=re}E||(D=this.cachedCanvases.getCanvas("maskCanvas",s,a),qi(D.context,e));let T=ze.transform(h,[1/s,0,0,-1/a,0,0]);T=ze.transform(T,[1,0,0,1,0,-a]);const[O,k,j,G]=ze.getAxialAlignedBoundingBox([0,0,s,a],T),U=Math.round(j-O)||1,ne=Math.round(G-k)||1,ue=this.cachedCanvases.getCanvas("fillCanvas",U,ne),de=ue.context,ve=O,ye=k;de.translate(-ve,-ye),de.transform(...T),E||(E=this._scaleImage(D.canvas,Si(de)),E=E.img,g&&u&&g.set(b,E)),de.imageSmoothingEnabled=gn(nn(de),e.interpolate),pn(de,E,0,0,E.width,E.height,0,0,s,a),de.globalCompositeOperation="source-in";const Me=ze.transform(Si(de),[1,0,0,1,-ve,-ye]);return de.fillStyle=u?c.getPattern(n,this,Me,"Fill"):c,de.fillRect(0,0,s,a),g&&!u&&(this.cachedCanvases.delete("fillCanvas"),g.set(b,ue.canvas)),{canvas:ue.canvas,offsetX:Math.round(ve),offsetY:Math.round(ye)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=mr[e]}setLineJoin(e){this.ctx.lineJoin=zr[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,s]of e)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=a.context;const c=this.ctx;c.setTransform(...nn(this.suspendedCtx)),us(this.suspendedCtx,c),function Hn(f,e){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){e.save(),this.__originalSave()},f.restore=function(){e.restore(),this.__originalRestore()},f.translate=function(s,a){e.translate(s,a),this.__originalTranslate(s,a)},f.scale=function(s,a){e.scale(s,a),this.__originalScale(s,a)},f.transform=function(s,a,c,u,h,g){e.transform(s,a,c,u,h,g),this.__originalTransform(s,a,c,u,h,g)},f.setTransform=function(s,a,c,u,h,g){e.setTransform(s,a,c,u,h,g),this.__originalSetTransform(s,a,c,u,h,g)},f.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},f.rotate=function(s){e.rotate(s),this.__originalRotate(s)},f.clip=function(s){e.clip(s),this.__originalClip(s)},f.moveTo=function(n,s){e.moveTo(n,s),this.__originalMoveTo(n,s)},f.lineTo=function(n,s){e.lineTo(n,s),this.__originalLineTo(n,s)},f.bezierCurveTo=function(n,s,a,c,u,h){e.bezierCurveTo(n,s,a,c,u,h),this.__originalBezierCurveTo(n,s,a,c,u,h)},f.rect=function(n,s,a,c){e.rect(n,s,a,c),this.__originalRect(n,s,a,c)},f.closePath=function(){e.closePath(),this.__originalClosePath()},f.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),us(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,n,s,a){const c=a[0],u=a[1],h=a[2]-c,g=a[3]-u;0===h||0===g||(this.genericComposeSMask(n.context,s,h,g,n.subtype,n.backdrop,n.transferMap,c,u,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,n,s,a,c,u,h,g,b,E,D){let T=e.canvas,O=g-E,k=b-D;if(u)if(O<0||k<0||O+s>T.width||k+a>T.height){const G=this.cachedCanvases.getCanvas("maskExtension",s,a),U=G.context;U.drawImage(T,-O,-k),u.some(ne=>0!==ne)&&(U.globalCompositeOperation="destination-atop",U.fillStyle=ze.makeHexColor(...u),U.fillRect(0,0,s,a),U.globalCompositeOperation="source-over"),T=G.canvas,O=k=0}else if(u.some(G=>0!==G)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const G=new Path2D;G.rect(O,k,s,a),e.clip(G),e.globalCompositeOperation="destination-atop",e.fillStyle=ze.makeHexColor(...u),e.fillRect(O,k,s,a),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),"Alpha"===c&&h?n.filter=this.filterFactory.addAlphaFilter(h):"Luminosity"===c&&(n.filter=this.filterFactory.addLuminosityFilter(h));const j=new Path2D;j.rect(g,b,s,a),n.clip(j),n.globalCompositeOperation="destination-in",n.drawImage(T,O,k,s,a,g,b,s,a),n.restore()}save(){this.inSMaskMode?(us(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),us(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,n,s,a,c,u){this.ctx.transform(e,n,s,a,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,s){const a=this.ctx,c=this.current;let g,b,u=c.x,h=c.y;const E=nn(a),D=0===E[0]&&0===E[3]||0===E[1]&&0===E[2],T=D?s.slice(0):null;for(let O=0,k=0,j=e.length;O<j;O++)switch(0|e[O]){case De.rectangle:u=n[k++],h=n[k++];const G=n[k++],U=n[k++],ne=u+G,ue=h+U;a.moveTo(u,h),0===G||0===U?a.lineTo(ne,ue):(a.lineTo(ne,h),a.lineTo(ne,ue),a.lineTo(u,ue)),D||c.updateRectMinMax(E,[u,h,ne,ue]),a.closePath();break;case De.moveTo:u=n[k++],h=n[k++],a.moveTo(u,h),D||c.updatePathMinMax(E,u,h);break;case De.lineTo:u=n[k++],h=n[k++],a.lineTo(u,h),D||c.updatePathMinMax(E,u,h);break;case De.curveTo:g=u,b=h,u=n[k+4],h=n[k+5],a.bezierCurveTo(n[k],n[k+1],n[k+2],n[k+3],u,h),c.updateCurvePathMinMax(E,g,b,n[k],n[k+1],n[k+2],n[k+3],u,h,T),k+=6;break;case De.curveTo2:g=u,b=h,a.bezierCurveTo(u,h,n[k],n[k+1],n[k+2],n[k+3]),c.updateCurvePathMinMax(E,g,b,u,h,n[k],n[k+1],n[k+2],n[k+3],T),u=n[k+2],h=n[k+3],k+=4;break;case De.curveTo3:g=u,b=h,u=n[k+2],h=n[k+3],a.bezierCurveTo(n[k],n[k+1],u,h,u,h),c.updateCurvePathMinMax(E,g,b,n[k],n[k+1],u,h,u,h,T),k+=4;break;case De.closePath:a.closePath()}D&&c.updateScalingPathMinMax(E,T),c.setCurrentPoint(u,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const n=this.ctx,s=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof s&&s?.getPattern?(n.save(),n.strokeStyle=s.getPattern(n,this,Si(n),"Stroke"),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const n=this.ctx,s=this.current.fillColor;let c=!1;this.current.patternFill&&(n.save(),n.fillStyle=s.getPattern(n,this,Si(n),"Fill"),c=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==u&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),c&&n.restore(),e&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Xi}eoClip(){this.pendingClip=Nr}beginText(){this.current.textMatrix=qe,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(void 0!==e){n.save(),n.beginPath();for(const s of e)n.setTransform(...s.transform),n.translate(s.x,s.y),s.addToPath(n,s.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}else n.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){const s=this.commonObjs.get(e),a=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=s.fontMatrix||Ct,(0===a.fontMatrix[0]||0===a.fontMatrix[3])&&at("Invalid font matrix for font "+e),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const c=s.loadedName||"sans-serif",u=s.systemFontInfo?.css||`"${c}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const g=s.italic?"italic":"normal";let b=n;n<16?b=16:n>100&&(b=100),this.current.fontSizeScale=n/b,this.ctx.font=`${g} ${h} ${b}px ${u}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e,n,s,a,c,u){this.current.textMatrix=[e,n,s,a,c,u],this.current.textMatrixScale=Math.hypot(e,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,s,a){const c=this.ctx,u=this.current,h=u.font,g=u.textRenderingMode,b=u.fontSize/u.fontSizeScale,E=3&g,D=!!(4&g),T=u.patternFill&&!h.missingFile;let O;(h.disableFontFace||D||T)&&(O=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||T?(c.save(),c.translate(n,s),c.beginPath(),O(c,b),a&&c.setTransform(...a),(0===E||2===E)&&c.fill(),(1===E||2===E)&&c.stroke(),c.restore()):((0===E||2===E)&&c.fillText(e,n,s),(1===E||2===E)&&c.strokeText(e,n,s)),D&&(this.pendingTextPaths||=[]).push({transform:nn(c),x:n,y:s,fontSize:b,addToPath:O})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<n.length;a+=4)if(n[a]>0&&n[a]<255){s=!0;break}return pt(this,"isFontSubpixelAAEnabled",s)}showText(e){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(e);const a=n.fontSize;if(0===a)return;const c=this.ctx,u=n.fontSizeScale,h=n.charSpacing,g=n.wordSpacing,b=n.fontDirection,E=n.textHScale*b,D=e.length,T=s.vertical,O=T?1:-1,k=s.defaultVMetrics,j=a*n.fontMatrix[0],G=0===n.textRenderingMode&&!s.disableFontFace&&!n.patternFill;let U;if(c.save(),c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),c.scale(E,b>0?-1:1),n.patternFill){c.save();const ye=n.fillColor.getPattern(c,this,Si(c),"Fill");U=nn(c),c.restore(),c.fillStyle=ye}let ne=n.lineWidth;const ue=n.textMatrixScale;if(0===ue||0===ne){const ye=3&n.textRenderingMode;(1===ye||2===ye)&&(ne=this.getSinglePixelWidth())}else ne/=ue;if(1!==u&&(c.scale(u,u),ne/=u),c.lineWidth=ne,s.isInvalidPDFjsFont){const ye=[];let Me=0;for(const He of e)ye.push(He.unicode),Me+=He.width;return c.fillText(ye.join(""),0,0),n.x+=Me*j*E,c.restore(),void this.compose()}let ve,de=0;for(ve=0;ve<D;++ve){const ye=e[ve];if("number"==typeof ye){de+=O*ye*a/1e3;continue}let Me=!1;const He=(ye.isSpace?g:0)+h,re=ye.fontChar,je=ye.accent;let nt,Jt,sn=ye.width;if(T){const zn=ye.vmetric||k,Ei=-(ye.vmetric?zn[1]:.5*sn)*j;sn=zn?-zn[0]:sn,nt=Ei/u,Jt=(de+zn[2]*j)/u}else nt=de/u,Jt=0;if(s.remeasure&&sn>0){const zn=1e3*c.measureText(re).width/a*u;if(sn<zn&&this.isFontSubpixelAAEnabled){const Ei=sn/zn;Me=!0,c.save(),c.scale(Ei,1),nt/=Ei}else sn!==zn&&(nt+=(sn-zn)/2e3*a/u)}this.contentVisible&&(ye.isInFont||s.missingFile)&&(G&&!je?c.fillText(re,nt,Jt):(this.paintChar(re,nt,Jt,U),je&&this.paintChar(je.fontChar,nt+a*je.offset.x/u,Jt-a*je.offset.y/u,U))),de+=T?sn*j-He*b:sn*j+He*b,Me&&c.restore()}T?n.y-=de:n.x+=de*E,c.restore(),this.compose()}showType3Text(e){const n=this.ctx,s=this.current,a=s.font,c=s.fontSize,u=s.fontDirection,h=a.vertical?1:-1,g=s.charSpacing,b=s.wordSpacing,E=s.textHScale*u,D=s.fontMatrix||Ct,T=e.length;let k,j,G,U;if(3!==s.textRenderingMode&&0!==c){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...s.textMatrix),n.translate(s.x,s.y),n.scale(E,u),k=0;k<T;++k){if(j=e[k],"number"==typeof j){U=h*j*c/1e3,this.ctx.translate(U,0),s.x+=U*E;continue}const ne=(j.isSpace?b:0)+g,ue=a.charProcOperatorList[j.operatorListId];ue?(this.contentVisible&&(this.processingType3=j,this.save(),n.scale(c,c),n.transform(...D),this.executeOperatorList(ue),this.restore()),G=ze.applyTransform([j.width,0],D)[0]*c+ne,n.translate(G,0),s.x+=G*E):at(`Type3 character "${j.operatorListId}" is not available.`)}n.restore(),this.processingType3=null}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,s,a,c,u){this.ctx.rect(s,a,c-s,u-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let n;if("TilingPattern"===e[0]){const s=e[1],a=this.baseTransform||nn(this.ctx);n=new co(e,s,this.ctx,{createCanvasGraphics:u=>new vr(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},a)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,n,s){this.ctx.strokeStyle=this.current.strokeColor=ze.makeHexColor(e,n,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,n,s){this.ctx.fillStyle=this.current.fillColor=ze.makeHexColor(e,n,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=function li(f){switch(f[0]){case"RadialAxial":return new Ro(f);case"Mesh":return new On(f);case"Dummy":return new jn}throw new Error(`Unknown IR type: ${f[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(e);n.fillStyle=s.getPattern(n,this,Si(n),"Shading");const a=Si(n);if(a){const{width:c,height:u}=n.canvas,[h,g,b,E]=ze.getAxialAlignedBoundingBox([0,0,c,u],a);this.ctx.fillRect(h,g,b-h,E-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){wt("Should not call beginInlineImage")}beginImageData(){wt("Should not call beginImageData")}paintFormXObjectBegin(e,n){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=nn(this.ctx),n)&&(this.ctx.rect(n[0],n[1],n[2]-n[0],n[3]-n[1]),this.current.updateRectMinMax(nn(this.ctx),n),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||$t("TODO: Support non-isolated groups."),e.knockout&&at("Knockout groups not supported.");const s=nn(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=ze.getAxialAlignedBoundingBox(e.bbox,nn(n));a=ze.intersect(a,[0,0,n.canvas.width,n.canvas.height])||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),g=Math.max(Math.ceil(a[2])-u,1),b=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,g,b]);let E="groupAt"+this.groupLevel;e.smask&&(E+="_smask_"+this.smaskCounter++%2);const D=this.cachedCanvases.getCanvas(E,g,b),T=D.context;T.translate(-u,-h),T.transform(...s),e.smask?this.smaskStack.push({canvas:D.canvas,context:T,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),us(n,T),this.ctx=T,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=nn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const c=ze.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,n,s,a,c){if(this.#e(),sr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(c&&this.annotationCanvasMap){(s=s.slice())[4]-=n[0],s[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=u,n[3]=h;const[g,b]=ze.singularValueDecompose2dScale(nn(this.ctx)),{viewportScale:E}=this,D=Math.ceil(u*this.outputScaleX*E),T=Math.ceil(h*this.outputScaleY*E);this.annotationCanvas=this.canvasFactory.create(D,T);const{canvas:O,context:k}=this.annotationCanvas;this.annotationCanvasMap.set(e,O),this.annotationCanvas.savedCtx=this.ctx,this.ctx=k,this.ctx.save(),this.ctx.setTransform(g,0,0,-b,0,h*b),sr(this.ctx)}else sr(this.ctx),this.ctx.rect(n[0],n[1],u,h),this.ctx.clip(),this.endPath()}this.current=new gr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;(e=this.getObject(e.data,e)).count=n;const s=this.ctx,a=this.processingType3;if(a&&(void 0===a.compiled&&(a.compiled=function Ki(f){const{width:e,height:n}=f;if(e>1e3||n>1e3)return null;const a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=e+1;let h,g,b,u=new Uint8Array(c*(n+1));const E=e+7&-8;let D=new Uint8Array(E*n),T=0;for(const U of f.data){let ne=128;for(;ne>0;)D[T++]=U&ne?0:255,ne>>=1}let O=0;for(T=0,0!==D[T]&&(u[0]=1,++O),g=1;g<e;g++)D[T]!==D[T+1]&&(u[g]=D[T]?2:1,++O),T++;for(0!==D[T]&&(u[g]=2,++O),h=1;h<n;h++){T=h*E,b=h*c,D[T-E]!==D[T]&&(u[b]=D[T]?1:8,++O);let U=(D[T]?4:0)+(D[T-E]?8:0);for(g=1;g<e;g++)U=(U>>2)+(D[T+1]?4:0)+(D[T-E+1]?8:0),a[U]&&(u[b+g]=a[U],++O),T++;if(D[T-E]!==D[T]&&(u[b+g]=D[T]?2:4,++O),O>1e3)return null}for(T=E*(n-1),b=h*c,0!==D[T]&&(u[b]=8,++O),g=1;g<e;g++)D[T]!==D[T+1]&&(u[b+g]=D[T]?4:8,++O),T++;if(0!==D[T]&&(u[b+g]=4,++O),O>1e3)return null;const k=new Int32Array([0,c,-1,0,-c,0,0,0,1]),j=new Path2D;for(h=0;O&&h<=n;h++){let U=h*c;const ne=U+e;for(;U<ne&&!u[U];)U++;if(U===ne)continue;j.moveTo(U%c,h);const ue=U;let de=u[U];do{const ve=k[de];do{U+=ve}while(!u[U]);const ye=u[U];5!==ye&&10!==ye?(de=ye,u[U]=0):(de=ye&51*de>>4,u[U]&=de>>2|de<<2),j.lineTo(U%c,U/c|0),u[U]||--O}while(ue!==U);--h}return D=null,u=null,function(U){U.save(),U.scale(1/e,-1/n),U.translate(0,-n),U.fill(j),U.beginPath(),U.restore()}}(e)),a.compiled))return void a.compiled(s);const c=this._createMaskCanvas(e),u=c.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(u,c.offsetX,c.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,s=0,a=0,c,u){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const g=nn(h);h.transform(n,s,a,c,0,0);const b=this._createMaskCanvas(e);h.setTransform(1,0,0,1,b.offsetX-g[4],b.offsetY-g[5]);for(let E=0,D=u.length;E<D;E+=2){const T=ze.transform(g,[n,s,a,c,u[E],u[E+1]]),[O,k]=ze.applyTransform([0,0],T);h.drawImage(b.canvas,O,k)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;for(const c of e){const{data:u,width:h,height:g,transform:b}=c,E=this.cachedCanvases.getCanvas("maskCanvas",h,g),D=E.context;D.save(),qi(D,this.getObject(u,c)),D.globalCompositeOperation="source-in",D.fillStyle=a?s.getPattern(D,this,Si(n),"Fill"):s,D.fillRect(0,0,h,g),D.restore(),n.save(),n.transform(...b),n.scale(1,-1),pn(n,E.canvas,0,0,h,g,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);n?this.paintInlineImageXObject(n):at("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,n,s,a){if(!this.contentVisible)return;const c=this.getObject(e);if(!c)return void at("Dependent image isn't ready yet");const u=c.width,h=c.height,g=[];for(let b=0,E=a.length;b<E;b+=2)g.push({transform:[n,0,0,s,a[b],a[b+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(c,g)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:n,width:s,height:a}=e,c=this.cachedCanvases.getCanvas("inlineImage",s,a),u=c.context;return u.filter=this.current.transferMaps,u.drawImage(n,0,0),u.filter="none",c.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,s=e.height,a=this.ctx;if(this.save(),!st){const{filter:h}=a;"none"!==h&&""!==h&&(a.filter="none")}let c;if(a.scale(1/n,-1/s),e.bitmap)c=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)c=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,s).context;At(g,e),c=this.applyTransferMapsToCanvas(g)}const u=this._scaleImage(c,Si(a));a.imageSmoothingEnabled=gn(nn(a),e.interpolate),pn(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const s=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const g=this.cachedCanvases.getCanvas("inlineImage",e.width,e.height).context;At(g,e),a=this.applyTransferMapsToCanvas(g)}for(const c of n)s.save(),s.transform(...c.transform),s.scale(1,-1),pn(s,a,c.x,c.y,c.w,c.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(n)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===Nr?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=nn(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),a=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:n,b:s,c:a,d:c}=this.ctx.getTransform();let u,h;if(0===s&&0===a){const g=Math.abs(n),b=Math.abs(c);if(g===b)if(0===e)u=h=1/g;else{const E=g*e;u=h=E<1?1/E:1}else if(0===e)u=1/g,h=1/b;else{const E=g*e,D=b*e;u=E<1?1/E:1,h=D<1?1/D:1}}else{const g=Math.abs(n*c-s*a),b=Math.hypot(n,s),E=Math.hypot(a,c);if(0===e)u=E/g,h=b/g;else{const D=e*g;u=E>D?E/D:1,h=b>D?b/D:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:n}=this,{lineWidth:s}=this.current,[a,c]=this.getScaleForStroking();if(n.lineWidth=s||1,1===a&&1===c)return void n.stroke();const u=n.getLineDash();if(e&&n.save(),n.scale(a,c),u.length>0){const h=Math.max(a,c);n.setLineDash(u.map(g=>g/h)),n.lineDashOffset/=h}n.stroke(),e&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const f in De)void 0!==vr.prototype[f]&&(vr.prototype[De[f]]=vr.prototype[f]);class ti{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}function Xn(f){switch(f instanceof Error||"object"==typeof f&&null!==f||wt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new gt(f.message);case"MissingPDFException":return new un(f.message);case"PasswordException":return new tt(f.message,f.code);case"UnexpectedResponseException":return new Wn(f.message,f.status);case"UnknownErrorException":return new Li(f.message,f.details);default:return new Li(f.message,f.toString())}}class Ot{constructor(e,n,s){this.sourceName=e,this.targetName=n,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const c=a.data;if(c.targetName!==this.sourceName)return;if(c.stream)return void this.#t(c);if(c.callback){const h=c.callbackId,g=this.callbackCapabilities[h];if(!g)throw new Error(`Cannot resolve callback ${h}`);if(delete this.callbackCapabilities[h],1===c.callback)g.resolve(c.data);else{if(2!==c.callback)throw new Error("Unexpected callback case");g.reject(Xn(c.reason))}return}const u=this.actionHandler[c.action];if(!u)throw new Error(`Unknown action from worker: ${c.action}`);if(c.callbackId){const h=this.sourceName,g=c.sourceName;new Promise(function(b){b(u(c.data))}).then(function(b){s.postMessage({sourceName:h,targetName:g,callback:1,callbackId:c.callbackId,data:b})},function(b){s.postMessage({sourceName:h,targetName:g,callback:2,callbackId:c.callbackId,reason:Xn(b)})})}else c.streamId?this.#e(c):u(c.data)},s.addEventListener("message",this._onComObjOnMessage)}on(e,n){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=n}send(e,n,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},s)}sendWithPromise(e,n,s){const a=this.callbackId++,c=Promise.withResolvers();this.callbackCapabilities[a]=c;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:n},s)}catch(u){c.reject(u)}return c.promise}sendWithStream(e,n,s,a){const c=this.streamId++,u=this.sourceName,h=this.targetName,g=this.comObj;return new ReadableStream({start:b=>{const E=Promise.withResolvers();return this.streamControllers[c]={controller:b,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:u,targetName:h,action:e,streamId:c,data:n,desiredSize:b.desiredSize},a),E.promise},pull:b=>{const E=Promise.withResolvers();return this.streamControllers[c].pullCall=E,g.postMessage({sourceName:u,targetName:h,stream:6,streamId:c,desiredSize:b.desiredSize}),E.promise},cancel:b=>{bt(b instanceof Error,"cancel must have a valid reason");const E=Promise.withResolvers();return this.streamControllers[c].cancelCall=E,this.streamControllers[c].isClosed=!0,g.postMessage({sourceName:u,targetName:h,stream:1,streamId:c,reason:Xn(b)}),E.promise}},s)}#e(e){const n=e.streamId,s=this.sourceName,a=e.sourceName,c=this.comObj,u=this,h=this.actionHandler[e.action],g={enqueue(b,E=1,D){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=E,T>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),c.postMessage({sourceName:s,targetName:a,stream:4,streamId:n,chunk:b},D)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:s,targetName:a,stream:3,streamId:n}),delete u.streamSinks[n])},error(b){bt(b instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,c.postMessage({sourceName:s,targetName:a,stream:5,streamId:n,reason:Xn(b)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[n]=g,new Promise(function(b){b(h(e.data,g))}).then(function(){c.postMessage({sourceName:s,targetName:a,stream:8,streamId:n,success:!0})},function(b){c.postMessage({sourceName:s,targetName:a,stream:8,streamId:n,reason:Xn(b)})})}#t(e){const n=e.streamId,s=this.sourceName,a=e.sourceName,c=this.comObj,u=this.streamControllers[n],h=this.streamSinks[n];switch(e.stream){case 8:e.success?u.startCall.resolve():u.startCall.reject(Xn(e.reason));break;case 7:e.success?u.pullCall.resolve():u.pullCall.reject(Xn(e.reason));break;case 6:if(!h){c.postMessage({sourceName:s,targetName:a,stream:7,streamId:n,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,new Promise(function(g){g(h.onPull?.())}).then(function(){c.postMessage({sourceName:s,targetName:a,stream:7,streamId:n,success:!0})},function(g){c.postMessage({sourceName:s,targetName:a,stream:7,streamId:n,reason:Xn(g)})});break;case 4:if(bt(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case 3:if(bt(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),this.#n(u,n);break;case 5:bt(u,"error should have stream controller"),u.controller.error(Xn(e.reason)),this.#n(u,n);break;case 2:e.success?u.cancelCall.resolve():u.cancelCall.reject(Xn(e.reason)),this.#n(u,n);break;case 1:if(!h)break;new Promise(function(g){g(h.onCancel?.(Xn(e.reason)))}).then(function(){c.postMessage({sourceName:s,targetName:a,stream:2,streamId:n,success:!0})},function(g){c.postMessage({sourceName:s,targetName:a,stream:2,streamId:n,reason:Xn(g)})}),h.sinkCapability.reject(Xn(e.reason)),h.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}#n(e,n){var s=this;return(0,q.Z)(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete s.streamControllers[n]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class pc{#e;#t;constructor({parsedData:e,rawData:n}){this.#e=e,this.#t=n}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return Je(this.#e)}has(e){return this.#e.has(e)}}const yr=Symbol("INTERNAL");class Oo{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:n,intent:s,usage:a}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=n,this.intent=s,this.usage=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:n}=this.usage;return this.#e?"OFF"!==n?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,n,s=!1){e!==yr&&wt("Internal method `_setVisible` called."),this.#n=s,this.#i=n}}class Zi{#e=null;#t=new Map;#n=null;#i=null;constructor(e,n=2){if(this.renderingIntent=n,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const s of e.groups)this.#t.set(s.id,new Oo(n,s));if("OFF"===e.baseState)for(const s of this.#t.values())s._setVisible(yr,!1);for(const s of e.on)this.#t.get(s)._setVisible(yr,!0);for(const s of e.off)this.#t.get(s)._setVisible(yr,!1);this.#n=this.getHash()}}#r(e){const n=e.length;if(n<2)return!0;const s=e[0];for(let a=1;a<n;a++){const c=e[a];let u;if(Array.isArray(c))u=this.#r(c);else{if(!this.#t.has(c))return at(`Optional content group not found: ${c}`),!0;u=this.#t.get(c).visible}switch(s){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return"And"===s}isVisible(e){if(0===this.#t.size)return!0;if(!e)return $t("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(at(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#r(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const n of e.ids){if(!this.#t.has(n))return at(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}if("AllOn"===e.policy){for(const n of e.ids){if(!this.#t.has(n))return at(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}if("AnyOff"===e.policy){for(const n of e.ids){if(!this.#t.has(n))return at(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}if("AllOff"===e.policy){for(const n of e.ids){if(!this.#t.has(n))return at(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return at(`Unknown optional content policy ${e.policy}.`),!0}return at(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0){const s=this.#t.get(e);s?(s._setVisible(yr,!!n,!0),this.#e=null):at(`Optional content group not found: ${e}`)}setOCGState({state:e}){let s;for(const a of e){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const c=this.#t.get(a);if(c)switch(s){case"ON":c._setVisible(yr,!0);break;case"OFF":c._setVisible(yr,!1);break;case"Toggle":c._setVisible(yr,!c.visible)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Je(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new $r;for(const[n,s]of this.#t)e.update(`${n}:${s.visible}`);return this.#e=e.hexdigest()}}class Wr{constructor(e,{disableRange:n=!1,disableStream:s=!1}){bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:c,progressiveDone:u,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,c?.length>0){const g=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((g,b)=>{this._onReceiveData({begin:g,chunk:b})}),e.addProgressListener((g,b)=>{this._onProgress({loaded:g,total:b})}),e.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const s=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s):bt(this._rangeReaders.some(function(c){return c._begin===e&&(c._enqueue(s),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ni(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=new Fs(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class ni{constructor(e,n,s=!1,a=null){this._stream=e,this._done=s||!1,this._filename=Yt(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return(0,q.Z)(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return e._requests.push(n),n.promise})()}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Fs{constructor(e,n,s){this._stream=e,this._begin=n,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return(0,q.Z)(function*(){if(e._queuedChunk){const s=e._queuedChunk;return e._queuedChunk=null,{value:s,done:!1}}if(e._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return e._requests.push(n),n.promise})()}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ha({getResponseHeader:f,isHttp:e,rangeChunkSize:n,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(f("Content-Length"),10);return!Number.isInteger(c)||(a.suggestedLength=c,c<=2*n)||s||!e||"bytes"!==f("Accept-Ranges")||"identity"!==(f("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a}function Zn(f){const e=f("Content-Disposition");if(e){let n=function An(f){let e=!0,n=s("filename\\*","i").exec(f);if(n){n=n[1];let E=h(n);return E=unescape(E),E=g(E),E=b(E),c(E)}if(n=function u(E){const D=[];let T;const O=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(T=O.exec(E));){let[,j,G,U]=T;if(j=parseInt(j,10),j in D){if(0===j)break}else D[j]=[G,U]}const k=[];for(let j=0;j<D.length&&j in D;++j){let[G,U]=D[j];U=h(U),G&&(U=unescape(U),0===j&&(U=g(U))),k.push(U)}return k.join("")}(f),n)return c(b(n));if(n=s("filename","i").exec(f),n){n=n[1];let E=h(n);return E=b(E),c(E)}function s(E,D){return new RegExp("(?:^|;)\\s*"+E+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',D)}function a(E,D){if(E){if(!/^[\x00-\xFF]+$/.test(D))return D;try{const T=new TextDecoder(E,{fatal:!0}),O=Ne(D);D=T.decode(O),e=!1}catch{}}return D}function c(E){return e&&/[\x80-\xff]/.test(E)&&(E=a("utf-8",E),e&&(E=a("iso-8859-1",E))),E}function h(E){if(E.startsWith('"')){const D=E.slice(1).split('\\"');for(let T=0;T<D.length;++T){const O=D[T].indexOf('"');-1!==O&&(D[T]=D[T].slice(0,O),D.length=T+1),D[T]=D[T].replaceAll(/\\(.)/g,"$1")}E=D.join('"')}return E}function g(E){const D=E.indexOf("'");return-1===D?E:a(E.slice(0,D),E.slice(D+1).replace(/^[^']*'/,""))}function b(E){return!E.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(E)?E:E.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(D,T,O,k){if("q"===O||"Q"===O)return a(T,k=(k=k.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(j,G){return String.fromCharCode(parseInt(G,16))}));try{k=atob(k)}catch{}return a(T,k)})}return""}(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(Yt(n))return n}return null}function Yn(f,e){return 404===f||0===f&&e.startsWith("file:")?new un('Missing PDF "'+e+'".'):new Wn(`Unexpected server response (${f}) while retrieving PDF "${e}".`,f)}function Bs(f){return 200===f||206===f}function ji(f,e,n){return{method:"GET",headers:f,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ds(f){const e=new Headers;for(const n in f){const s=f[n];void 0!==s&&e.append(n,s)}return e}function Ii(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(at(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class br{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new js(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=new En(this,e,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class js{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._headers=ds(this._stream.httpHeaders);const s=n.url;fetch(s,ji(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!Bs(a.status))throw Yn(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const c=g=>a.headers.get(g),{allowRangeRequests:u,suggestedLength:h}=ha({getResponseHeader:c,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Zn(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new gt("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,q.Z)(function*(){yield e._headersCapability.promise;const{value:n,done:s}=yield e._reader.read();return s?{value:n,done:s}:(e._loaded+=n.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:Ii(n),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class En{constructor(e,n,s){this._stream=e,this._reader=null,this._loaded=0;const a=e.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=ds(this._stream.httpHeaders),this._headers.append("Range",`bytes=${n}-${s-1}`);const c=a.url;fetch(c,ji(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!Bs(u.status))throw Yn(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,q.Z)(function*(){yield e._readCapability.promise;const{value:n,done:s}=yield e._reader.read();return s?{value:n,done:s}:(e._loaded+=n.byteLength,e.onProgress?.({loaded:e._loaded}),{value:Ii(n),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class gc{constructor(e,n={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,n,s){const a={begin:e,end:n};for(const c in s)a[c]=s[c];return this.request(a)}requestFull(e){return this.request(e)}request(e){const n=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const c in this.httpHeaders){const u=this.httpHeaders[c];void 0!==u&&n.setRequestHeader(c,u)}return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),a.expectedStatus=206):a.expectedStatus=200,n.responseType="arraybuffer",e.onError&&(n.onerror=function(c){e.onError(n.status)}),n.onreadystatechange=this.onStateChange.bind(this,s),n.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=e.onHeadersReceived,a.onDone=e.onDone,a.onError=e.onError,a.onProgress=e.onProgress,n.send(null),s}onProgress(e,n){const s=this.pendingRequests[e];s&&s.onProgress?.(n)}onStateChange(e,n){const s=this.pendingRequests[e];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==a.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===a.status&&this.isHttp)return void s.onError?.(a.status);const c=a.status||200;if((200!==c||206!==s.expectedStatus)&&c!==s.expectedStatus)return void s.onError?.(a.status);const h=function Hs(f){const e=f.response;return"string"!=typeof e?e:Ne(e).buffer}(a);if(206===c){const g=a.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);s.onDone({begin:parseInt(b[1],10),chunk:h})}else h?s.onDone({begin:0,chunk:h}):s.onError?.(a.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class mc{constructor(e){this._source=e,this._manager=new gc(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vc(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const s=new yc(this._manager,e,n);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vc{constructor(e,n){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=e.requestFull(s),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e),s=u=>n.getResponseHeader(u),{allowRangeRequests:a,suggestedLength:c}=ha({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Zn(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yn(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var e=this;return(0,q.Z)(function*(){if(e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return e._requests.push(n),n.promise})()}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yc{constructor(e,n,s){this._manager=e;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(n,s,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Yn(e,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return(0,q.Z)(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const s=e._queuedChunk;return e._queuedChunk=null,{value:s,done:!1}}if(e._done)return{value:void 0,done:!0};const n=Promise.withResolvers();return e._requests.push(n),n.promise})()}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const tl=/^[a-z][a-z0-9\-+.]+:/i;function _c(f,e,n){return"http:"===f.protocol?fr.get("http").request(f,{headers:e},n):fr.get("https").request(f,{headers:e},n)}class Ec{constructor(e){this.source=e,this.url=function bc(f){if(tl.test(f))return new URL(f);const e=fr.get("url");return new URL(e.pathToFileURL(f))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Yr(this):new hs(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const s=this.isFsUrl?new pa(this,e,n):new Lo(this,e,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class uo{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,q.Z)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const n=e._readableStream.read();return null===n?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=n.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new gt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Vs{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return(0,q.Z)(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const n=e._readableStream.read();return null===n?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=n.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class hs extends uo{constructor(e){super(e),this._request=_c(this._url,e.httpHeaders,s=>{if(404===s.statusCode){const h=new un(`Missing PDF "${this._url}".`);return this._storedError=h,void this._headersCapability.reject(h)}this._headersCapability.resolve(),this._setReadableStream(s);const a=h=>this._readableStream.headers[h.toLowerCase()],{allowRangeRequests:c,suggestedLength:u}=ha({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Zn(a)}),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class Lo extends Vs{constructor(e,n,s){super(e),this._httpHeaders={};for(const c in e.httpHeaders){const u=e.httpHeaders[c];void 0!==u&&(this._httpHeaders[c]=u)}this._httpHeaders.Range=`bytes=${n}-${s-1}`,this._request=_c(this._url,this._httpHeaders,c=>{if(404!==c.statusCode)this._setReadableStream(c);else{const u=new un(`Missing PDF "${this._url}".`);this._storedError=u}}),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class Yr extends uo{constructor(e){super(e);const n=fr.get("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{"ENOENT"===s.code&&(s=new un(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class pa extends Vs{constructor(e,n,s){super(e);const a=fr.get("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:s-1}))}}class Vn{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#l=0;#d=null;#c=null;#u=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#v=new WeakMap;#m=null;static#y=new Map;static#_=new Map;static#w=null;static#E=new Set;constructor({textContentSource:e,container:n,viewport:s}){if(e instanceof ReadableStream)this.#f=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#f=new ReadableStream({start(g){g.enqueue(e),g.close()}})}this.#t=this.#c=n,this.#o=s.scale*(globalThis.devicePixelRatio||1),this.#u=s.rotation,this.#s={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:c,pageX:u,pageY:h}=s.rawDims;this.#m=[1,0,0,-1,-u,h+c],this.#l=a,this.#a=c,Vn.#I(),Wi(n,s),this.#e.promise.catch(()=>{}).then(()=>{Vn.#E.delete(this),this.#s=null,this.#h=null})}render(){const e=()=>{this.#d.read().then(({value:n,done:s})=>{s?this.#e.resolve():(this.#r??=n.lang,Object.assign(this.#h,n.styles),this.#C(n.items),e())},this.#e.reject)};return this.#d=this.#f.getReader(),Vn.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:n=null}){const s=e.scale*(globalThis.devicePixelRatio||1),a=e.rotation;if(a!==this.#u&&(n?.(),this.#u=a,Wi(this.#c,{rotation:a})),s!==this.#o){n?.(),this.#o=s;const c={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:Vn.#A(this.#r)};for(const u of this.#g)c.properties=this.#v.get(u),c.div=u,this.#M(c)}}cancel(){const e=new gt("TextLayer task cancelled.");this.#d?.cancel(e).catch(()=>{}),this.#d=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#C(e){if(this.#n)return;this.#s.ctx??=Vn.#A(this.#r);const n=this.#g,s=this.#p;for(const a of e){if(n.length>1e5)return at("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==a.str)s.push(a.str),this.#T(a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const c=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==a.id&&this.#t.setAttribute("id",`${a.id}`),c.append(this.#t)}else"endMarkedContent"===a.type&&(this.#t=this.#t.parentNode)}}#T(e){const n=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#g.push(n);const a=ze.transform(this.#m,e.transform);let c=Math.atan2(a[1],a[0]);const u=this.#h[e.fontName];u.vertical&&(c+=Math.PI/2);const h=this.#i&&u.fontSubstitution||u.fontFamily,g=Math.hypot(a[2],a[3]),b=g*Vn.#S(h,this.#r);let E,D;0===c?(E=a[4],D=a[5]-b):(E=a[4]+b*Math.sin(c),D=a[5]-b*Math.cos(c));const T="calc(var(--scale-factor)*",O=n.style;this.#t===this.#c?(O.left=`${(100*E/this.#l).toFixed(2)}%`,O.top=`${(100*D/this.#a).toFixed(2)}%`):(O.left=`${T}${E.toFixed(2)}px)`,O.top=`${T}${D.toFixed(2)}px)`),O.fontSize=`${T}${(Vn.#w*g).toFixed(2)}px)`,O.fontFamily=h,s.fontSize=g,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#i&&(n.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),0!==c&&(s.angle=c*(180/Math.PI));let k=!1;if(e.str.length>1)k=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const j=Math.abs(e.transform[0]),G=Math.abs(e.transform[3]);j!==G&&Math.max(j,G)/Math.min(j,G)>1.5&&(k=!0)}if(k&&(s.canvasWidth=u.vertical?e.height:e.width),this.#v.set(n,s),this.#s.div=n,this.#s.properties=s,this.#M(this.#s),s.hasText&&this.#t.append(n),s.hasEOL){const j=document.createElement("br");j.setAttribute("role","presentation"),this.#t.append(j)}}#M(e){const{div:n,properties:s,ctx:a,prevFontSize:c,prevFontFamily:u}=e,{style:h}=n;let g="";if(Vn.#w>1&&(g=`scale(${1/Vn.#w})`),0!==s.canvasWidth&&s.hasText){const{fontFamily:b}=h,{canvasWidth:E,fontSize:D}=s;(c!==D||u!==b)&&(a.font=`${D*this.#o}px ${b}`,e.prevFontSize=D,e.prevFontFamily=b);const{width:T}=a.measureText(n.textContent);T>0&&(g=`scaleX(${E*this.#o/T}) ${g}`)}0!==s.angle&&(g=`rotate(${s.angle}deg) ${g}`),g.length>0&&(h.transform=g)}static cleanup(){if(!(this.#E.size>0)){this.#y.clear();for(const{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#A(e=null){let n=this.#_.get(e||="");if(!n){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),n=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,n)}return n}static#I(){if(null!==this.#w)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#S(e,n){const s=this.#y.get(e);if(s)return s;const a=this.#A(n),c=a.font;a.canvas.width=a.canvas.height=30,a.font=`30px ${e}`;const u=a.measureText("");let h=u.fontBoundingBoxAscent,g=Math.abs(u.fontBoundingBoxDescent);if(h){const D=h/(h+g);return this.#y.set(e,D),a.canvas.width=a.canvas.height=0,a.font=c,D}a.strokeStyle="red",a.clearRect(0,0,30,30),a.strokeText("g",0,0);let b=a.getImageData(0,0,30,30).data;g=0;for(let D=b.length-1-3;D>=0;D-=4)if(b[D]>0){g=Math.ceil(D/4/30);break}a.clearRect(0,0,30,30),a.strokeText("A",0,30),b=a.getImageData(0,0,30,30).data,h=0;for(let D=0,T=b.length;D<T;D+=4)if(b[D]>0){h=30-Math.floor(D/4/30);break}a.canvas.width=a.canvas.height=0,a.font=c;const E=h?h/(h+g):.8;return this.#y.set(e,E),E}}class Hi{static textContent(e){const n=[],s={items:n,styles:Object.create(null)};return function a(c){if(!c)return;let u=null;const h=c.name;if("#text"===h)u=c.value;else{if(!Hi.shouldBuildText(h))return;c?.attributes?.textContent?u=c.attributes.textContent:c.value&&(u=c.value)}if(null!==u&&n.push({str:u}),c.children)for(const g of c.children)a(g)}(e),s}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const nl=65536,Kr=st?class ua extends Ae{_createCanvas(e,n){return fr.get("canvas").createCanvas(e,n)}}:class tn extends Ae{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}={}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const s=this._document.createElement("canvas");return s.width=e,s.height=n,s}},xi=st?class da extends J{_fetchData(e,n){return xo(e).then(s=>({cMapData:s,compressionType:n}))}}:kn,qr=st?class To extends Ur{}:class ft extends Ur{#e;#t;#n;#i;#r;#s;#a=0;constructor({docId:e,ownerDocument:n=globalThis.document}={}){super(),this.#i=e,this.#r=n}get#l(){return this.#t||=new Map}get#d(){return this.#s||=new Map}get#c(){if(!this.#n){const e=this.#r.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=this.#r.createElementNS(me,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(me,"defs"),e.append(s),s.append(this.#n),this.#r.body.append(e)}return this.#n}#u(e){if(1===e.length){const g=e[0],b=new Array(256);for(let D=0;D<256;D++)b[D]=g[D]/255;const E=b.join(",");return[E,E,E]}const[n,s,a]=e,c=new Array(256),u=new Array(256),h=new Array(256);for(let g=0;g<256;g++)c[g]=n[g]/255,u[g]=s[g]/255,h[g]=a[g]/255;return[c.join(","),u.join(","),h.join(",")]}#o(e){if(void 0===this.#e){this.#e="";const n=this.#r.URL;n!==this.#r.baseURI&&(ss(n)?at('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=n.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let n=this.#l.get(e);if(n)return n;const[s,a,c]=this.#u(e),u=1===e.length?s:`${s}${a}${c}`;if(n=this.#l.get(u),n)return this.#l.set(e,n),n;const h=`g_${this.#i}_transfer_map_${this.#a++}`,g=this.#o(h);this.#l.set(e,g),this.#l.set(u,g);const b=this.#f(h);return this.#v(s,a,c,b),g}addHCMFilter(e,n){const s=`${e}-${n}`,a="base";let c=this.#d.get(a);if(c?.key===s||(c?(c.filter?.remove(),c.key=s,c.url="none",c.filter=null):(c={key:s,url:"none",filter:null},this.#d.set(a,c)),!e||!n))return c.url;const u=this.#y(e);e=ze.makeHexColor(...u);const h=this.#y(n);if(n=ze.makeHexColor(...h),this.#c.style.color="","#000000"===e&&"#ffffff"===n||e===n)return c.url;const g=new Array(256);for(let O=0;O<=255;O++){const k=O/255;g[O]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const b=g.join(","),E=`g_${this.#i}_hcm_filter`,D=c.filter=this.#f(E);this.#v(b,b,b,D),this.#p(D);const T=(O,k)=>{const j=u[O]/255,G=h[O]/255,U=new Array(k+1);for(let ne=0;ne<=k;ne++)U[ne]=j+ne/k*(G-j);return U.join(",")};return this.#v(T(0,5),T(1,5),T(2,5),D),c.url=this.#o(E),c.url}addAlphaFilter(e){let n=this.#l.get(e);if(n)return n;const[s]=this.#u([e]),a=`alpha_${s}`;if(n=this.#l.get(a),n)return this.#l.set(e,n),n;const c=`g_${this.#i}_alpha_map_${this.#a++}`,u=this.#o(c);this.#l.set(e,u),this.#l.set(a,u);const h=this.#f(c);return this.#m(s,h),u}addLuminosityFilter(e){let s,a,n=this.#l.get(e||"luminosity");if(n)return n;if(e?([s]=this.#u([e]),a=`luminosity_${s}`):a="luminosity",n=this.#l.get(a),n)return this.#l.set(e,n),n;const c=`g_${this.#i}_luminosity_map_${this.#a++}`,u=this.#o(c);this.#l.set(e,u),this.#l.set(a,u);const h=this.#f(c);return this.#h(h),e&&this.#m(s,h),u}addHighlightHCMFilter(e,n,s,a,c){const u=`${n}-${s}-${a}-${c}`;let h=this.#d.get(e);if(h?.key===u||(h?(h.filter?.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},this.#d.set(e,h)),!n||!s))return h.url;const[g,b]=[n,s].map(this.#y.bind(this));let E=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),D=Math.round(.2126*b[0]+.7152*b[1]+.0722*b[2]),[T,O]=[a,c].map(this.#y.bind(this));D<E&&([E,D,T,O]=[D,E,O,T]),this.#c.style.color="";const k=(U,ne,ue)=>{const de=new Array(256),ve=(D-E)/ue,ye=U/255,Me=(ne-U)/(255*ue);let He=0;for(let re=0;re<=ue;re++){const je=Math.round(E+re*ve),nt=ye+re*Me;for(let Jt=He;Jt<=je;Jt++)de[Jt]=nt;He=je+1}for(let re=He;re<256;re++)de[re]=de[He-1];return de.join(",")},j=`g_${this.#i}_hcm_${e}_filter`,G=h.filter=this.#f(j);return this.#p(G),this.#v(k(T[0],O[0],5),k(T[1],O[1],5),k(T[2],O[2],5),G),h.url=this.#o(j),h.url}destroy(e=!1){e&&0!==this.#d.size||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#a=0)}#h(e){const n=this.#r.createElementNS(me,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#p(e){const n=this.#r.createElementNS(me,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#f(e){const n=this.#r.createElementNS(me,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#c.append(n),n}#g(e,n,s){const a=this.#r.createElementNS(me,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),e.append(a)}#v(e,n,s,a){const c=this.#r.createElementNS(me,"feComponentTransfer");a.append(c),this.#g(c,"feFuncR",e),this.#g(c,"feFuncG",n),this.#g(c,"feFuncB",s)}#m(e,n){const s=this.#r.createElementNS(me,"feComponentTransfer");n.append(s),this.#g(s,"feFuncA",e)}#y(e){return this.#c.style.color=e,Bn(getComputedStyle(this.#c).getPropertyValue("color"))}},ko=st?class Po extends ${_fetchData(e){return xo(e)}}:zi;function ma(f={}){"string"==typeof f||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const e=new Us,{docId:n}=e,s=f.url?function va(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(st&&"string"==typeof f)return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(f.url):null,a=f.data?function Fo(f){if(st&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if("string"==typeof f)return Ne(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||"object"==typeof f&&!isNaN(f?.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(f.data):null,c=f.httpHeaders||null,u=!0===f.withCredentials,h=f.password??null,g=f.range instanceof Xr?f.range:null,b=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:nl;let E=f.worker instanceof xn?f.worker:null;const D=f.verbosity,T="string"!=typeof f.docBaseUrl||ss(f.docBaseUrl)?null:f.docBaseUrl,O="string"==typeof f.cMapUrl?f.cMapUrl:null,k=!1!==f.cMapPacked,j=f.CMapReaderFactory||xi,G="string"==typeof f.standardFontDataUrl?f.standardFontDataUrl:null,U=f.StandardFontDataFactory||ko,ne=!0!==f.stopAtErrors,ue=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,de=!1!==f.isEvalSupported,ve="boolean"==typeof f.isOffscreenCanvasSupported?f.isOffscreenCanvasSupported:!st,ye=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,Me="boolean"==typeof f.disableFontFace?f.disableFontFace:st,He=!0===f.fontExtraProperties,re=!0===f.enableXfa,je=f.ownerDocument||globalThis.document,nt=!0===f.disableRange,Jt=!0===f.disableStream,sn=!0===f.disableAutoFetch,en=!0===f.pdfBug,zn=!0===f.enableHWA,Ei=g?g.length:f.length??NaN,Pt="boolean"==typeof f.useSystemFonts?f.useSystemFonts:!st&&!Me,Lt="boolean"==typeof f.useWorkerFetch?f.useWorkerFetch:j===kn&&U===zi&&O&&G&&Pr(O,document.baseURI)&&Pr(G,document.baseURI),cu=f.canvasFactory||new Kr({ownerDocument:je,enableHWA:zn}),na=f.filterFactory||new qr({docId:n,ownerDocument:je});!function qn(f){Number.isInteger(f)&&(Mt=f)}(D);const wi={canvasFactory:cu,filterFactory:na};if(Lt||(wi.cMapReaderFactory=new j({baseUrl:O,isCompressed:k}),wi.standardFontDataFactory=new U({baseUrl:G})),!E){const dr={verbosity:D,port:ti.workerPort};E=dr.port?xn.fromPort(dr):new xn(dr),e._worker=E}const fi={docId:n,apiVersion:"4.6.82",data:a,password:h,disableAutoFetch:sn,rangeChunkSize:b,length:Ei,docBaseUrl:T,enableXfa:re,evaluatorOptions:{maxImageSize:ue,disableFontFace:Me,ignoreErrors:ne,isEvalSupported:de,isOffscreenCanvasSupported:ve,canvasMaxAreaInBytes:ye,fontExtraProperties:He,useSystemFonts:Pt,cMapUrl:Lt?O:null,standardFontDataUrl:Lt?G:null}},Ka={disableFontFace:Me,fontExtraProperties:He,ownerDocument:je,pdfBug:en,styleElement:null,loadingParams:{disableAutoFetch:sn,enableXfa:re}};return E.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(E.destroyed)throw new Error("Worker was destroyed");const dr=E.messageHandler.sendWithPromise("GetDocRequest",fi,a?[a.buffer]:null);let Js;if(g)Js=new Wr(g,{disableRange:nt,disableStream:Jt});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");Cr={url:s,length:Ei,httpHeaders:c,withCredentials:u,rangeChunkSize:b,disableRange:nt,disableStream:Jt},Js=st?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Pr(Cr.url)?new br(Cr):new Ec(Cr):Pr(Cr.url)?new br(Cr):new mc(Cr)}var Cr;return dr.then(Kn=>{if(e.destroyed)throw new Error("Loading aborted");if(E.destroyed)throw new Error("Worker was destroyed");const Cr=new Ot(n,Kn,E.port),zd=new $s(Cr,e,Js,Ka,wi);e._transport=zd,Cr.send("Ready",null)})}).catch(e._capability.reject),e}function fs(f){return"object"==typeof f&&Number.isInteger(f?.num)&&f.num>=0&&Number.isInteger(f?.gen)&&f.gen>=0}class Us{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+Us.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var e=this;return(0,q.Z)(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(n){throw e._worker?.port&&delete e._worker._pendingDestroy,n}e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}class Xr{constructor(e,n,s=!1,a=null){this.length=e,this.initialData=n,this.progressiveDone=s,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(const s of this._rangeListeners)s(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){wt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ho{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ya{#e=null;#t=!1;constructor(e,n,s,a=!1){this._pageIndex=e,this._pageInfo=n,this._transport=s,this._stats=a?new Tr:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new Bo,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:c=!1}={}){return new rs({viewBox:this.view,scale:e,rotation:n,offsetX:s,offsetY:a,dontFlip:c})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return pt(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return(0,q.Z)(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,viewport:n,intent:s="display",annotationMode:a=ct.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:g=null,pageColors:b=null,printAnnotationStorage:E=null,isEditing:D=!1}){this._stats?.time("Overall");const T=this._transport.getRenderingIntent(s,a,E,D),{renderingIntent:O,cacheKey:k}=T;this.#t=!1,this.#i(),h||=this._transport.getOptionalContentConfig(O);let j=this._intentStates.get(k);j||(j=Object.create(null),this._intentStates.set(k,j)),j.streamReaderCancelTimeout&&(clearTimeout(j.streamReaderCancelTimeout),j.streamReaderCancelTimeout=null);const G=!!(4&O);j.displayReadyCapability||(j.displayReadyCapability=Promise.withResolvers(),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(T));const U=de=>{j.renderTasks.delete(ne),(this._maybeCleanupAfterRender||G)&&(this.#t=!0),this.#n(!G),de?(ne.capability.reject(de),this._abortOperatorList({intentState:j,reason:de instanceof Error?de:new Error(de)})):ne.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},ne=new zs({callback:U,params:{canvasContext:e,viewport:n,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:g,operatorList:j.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!G,pdfBug:this._pdfBug,pageColors:b});(j.renderTasks||=new Set).add(ne);const ue=ne.task;return Promise.all([j.displayReadyCapability.promise,h]).then(([de,ve])=>{if(this.destroyed)U();else{if(this._stats?.time("Rendering"),!(ve.renderingIntent&O))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");ne.initializeGraphics({transparency:de,optionalContentConfig:ve}),ne.operatorListChanged()}}).catch(U),ue}getOperatorList({intent:e="display",annotationMode:n=ct.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){const u=this._transport.getRenderingIntent(e,n,s,a,!0);let g,h=this._intentStates.get(u.cacheKey);return h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h)),h.opListReadCapability||(g=Object.create(null),g.operatorListChanged=function c(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(g))},h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(g),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===n},{highWaterMark:100,size:a=>a.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Hi.textContent(s));const n=this.streamTextContent(e);return new Promise(function(s,a){const u=n.getReader(),h={items:[],styles:Object.create(null),lang:null};!function c(){u.read().then(function({value:g,done:b}){b?s(h):(h.lang??=g.lang,Object.assign(h.styles,g.styles),h.items.push(...g.items),c())},a)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const s of n.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const n=this.#n(!1);return e&&n&&(this._stats&&=new Tr),n}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:n,operatorList:s}of this._intentStates.values())if(n.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,n){const s=this._intentStates.get(n);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let s=0,a=e.length;s<a;s++)n.operatorList.fnArray.push(e.fnArray[s]),n.operatorList.argsArray.push(e.argsArray[s]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const s of n.renderTasks)s.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:s,modifiedIds:a}){const{map:c,transfer:u}=s,g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:c,modifiedIds:a},u).getReader(),b=this._intentStates.get(n);b.streamReader=g;const E=()=>{g.read().then(({value:D,done:T})=>{T?b.streamReader=null:this._transport.destroyed||(this._renderPageChunk(D,b),E())},D=>{if(b.streamReader=null,!this._transport.destroyed){if(b.operatorList){b.operatorList.lastChunk=!0;for(const T of b.renderTasks)T.operatorListChanged();this.#n(!0)}if(b.displayReadyCapability)b.displayReadyCapability.reject(D);else{if(!b.opListReadCapability)throw D;b.opListReadCapability.reject(D)}}})};E()}_abortOperatorList({intentState:e,reason:n,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(n instanceof Fn){let a=100;return n.extraDelay>0&&n.extraDelay<1e3&&(a+=n.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},a))}}if(e.streamReader.cancel(new gt(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,c]of this._intentStates)if(c===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}class ba{#e=new Set;#t=Promise.resolve();postMessage(e,n){const s={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const a of this.#e)a.call(this,s)})}addEventListener(e,n){this.#e.add(n)}removeEventListener(e,n){this.#e.delete(n)}terminate(){this.#e.clear()}}class xn{static#e=0;static#t=!1;static#n;static#i=(()=>{st&&(this.#t=!0,ti.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,n)=>{let s;try{if(s=new URL(e),!s.origin||"null"===s.origin)return!1}catch{return!1}const a=new URL(n,s);return s.origin===a.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))})();constructor({name:e=null,port:n=null,verbosity:s=yt()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if(xn.#n?.has(n))throw new Error("Cannot use more than one PDFWorker per port.");return(xn.#n||=new WeakMap).set(n,this),void this._initializeFromPort(n)}this._initialize()}get promise(){return st?Promise.all([fr.promise,this._readyCapability.promise]):this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ot("main","worker",e),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(xn.#t||xn.#s)return void this._setupFakeWorker();let{workerSrc:e}=xn;try{xn._isSameOrigin(window.location.href,e)||(e=xn._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),s=new Ot("main","worker",n),a=()=>{c.abort(),s.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=new AbortController;n.addEventListener("error",()=>{this._webWorker||a()},{signal:c.signal}),s.on("test",h=>{c.abort(),!this.destroyed&&h?(this._messageHandler=s,this._port=n,this._webWorker=n,this.#r()):a()}),s.on("ready",h=>{if(c.abort(),this.destroyed)a();else try{u()}catch{this._setupFakeWorker()}});const u=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};return void u()}catch{$t("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){xn.#t||(at("Setting up fake worker."),xn.#t=!0),xn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const n=new ba;this._port=n;const s="fake"+xn.#e++,a=new Ot(s+"_worker",s,n);e.setup(a,n),this._messageHandler=new Ot(s,s+"_worker",n),this.#r()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),xn.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=this.#n?.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new xn(e)}static get workerSrc(){if(ti.workerSrc)return ti.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return pt(this,"_setupFakeWorkerGlobal",function(){var s=(0,q.Z)(function*(){return e.#s?e.#s:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return s.apply(this,arguments)}}()())}}class $s{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,n,s,a,c){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new Bo,this.fontLoader=new la({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=c.canvasFactory,this.filterFactory=c.filterFactory,this.cMapReaderFactory=c.cMapReaderFactory,this.standardFontDataFactory=c.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,n=null){const s=this.#e.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,a),a}get annotationStorage(){return pt(this,"annotationStorage",new Ls)}getRenderingIntent(e,n=ct.ENABLE,s=null,a=!1,c=!1){let u=2,h=Gn;switch(e){case"any":u=1;break;case"display":break;case"print":u=4;break;default:at(`getRenderingIntent - invalid intent: ${e}`)}const g=4&u&&s instanceof Io?s:this.annotationStorage;switch(n){case ct.DISABLE:u+=64;break;case ct.ENABLE:break;case ct.ENABLE_FORMS:u+=16;break;case ct.ENABLE_STORAGE:u+=32,h=g.serializable;break;default:at(`getRenderingIntent - invalid annotationMode: ${n}`)}a&&(u+=128),c&&(u+=256);const{ids:b,hash:E}=g.modifiedIds;return{renderingIntent:u,cacheKey:[u,h.hash,E].join("_"),annotationStorageSerializable:h,modifiedIds:b}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Vn.cleanup(),this._networkStream?.cancelAllRequests(new gt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(s,a)=>{bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=c=>{this._lastProgress={loaded:c.loaded,total:c.total}},a.onPull=()=>{this._fullReader.read().then(function({value:c,done:u}){u?a.close():(bt(c instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c]))}).catch(c=>{a.error(c)})},a.onCancel=c=>{this._fullReader.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",s=>{const a=Promise.withResolvers(),c=this._fullReader;return c.headersReady.then(()=>{(!c.isStreamingSupported||!c.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),c.onProgress=u=>{n.onProgress?.({loaded:u.loaded,total:u.total})}),a.resolve({isStreamingSupported:c.isStreamingSupported,isRangeSupported:c.isRangeSupported,contentLength:c.contentLength})},a.reject),a.promise}),e.on("GetRangeReader",(s,a)=>{bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const c=this._networkStream.getRangeReader(s.begin,s.end);c?(a.onPull=()=>{c.read().then(function({value:u,done:h}){h?a.close():(bt(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(u),1,[u]))}).catch(u=>{a.error(u)})},a.onCancel=u=>{c.cancel(u),a.ready.catch(h=>{if(!this.destroyed)throw h})}):a.close()}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,n._capability.resolve(new ho(s,this))}),e.on("DocException",function(s){let a;switch(s.name){case"PasswordException":a=new tt(s.message,s.code);break;case"InvalidPDFException":a=new Ni(s.message);break;case"MissingPDFException":a=new un(s.message);break;case"UnexpectedResponseException":a=new Wn(s.message,s.status);break;case"UnknownErrorException":a=new Li(s.message,s.details);break;default:wt("DocException - expected a valid Error.")}n._capability.reject(a)}),e.on("PasswordRequest",s=>{if(this.#r=Promise.withResolvers(),n.onPassword){const a=c=>{c instanceof Error?this.#r.reject(c):this.#r.resolve({password:c})};try{n.onPassword(a,s.code)}catch(c){this.#r.reject(c)}}else this.#r.reject(new tt(s.message,s.code));return this.#r.promise}),e.on("DataLoaded",s=>{n.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{this.destroyed||this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,a,c])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":const{disableFontFace:u,fontExtraProperties:h,pdfBug:g}=this._params;if("error"in c){const T=c.error;at(`Error during font loading: ${T}`),this.commonObjs.resolve(s,T);break}const b=g&&globalThis.FontInspector?.enabled?(T,O)=>globalThis.FontInspector.fontAdded(T,O):null,E=new ca(c,{disableFontFace:u,inspectFont:b});this.fontLoader.bind(E).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h&&E.data&&(E.data=null),this.commonObjs.resolve(s,E)});break;case"CopyLocalImage":const{imageRef:D}=c;bt(D,"The imageRef must be defined.");for(const T of this.#t.values())for(const[,O]of T.objs)if(O?.ref===D)return O.dataLen?(this.commonObjs.resolve(s,structuredClone(O)),O.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,c);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),e.on("obj",([s,a,c,u])=>{if(this.destroyed)return;const h=this.#t.get(a);if(!h.objs.has(s)){if(0===h._intentStates.size)return void u?.bitmap?.close();switch(c){case"Image":h.objs.resolve(s,u),u?.dataLen>1e7&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(s,u);break;default:throw new Error(`Got unknown object type ${c}`)}}}),e.on("DocProgress",s=>{this.destroyed||n.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&at("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,s=this.#n.get(n);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#i.set(c.refStr,e);const u=new ya(n,c,this,this._params.pdfBug);return this.#t.set(n,u),u});return this.#n.set(n,a),a}getPageIndex(e){return fs(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(n=>new Zi(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#e.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new pc(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){var n=this;return(0,q.Z)(function*(){if(!n.destroyed){yield n.messageHandler.sendWithPromise("Cleanup",null);for(const s of n.#t.values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);n.commonObjs.clear(),e||n.fontLoader.clear(),n.#e.clear(),n.filterFactory.destroy(!0),Vn.cleanup()}})()}cachedPageNumber(e){return fs(e)?this.#i.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}const Vi=Symbol("INITIAL_DATA");class Bo{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Vi}}get(e,n=null){if(n){const a=this.#t(e);return a.promise.then(()=>n(a.data)),null}const s=this.#e[e];if(!s||s.data===Vi)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const n=this.#e[e];return!!n&&n.data!==Vi}resolve(e,n=null){const s=this.#t(e);s.data=n,s.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:n}=this.#e[e];n!==Vi&&(yield[e,n])}}}class Ac{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}class zs{#e=null;static#t=new WeakSet;constructor({callback:e,params:n,objs:s,commonObjs:a,annotationCanvasMap:c,operatorList:u,pageIndex:h,canvasFactory:g,filterFactory:b,useRequestAnimationFrame:E=!1,pdfBug:D=!1,pageColors:T=null}){this.callback=e,this.params=n,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=g,this.filterFactory=b,this._pdfBug=D,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===E&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ac(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(zs.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");zs.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:c,background:u}=this.params;this.gfx=new vr(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:a,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),zs.#t.delete(this._canvas),this.callback(e||new Fn(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return(0,q.Z)(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),zs.#t.delete(e._canvas),e.callback())))})()}}const Cc="4.6.82",il="9b541910f";function ps(f){return Math.floor(255*Math.max(0,Math.min(1,f))).toString(16).padStart(2,"0")}function Ws(f){return Math.max(0,Math.min(255,255*f))}class _{static CMYK_G([e,n,s,a]){return["G",1-Math.min(1,.3*e+.59*s+.11*n+a)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=Ws(e),e,e]}static G_HTML([e]){const n=ps(e);return`#${n}${n}${n}`}static RGB_G([e,n,s]){return["G",.3*e+.59*n+.11*s]}static RGB_rgb(e){return e.map(Ws)}static RGB_HTML(e){return`#${e.map(ps).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,s,a]){return["RGB",1-Math.min(1,e+a),1-Math.min(1,s+a),1-Math.min(1,n+a)]}static CMYK_rgb([e,n,s,a]){return[Ws(1-Math.min(1,e+a)),Ws(1-Math.min(1,s+a)),Ws(1-Math.min(1,n+a))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,s]){const a=1-e,c=1-n,u=1-s;return["CMYK",a,c,u,Math.min(a,c,u)]}}class R{static setupStorage(e,n,s,a,c){const u=a.getValue(n,{value:null});switch(s.name){case"textarea":if(null!==u.value&&(e.textContent=u.value),"print"===c)break;e.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})});break;case"input":if("radio"===s.attributes.type||"checkbox"===s.attributes.type){if(u.value===s.attributes.xfaOn?e.setAttribute("checked",!0):u.value===s.attributes.xfaOff&&e.removeAttribute("checked"),"print"===c)break;e.addEventListener("change",h=>{a.setValue(n,{value:h.target.getAttribute(h.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==u.value&&e.setAttribute("value",u.value),"print"===c)break;e.addEventListener("input",h=>{a.setValue(n,{value:h.target.value})})}break;case"select":if(null!==u.value){e.setAttribute("value",u.value);for(const h of s.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const g=h.target.options;a.setValue(n,{value:-1===g.selectedIndex?"":g[g.selectedIndex].value})})}}static setAttributes({html:e,element:n,storage:s=null,intent:a,linkService:c}){const{attributes:u}=n,h=e instanceof HTMLAnchorElement;"radio"===u.type&&(u.name=`${u.name}-${a}`);for(const[g,b]of Object.entries(u))if(null!=b)switch(g){case"class":b.length&&e.setAttribute(g,b.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",b);break;case"style":Object.assign(e.style,b);break;case"textContent":e.textContent=b;break;default:(!h||"href"!==g&&"newWindow"!==g)&&e.setAttribute(g,b)}h&&c.addLinkAttributes(e,u.href,u.newWindow),s&&u.dataId&&this.setupStorage(e,u.dataId,n,s)}static render(e){const n=e.annotationStorage,s=e.linkService,a=e.xfaHtml,c=e.intent||"display",u=document.createElement(a.name);a.attributes&&this.setAttributes({html:u,element:a,intent:c,linkService:s});const h="richText"!==c,g=e.div;if(g.append(u),e.viewport){const D=`matrix(${e.viewport.transform.join(",")})`;g.style.transform=D}h&&g.setAttribute("class","xfaLayer xfaFont");const b=[];if(0===a.children.length){if(a.value){const D=document.createTextNode(a.value);u.append(D),h&&Hi.shouldBuildText(a.name)&&b.push(D)}return{textDivs:b}}const E=[[a,-1,u]];for(;E.length>0;){const[D,T,O]=E.at(-1);if(T+1===D.children.length){E.pop();continue}const k=D.children[++E.at(-1)[1]];if(null===k)continue;const{name:j}=k;if("#text"===j){const U=document.createTextNode(k.value);b.push(U),O.append(U);continue}const G=k?.attributes?.xmlns?document.createElementNS(k.attributes.xmlns,j):document.createElement(j);if(O.append(G),k.attributes&&this.setAttributes({html:G,element:k,storage:n,intent:c,linkService:s}),k.children?.length>0)E.push([k,-1,G]);else if(k.value){const U=document.createTextNode(k.value);h&&Hi.shouldBuildText(j)&&b.push(U),G.append(U)}}for(const D of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))D.setAttribute("readOnly",!0);return{textDivs:b}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const S=1e3,V=new WeakSet;function te(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class Se{static create(e){switch(e.data.annotationType){case 2:return new Xt(e);case 1:return new Zt(e);case 20:switch(e.data.fieldType){case"Tx":return new It(e);case"Btn":return e.data.radioButton?new Tn(e):e.data.checkBox?new an(e):new or(e);case"Ch":return new Ui(e);case"Sig":return new mn(e)}return new kt(e);case 16:return new ar(e);case 3:return new lr(e);case 4:return new kr(e);case 5:return new Zr(e);case 6:return new rl(e);case 8:return new Gs(e);case 14:return new _a(e);case 15:return new Ys(e);case 7:return new Dc(e);case 9:return new cr(e);case 10:return new sl(e);case 11:return new ol(e);case 12:return new dn(e);case 13:return new jo(e);case 17:return new mi(e);default:return new We(e)}}}class We{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:n=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:n,richText:s}){return!!(e?.str||n?.str||s?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return We._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:n}=e;n&&this.#i(n),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:n},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:c,pageHeight:u,pageX:h,pageY:g}}}}=this;s?.splice(0,4,...e);const{width:b,height:E}=te(e);n.left=100*(e[0]-h)/c+"%",n.top=100*(u-e[3]+g)/u+"%",0===a?(n.width=100*b/c+"%",n.height=100*E/u+"%"):this.setRotation(a)}_createContainer(e){const{data:n,parent:{page:s,viewport:a}}=this,c=document.createElement("section");c.setAttribute("data-annotation-id",n.id),this instanceof kt||(c.tabIndex=S);const{style:u}=c;if(u.zIndex=this.parent.zIndex++,n.popupRef&&c.setAttribute("aria-haspopup","dialog"),n.alternativeText&&(c.title=n.alternativeText),n.noRotate&&c.classList.add("norotate"),!n.rect||this instanceof ar){const{rotation:j}=n;return!n.hasOwnCanvas&&0!==j&&this.setRotation(j,c),c}const{width:h,height:g}=te(n.rect);if(!e&&n.borderStyle.width>0){u.borderWidth=`${n.borderStyle.width}px`;const j=n.borderStyle.horizontalCornerRadius,G=n.borderStyle.verticalCornerRadius;switch(j>0||G>0?u.borderRadius=`calc(${j}px * var(--scale-factor)) / calc(${G}px * var(--scale-factor))`:this instanceof Tn&&(u.borderRadius=`calc(${h}px * var(--scale-factor)) / calc(${g}px * var(--scale-factor))`),n.borderStyle.style){case 1:u.borderStyle="solid";break;case 2:u.borderStyle="dashed";break;case 3:at("Unimplemented border style: beveled");break;case 4:at("Unimplemented border style: inset");break;case 5:u.borderBottomStyle="solid"}const U=n.borderColor||null;U?(this.#t=!0,u.borderColor=ze.makeHexColor(0|U[0],0|U[1],0|U[2])):u.borderWidth=0}const b=ze.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]),{pageWidth:E,pageHeight:D,pageX:T,pageY:O}=a.rawDims;u.left=100*(b[0]-T)/E+"%",u.top=100*(b[1]-O)/D+"%";const{rotation:k}=n;return n.hasOwnCanvas||0===k?(u.width=100*h/E+"%",u.height=100*g/D+"%"):this.setRotation(k,c),c}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims,{width:c,height:u}=te(this.data.rect);let h,g;e%180==0?(h=100*c/s,g=100*u/a):(h=100*u/s,g=100*c/a),n.style.width=`${h}%`,n.style.height=`${g}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,s,a)=>{const c=a.detail[n],u=c[0],h=c.slice(1);a.target.style[s]=_[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:_[`${u}_rgb`](h)})};return pt(this,"_commonActions",{display:n=>{const{display:s}=n.detail,a=s%2==1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:1===s||2===s})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:s}=n.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const s=n.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,n){const s=this._commonActions;for(const a of Object.keys(n.detail))(e[a]||s[a])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const s=this._commonActions;for(const[a,c]of Object.entries(n)){const u=s[a];u&&(u({detail:{[a]:c},target:e}),delete n[a])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,s,a,c]=this.data.rect.map(j=>Math.fround(j));if(8===e.length){const[j,G,U,ne]=e.subarray(2,6);if(a===j&&c===G&&n===U&&s===ne)return}const{style:u}=this.container;let h;if(this.#t){const{borderColor:j,borderWidth:G}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${j}" stroke-width="${G}">`],this.container.classList.add("hasBorder")}const g=a-n,b=c-s,{svgFactory:E}=this,D=E.createElement("svg");D.classList.add("quadrilateralsContainer"),D.setAttribute("width",0),D.setAttribute("height",0);const T=E.createElement("defs");D.append(T);const O=E.createElement("clipPath"),k=`clippath_${this.data.id}`;O.setAttribute("id",k),O.setAttribute("clipPathUnits","objectBoundingBox"),T.append(O);for(let j=2,G=e.length;j<G;j+=8){const U=e[j],ne=e[j+1],ue=e[j+2],de=e[j+3],ve=E.createElement("rect"),ye=(ue-n)/g,Me=(c-ne)/b,He=(U-ue)/g,re=(ne-de)/b;ve.setAttribute("x",ye),ve.setAttribute("y",Me),ve.setAttribute("width",He),ve.setAttribute("height",re),O.append(ve),h?.push(`<rect vector-effect="non-scaling-stroke" x="${ye}" y="${Me}" width="${He}" height="${re}"/>`)}this.#t&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(D),this.container.style.clipPath=`url(#${k})`}_createPopup(){const{container:e,data:n}=this;e.setAttribute("aria-haspopup","dialog");const s=this.#n=new ar({data:{color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation},parent:this.parent,elements:[this]});this.parent.div.append(s.render())}render(){wt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[e];if(a)for(const{page:c,id:u,exportValues:h}of a){if(-1===c||u===n)continue;const g="string"==typeof h?h:null,b=document.querySelector(`[data-element-id="${u}"]`);!b||V.has(b)?s.push({id:u,exportValue:g,domElement:b}):at(`_getElementsByName - element not allowed: ${u}`)}return s}for(const a of document.getElementsByName(e)){const{exportValue:c}=a,u=a.getAttribute("data-element-id");u!==n&&V.has(a)&&s.push({id:u,exportValue:c,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n})})}}class Xt extends We{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let a=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(s,e.action),a=!0):e.attachment?(this.#t(s,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(this.#n(s,e.setOCGState),a=!0):e.dest?(this._bindLink(s,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),a=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||""===n)&&this.#e()}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),this.#e()}#t(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,s),!1),this.#e()}#n(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),this.#e()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const c=s.get(a);c&&(e[c]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return at('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(s||(e.onclick=()=>!1));e.onclick=()=>{s?.();const{fields:a,refs:c,include:u}=n,h=[];if(0!==a.length||0!==c.length){const E=new Set(c);for(const D of a){const T=this._fieldObjects[D]||[];for(const{id:O}of T)E.add(O)}for(const D of Object.values(this._fieldObjects))for(const T of D)E.has(T.id)===u&&h.push(T)}else for(const E of Object.values(this._fieldObjects))h.push(...E);const g=this.annotationStorage,b=[];for(const E of h){const{id:D}=E;switch(b.push(D),E.type){case"text":case"combobox":case"listbox":g.setValue(D,{value:E.defaultValue||""});break;case"checkbox":case"radiobutton":g.setValue(D,{value:E.defaultValue===E.exportValues});break;default:continue}const T=document.querySelector(`[data-element-id="${D}"]`);T&&(V.has(T)?T.dispatchEvent(new Event("resetform")):at(`_bindResetFormAction - element not allowed: ${D}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:b,name:"ResetForm"}}),!1}}}class Zt extends We{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class kt extends We{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return lt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,s,a,c){s.includes("mouse")?e.addEventListener(s,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(s,u=>{if("blur"===s){if(!n.focused||!u.relatedTarget)return;n.focused=!1}else if("focus"===s){if(n.focused)return;n.focused=!0}c&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(u)}})})}_setEventListeners(e,n,s,a){for(const[c,u]of s)("Action"===u||this.data.actions?.[u])&&(("Focus"===u||"Blur"===u)&&(n||={focused:!1}),this._setEventListener(e,n,c,u,a),"Focus"!==u||this.data.actions?.Blur?"Blur"===u&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null):this._setEventListener(e,n,"blur","Blur",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=null===n?"transparent":ze.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||9,c=e.style;let u;const g=b=>Math.round(10*b)/10;if(this.data.multiLine){const b=Math.abs(this.data.rect[3]-this.data.rect[1]-2),E=Math.round(b/(1.35*a))||1;u=Math.min(a,g(b/E/1.35))}else{const b=Math.abs(this.data.rect[3]-this.data.rect[1]-2);u=Math.min(a,g(b/1.35))}c.fontSize=`calc(${u}px * var(--scale-factor))`,c.color=ze.makeHexColor(s[0],s[1],s[2]),null!==this.data.textAlignment&&(c.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class It extends kt{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,n,s,a){const c=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[n]=s),c.setValue(u.id,{[a]:s})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(n,{value:this.data.fieldValue});let c=a.value||"";const u=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;u&&c.length>u&&(c=c.slice(0,u));let h=a.formattedValue||this.data.textContent?.join("\n")||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??c,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",h??c),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),V.add(s),s.setAttribute("data-element-id",n),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=S,this._setRequired(s,this.data.required),u&&(s.maxLength=u),s.addEventListener("input",E=>{e.setValue(n,{value:E.target.value}),this.setPropertyOnSiblings(s,"value",E.target.value,"value"),g.formattedValue=null}),s.addEventListener("resetform",E=>{s.value=g.userValue=this.data.defaultFieldValue??"",g.formattedValue=null});let b=E=>{const{formattedValue:D}=g;null!=D&&(E.target.value=D),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",D=>{if(g.focused)return;const{target:T}=D;g.userValue&&(T.value=g.userValue),g.lastCommittedValue=T.value,g.commitKey=1,this.data.actions?.Focus||(g.focused=!0)}),s.addEventListener("updatefromsandbox",D=>{this.showElementAndHideCanvas(D.target),this._dispatchEventFromSandbox({value(O){g.userValue=O.detail.value??"",e.setValue(n,{value:g.userValue.toString()}),O.target.value=g.userValue},formattedValue(O){const{formattedValue:k}=O.detail;g.formattedValue=k,null!=k&&O.target!==document.activeElement&&(O.target.value=k),e.setValue(n,{formattedValue:k})},selRange(O){O.target.setSelectionRange(...O.detail.selRange)},charLimit:O=>{const{charLimit:k}=O.detail,{target:j}=O;if(0===k)return void j.removeAttribute("maxLength");j.setAttribute("maxLength",k);let G=g.userValue;!G||G.length<=k||(G=G.slice(0,k),j.value=g.userValue=G,e.setValue(n,{value:G}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:G,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}},D)}),s.addEventListener("keydown",D=>{g.commitKey=1;let T=-1;if("Escape"===D.key?T=0:"Enter"!==D.key||this.data.multiLine?"Tab"===D.key&&(g.commitKey=3):T=2,-1===T)return;const{value:O}=D.target;g.lastCommittedValue!==O&&(g.lastCommittedValue=O,g.userValue=O,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:O,willCommit:!0,commitKey:T,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}}))});const E=b;b=null,s.addEventListener("blur",D=>{if(!g.focused||!D.relatedTarget)return;this.data.actions?.Blur||(g.focused=!1);const{value:T}=D.target;g.userValue=T,g.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:g.commitKey,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}}),E(D)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",D=>{g.lastCommittedValue=null;const{data:T,target:O}=D,{value:k,selectionStart:j,selectionEnd:G}=O;let U=j,ne=G;switch(D.inputType){case"deleteWordBackward":{const ue=k.substring(0,j).match(/\w*[^\w]*$/);ue&&(U-=ue[0].length);break}case"deleteWordForward":{const ue=k.substring(j).match(/^[^\w]*\w*/);ue&&(ne+=ue[0].length);break}case"deleteContentBackward":j===G&&(U-=1);break;case"deleteContentForward":j===G&&(ne+=1)}D.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:k,change:T||"",willCommit:!1,selStart:U,selEnd:ne}})}),this._setEventListeners(s,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],D=>D.target.value)}if(b&&s.addEventListener("blur",b),this.data.comb){const D=(this.data.rect[2]-this.data.rect[0])/u;s.classList.add("comb"),s.style.letterSpacing=`calc(${D}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class mn extends kt{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class an extends kt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,s=n.id;let a=e.getValue(s,{value:n.exportValue===n.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const c=document.createElement("input");return V.add(c),c.setAttribute("data-element-id",s),c.disabled=n.readOnly,this._setRequired(c,this.data.required),c.type="checkbox",c.name=n.fieldName,a&&c.setAttribute("checked",!0),c.setAttribute("exportValue",n.exportValue),c.tabIndex=S,c.addEventListener("change",u=>{const{name:h,checked:g}=u.target;for(const b of this._getElementsByName(h,s)){const E=g&&b.exportValue===n.exportValue;b.domElement&&(b.domElement.checked=E),e.setValue(b.id,{value:E})}e.setValue(s,{value:g})}),c.addEventListener("resetform",u=>{u.target.checked=(n.defaultFieldValue||"Off")===n.exportValue}),this.enableScripting&&this.hasJSActions&&(c.addEventListener("updatefromsandbox",u=>{this._dispatchEventFromSandbox({value(g){g.target.checked="Off"!==g.detail.value,e.setValue(s,{value:g.target.checked})}},u)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class Tn extends kt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,s=n.id;let a=e.getValue(s,{value:n.fieldValue===n.buttonValue}).value;if("string"==typeof a&&(a=a!==n.buttonValue,e.setValue(s,{value:a})),a)for(const u of this._getElementsByName(n.fieldName,s))e.setValue(u.id,{value:!1});const c=document.createElement("input");if(V.add(c),c.setAttribute("data-element-id",s),c.disabled=n.readOnly,this._setRequired(c,this.data.required),c.type="radio",c.name=n.fieldName,a&&c.setAttribute("checked",!0),c.tabIndex=S,c.addEventListener("change",u=>{const{name:h,checked:g}=u.target;for(const b of this._getElementsByName(h,s))e.setValue(b.id,{value:!1});e.setValue(s,{value:g})}),c.addEventListener("resetform",u=>{const h=n.defaultFieldValue;u.target.checked=null!=h&&h===n.buttonValue}),this.enableScripting&&this.hasJSActions){const u=n.buttonValue;c.addEventListener("updatefromsandbox",h=>{this._dispatchEventFromSandbox({value:b=>{const E=u===b.detail.value;for(const D of this._getElementsByName(b.target.name)){const T=E&&D.id===s;D.domElement&&(D.domElement.checked=T),e.setValue(D.id,{value:T})}}},h)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class or extends Xt{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class Ui extends kt{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,s=e.getValue(n,{value:this.data.fieldValue}),a=document.createElement("select");V.add(a),a.setAttribute("data-element-id",n),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=S;let c=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",E=>{const D=this.data.defaultFieldValue;for(const T of a.options)T.selected=T.value===D});for(const E of this.data.options){const D=document.createElement("option");D.textContent=E.displayValue,D.value=E.exportValue,s.value.includes(E.exportValue)&&(D.setAttribute("selected",!0),c=!1),a.append(D)}let u=null;if(c){const E=document.createElement("option");E.value=" ",E.setAttribute("hidden",!0),E.setAttribute("selected",!0),a.prepend(E),u=()=>{E.remove(),a.removeEventListener("input",u),u=null},a.addEventListener("input",u)}const h=E=>{const D=E?"value":"textContent",{options:T,multiple:O}=a;return O?Array.prototype.filter.call(T,k=>k.selected).map(k=>k[D]):-1===T.selectedIndex?null:T[T.selectedIndex][D]};let g=h(!1);const b=E=>Array.prototype.map.call(E.target.options,T=>({displayValue:T.textContent,exportValue:T.value}));return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({value(T){u?.();const O=T.detail.value,k=new Set(Array.isArray(O)?O:[O]);for(const j of a.options)j.selected=k.has(j.value);e.setValue(n,{value:h(!0)}),g=h(!1)},multipleSelection(T){a.multiple=!0},remove(T){const O=a.options,k=T.detail.remove;O[k].selected=!1,a.remove(k),O.length>0&&-1===Array.prototype.findIndex.call(O,G=>G.selected)&&(O[0].selected=!0),e.setValue(n,{value:h(!0),items:b(T)}),g=h(!1)},clear(T){for(;0!==a.length;)a.remove(0);e.setValue(n,{value:null,items:[]}),g=h(!1)},insert(T){const{index:O,displayValue:k,exportValue:j}=T.detail.insert,G=a.children[O],U=document.createElement("option");U.textContent=k,U.value=j,G?G.before(U):a.append(U),e.setValue(n,{value:h(!0),items:b(T)}),g=h(!1)},items(T){const{items:O}=T.detail;for(;0!==a.length;)a.remove(0);for(const k of O){const{displayValue:j,exportValue:G}=k,U=document.createElement("option");U.textContent=j,U.value=G,a.append(U)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(n,{value:h(!0),items:b(T)}),g=h(!1)},indices(T){const O=new Set(T.detail.indices);for(const k of T.target.options)k.selected=O.has(k.index);e.setValue(n,{value:h(!0)}),g=h(!1)},editable(T){T.target.disabled=!T.detail.editable}},E)}),a.addEventListener("input",E=>{const D=h(!0),T=h(!1);e.setValue(n,{value:D}),E.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:g,change:T,changeEx:D,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],E=>E.target.value)):a.addEventListener("input",function(E){e.setValue(n,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ar extends We{constructor(e){const{data:n,elements:s}=e;super(e,{isRenderable:We._hasPopupData(n)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new ui({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const s of this.elements)s.popup=e,n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${Vr}${s}`).join(",")),this.container}}class ui{#e=this.#T.bind(this);#t=this.#S.bind(this);#n=this.#I.bind(this);#i=this.#A.bind(this);#r=null;#s=null;#a=null;#l=null;#d=null;#c=null;#u=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=null;#m=null;#y=!1;constructor({container:e,color:n,elements:s,titleObj:a,modificationDate:c,contentsObj:u,richText:h,parent:g,rect:b,parentRect:E,open:D}){this.#s=e,this.#v=a,this.#a=u,this.#g=h,this.#c=g,this.#r=n,this.#f=b,this.#u=E,this.#d=s,this.#l=os.toDateObject(c),this.trigger=s.flatMap(T=>T.getElementsToTriggerPopup());for(const T of this.trigger)T.addEventListener("click",this.#i),T.addEventListener("mouseenter",this.#n),T.addEventListener("mouseleave",this.#t),T.classList.add("popupTriggerArea");for(const T of s)T.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,D&&this.#A()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#r){const c=e.style.outlineColor=ze.makeHexColor(...this.#r);e.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${c} 30%, white)`:ze.makeHexColor(...this.#r.map(h=>Math.floor(.7*(255-h)+h)))}const n=document.createElement("span");n.className="header";const s=document.createElement("h1");if(n.append(s),({dir:s.dir,str:s.textContent}=this.#v),e.append(n),this.#l){const c=document.createElement("span");c.classList.add("popupDate"),c.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),c.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),n.append(c)}const a=this.#_;if(a)R.render({xfaHtml:a,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const c=this._formatContents(this.#a);e.append(c)}this.#s.append(e)}get#_(){const e=this.#g,n=this.#a;return e?.str&&(!n?.str||n.str===e.str)&&this.#g.html||null}get#w(){return this.#_?.attributes?.style?.fontSize||0}get#E(){return this.#_?.attributes?.style?.color||null}#C(e){const n=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},a={style:{color:this.#E,fontSize:this.#w?`calc(${this.#w}px * var(--scale-factor))`:""}};for(const c of e.split("\n"))n.push({name:"span",value:c,attributes:a});return s}_formatContents({str:e,dir:n}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=n;const a=e.split(/(?:\r\n?|\n)/);for(let c=0,u=a.length;c<u;++c)s.append(document.createTextNode(a[c])),c<u-1&&s.append(document.createElement("br"));return s}#T(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#o)&&this.#A()}updateEdited({rect:e,popupContent:n}){this.#m||={contentsObj:this.#a,richText:this.#g},e&&(this.#p=null),n&&(this.#g=this.#C(n),this.#a=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&(({contentsObj:this.#a,richText:this.#g}=this.#m),this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#M(){if(null!==this.#p)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:c}}}=this.#c;let u=!!this.#u,h=u?this.#u:this.#f;for(const k of this.#d)if(!h||null!==ze.intersect(k.data.rect,h)){h=k.data.rect,u=!0;break}const g=ze.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]);this.#p=[100*(g[0]+(u?h[2]-h[0]+5:0)-a)/n,100*(g[1]-c)/s];const{style:O}=this.#s;O.left=`${this.#p[0]}%`,O.top=`${this.#p[1]}%`}#A(){this.#o=!this.#o,this.#o?(this.#I(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#I(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!this.#o&&this.isVisible&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#I(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return!1===this.#s.hidden}}class lr extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ge.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const s=document.createElement("span");s.textContent=n,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class kr extends We{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=te(e.rect),a=this.svgFactory.create(n,s,!0),c=this.#e=this.svgFactory.createElement("svg:line");return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Zr extends We{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=te(e.rect),a=this.svgFactory.create(n,s,!0),c=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:rect");return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",s-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class rl extends We{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=te(e.rect),a=this.svgFactory.create(n,s,!0),c=e.borderStyle.width,u=this.#e=this.svgFactory.createElement("svg:ellipse");return u.setAttribute("cx",n/2),u.setAttribute("cy",s/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",s/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Gs extends We{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:a}}=this;if(!n)return this.container;const{width:c,height:u}=te(e),h=this.svgFactory.create(c,u,!0);let g=[];for(let E=0,D=n.length;E<D;E+=2)g.push(`${n[E]-e[0]},${e[3]-n[E+1]}`);g=g.join(" ");const b=this.#e=this.svgFactory.createElement(this.svgElementName);return b.setAttribute("points",g),b.setAttribute("stroke-width",s.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),h.append(b),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dc extends Gs{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _a extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ys extends We{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=ge.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:s,popupRef:a}}=this,{width:c,height:u}=te(e),h=this.svgFactory.create(c,u,!0);for(const g of n){let b=[];for(let D=0,T=g.length;D<T;D+=2)b.push(`${g[D]-e[0]},${e[3]-g[D+1]}`);b=b.join(" ");const E=this.svgFactory.createElement(this.svgElementName);this.#e.push(E),E.setAttribute("points",b),E.setAttribute("stroke-width",s.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),!a&&this.hasPopupData&&this._createPopup(),h.append(E)}return this.container.append(h),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cr extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class sl extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ol extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class dn extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class jo extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class mi extends We{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||0===n.fillAlpha?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(100*n.fillAlpha)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:a}=lt.platform;return e.addEventListener("keydown",c=>{"Enter"===c.key&&(a?c.metaKey:c.ctrlKey)&&this.#t()}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Ti{#e=null;#t=null;#n=new Map;constructor({div:e,accessibilityManager:n,annotationCanvasMap:s,annotationEditorUIManager:a,page:c,viewport:u}){this.div=e,this.#e=n,this.#t=s,this.page=c,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}#i(e,n){const s=e.firstChild||e;s.id=`${Vr}${n}`,this.div.append(e),this.#e?.moveElementInDOM(this.div,e,s,!1)}render(e){var n=this;return(0,q.Z)(function*(){const{annotations:s}=e,a=n.div;Wi(a,n.viewport);const c=new Map,u={data:null,layer:a,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Di,annotationStorage:e.annotationStorage||new Ls,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:n,elements:null};for(const h of s){if(h.noHTML)continue;const g=16===h.annotationType;if(g){const D=c.get(h.id);if(!D)continue;u.elements=D}else{const{width:D,height:T}=te(h.rect);if(D<=0||T<=0)continue}u.data=h;const b=Se.create(u);if(!b.isRenderable)continue;if(!g&&h.popupRef){const D=c.get(h.popupRef);D?D.push(b):c.set(h.popupRef,[b])}const E=b.render();h.hidden&&(E.style.visibility="hidden"),n.#i(E,h.id),b._isEditable&&(n.#n.set(b.data.id,b),n._annotationEditorUIManager?.renderAnnotationElement(b))}n.#r()})()}update({viewport:e}){const n=this.div;this.viewport=e,Wi(n,{rotation:e.rotation}),this.#r(),n.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[n,s]of this.#t){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:c}=a;c?"CANVAS"===c.nodeName?c.replaceWith(s):c.classList.contains("annotationContent")?c.after(s):c.before(s):a.append(s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const fo=/\r\n?|\n/g;class Pn extends mt{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;#s=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Pn.prototype,n=c=>c.isEmpty(),s=Rr.TRANSLATE_SMALL,a=Rr.TRANSLATE_BIG;return pt(this,"_keyboardManager",new Yi([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";static _editorType=ge.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Pn._defaultColor||mt._defaultLineColor,this.#r=e.fontSize||Pn._defaultFontSize}static initialize(e,n){mt.initialize(e,n,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ue.FREETEXT_SIZE:Pn._defaultFontSize=n;break;case Ue.FREETEXT_COLOR:Pn._defaultColor=n}}updateParams(e,n){switch(e){case Ue.FREETEXT_SIZE:this.#a(n);break;case Ue.FREETEXT_COLOR:this.#l(n)}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,Pn._defaultFontSize],[Ue.FREETEXT_COLOR,Pn._defaultColor||mt._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,this.#r],[Ue.FREETEXT_COLOR,this.#e]]}#a(e){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#r)*this.parentScale),this.#r=a,this.#c()},s=this.#r;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const n=a=>{this.#e=this.editorDiv.style.color=a},s=this.#e;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Pn._internalPadding*e,-(Pn._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ge.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#d(){const e=[];this.editorDiv.normalize();for(const n of this.editorDiv.childNodes)e.push(Pn.#u(n));return e.join("\n")}#c(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:c}=this,u=c.style.display,h=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",a.div.append(this.div),s=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",h)}this.rotation%180==this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,n=this.#t=this.#d().trimEnd();if(e===n)return;const s=a=>{this.#t=a,a?(this.#o(),this._uiManager.rebuild(this),this.#c()):this.remove()};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),this.#c()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Pn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),mt._l10nPromise.get("pdfjs-free-text-default-content").then(a=>this.editorDiv?.setAttribute("default-content",a)),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#r}px * var(--scale-factor))`,s.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),nr(this,this.div,["dblclick","keydown"]),this.width){const[a,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this.#s;let[h,g]=this.getInitialTranslation();[h,g]=this.pageTranslationToScreen(h,g);const[b,E]=this.pageDimensions,[D,T]=this.pageTranslation;let O,k;switch(this.rotation){case 0:O=e+(u[0]-D)/b,k=n+this.height-(u[1]-T)/E;break;case 90:O=e+(u[0]-D)/b,k=n-(u[1]-T)/E,[h,g]=[g,-h];break;case 180:O=e-this.width+(u[0]-D)/b,k=n-(u[1]-T)/E,[h,g]=[-h,-g];break;case 270:O=e+(u[0]-D-this.height*E)/b,k=n+(u[1]-T-this.width*b)/E,[h,g]=[-g,h]}this.setAt(O*a,k*c,h,g)}else this.setAt(e*a,n*c,this.width*a,this.height*c);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fo,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:s}=n;if(1===s.length&&"text/plain"===s[0])return;e.preventDefault();const a=Pn.#p(n.getData("text")||"").replaceAll(fo,"\n");if(!a)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!a.includes("\n"))return u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void c.collapseToStart();const{startContainer:h,startOffset:g}=u,b=[],E=[];if(h.nodeType===Node.TEXT_NODE){const O=h.parentElement;if(E.push(h.nodeValue.slice(g).replaceAll(fo,"")),O!==this.editorDiv){let k=b;for(const j of this.editorDiv.childNodes)j!==O?k.push(Pn.#u(j)):k=E}b.push(h.nodeValue.slice(0,g).replaceAll(fo,""))}else if(h===this.editorDiv){let O=b,k=0;for(const j of this.editorDiv.childNodes)k++===g&&(O=E),O.push(Pn.#u(j))}this.#t=`${b.join("\n")}${a}${E.join("\n")}`,this.#o();const D=new Range;let T=b.reduce((O,k)=>O+k.length,0);for(const{firstChild:O}of this.editorDiv.childNodes)if(O.nodeType===Node.TEXT_NODE){const k=O.nodeValue.length;if(T<=k){D.setStart(O,T),D.setEnd(O,T);break}T-=k}c.removeAllRanges(),c.addRange(D)}#o(){if(this.editorDiv.replaceChildren(),this.#t)for(const e of this.#t.split("\n")){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#h(){return this.#t.replaceAll("\xa0"," ")}static#p(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,n,s){let a=null;if(e instanceof lr){const{data:{defaultAppearanceData:{fontSize:u,fontColor:h},rect:g,rotation:b,id:E},textContent:D,textPosition:T,parent:{page:{pageNumber:O}}}=e;if(!D||0===D.length)return null;a=e={annotationType:ge.FREETEXT,color:Array.from(h),fontSize:u,value:D.join("\n"),position:T,pageIndex:O-1,rect:g.slice(0),rotation:b,id:E,deleted:!1}}const c=super.deserialize(e,n,s);return c.#r=e.fontSize,c.#e=ze.makeHexColor(...e.color),c.#t=Pn.#p(e.value),c.annotationElementId=e.id||null,c.#s=a,c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=Pn._internalPadding*this.parentScale,s=this.getRect(n,n),a=mt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),c={annotationType:ge.FREETEXT,color:a,fontSize:this.#r,value:this.#h(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!this.#f(c)?null:(c.id=this.annotationElementId,c)}#f(e){const{value:n,fontSize:s,color:a,pageIndex:c}=this.#s;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((u,h)=>u!==a[h])||e.pageIndex!==c}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${this.#r}px * var(--scale-factor))`,s.color=this.#e,n.replaceChildren();for(const c of this.#t.split("\n")){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),n.append(u)}const a=Pn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:this.#t}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class gs{#e;#t=[];#n=[];constructor(e,n=0,s=0,a=!0){let c=1/0,u=-1/0,h=1/0,g=-1/0;const E=10**-4;for(const{x:U,y:ne,width:ue,height:de}of e){const ve=Math.floor((U-n)/E)*E,ye=Math.ceil((U+ue+n)/E)*E,Me=Math.floor((ne-n)/E)*E,He=Math.ceil((ne+de+n)/E)*E;this.#t.push([ve,Me,He,!0],[ye,Me,He,!1]),c=Math.min(c,ve),u=Math.max(u,ye),h=Math.min(h,Me),g=Math.max(g,He)}const D=u-c+2*s,T=g-h+2*s,O=c-s,k=h-s,j=this.#t.at(a?-1:-2),G=[j[0],j[2]];for(const U of this.#t){const[ne,ue,de]=U;U[0]=(ne-O)/D,U[1]=(ue-k)/T,U[2]=(de-k)/T}this.#e={x:O,y:k,width:D,height:T,lastPoint:G}}getOutlines(){this.#t.sort((n,s)=>n[0]-s[0]||n[1]-s[1]||n[2]-s[2]);const e=[];for(const n of this.#t)n[3]?(e.push(...this.#l(n)),this.#s(n)):(this.#a(n),e.push(...this.#l(n)));return this.#i(e)}#i(e){const n=[],s=new Set;for(const u of e){const[h,g,b]=u;n.push([h,g,u],[h,b,u])}n.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=n.length;u<h;u+=2){const g=n[u][2],b=n[u+1][2];g.push(b),b.push(g),s.add(g),s.add(b)}const a=[];let c;for(;s.size>0;){const u=s.values().next().value;let[h,g,b,E,D]=u;s.delete(u);let T=h,O=g;for(c=[h,b],a.push(c);;){let k;if(s.has(E))k=E;else{if(!s.has(D))break;k=D}s.delete(k),[h,g,b,E,D]=k,T!==h&&(c.push(T,O,h,O===g?g:b),T=h),O=O===g?b:g}c.push(T,O)}return new al(a,this.#e)}#r(e){const n=this.#n;let s=0,a=n.length-1;for(;s<=a;){const c=s+a>>1,u=n[c][0];if(u===e)return c;u<e?s=c+1:a=c-1}return a+1}#s([,e,n]){const s=this.#r(e);this.#n.splice(s,0,[e,n])}#a([,e,n]){const s=this.#r(e);for(let a=s;a<this.#n.length;a++){const[c,u]=this.#n[a];if(c!==e)break;if(c===e&&u===n)return void this.#n.splice(a,1)}for(let a=s-1;a>=0;a--){const[c,u]=this.#n[a];if(c!==e)break;if(c===e&&u===n)return void this.#n.splice(a,1)}}#l(e){const[n,s,a]=e,c=[[n,s,a]],u=this.#r(a);for(let h=0;h<u;h++){const[g,b]=this.#n[h];for(let E=0,D=c.length;E<D;E++){const[,T,O]=c[E];if(!(b<=T||O<=g)){if(T>=g){if(O>b)c[E][1]=b;else{if(1===D)return[];c.splice(E,1),E--,D--}continue}c[E][2]=g,O>b&&c.push([n,b,O])}}}return c}}class Pi{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,n){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof ll}}class al extends Pi{#e;#t;constructor(e,n){super(),this.#t=e,this.#e=n}toSVGPath(){const e=[];for(const n of this.#t){let[s,a]=n;e.push(`M${s} ${a}`);for(let c=2;c<n.length;c+=2){const u=n[c],h=n[c+1];u===s?(e.push(`V${h}`),a=h):h===a&&(e.push(`H${u}`),s=u)}e.push("Z")}return e.join(" ")}serialize([e,n,s,a],c){const u=[],h=s-e,g=a-n;for(const b of this.#t){const E=new Array(b.length);for(let D=0;D<b.length;D+=2)E[D]=e+b[D]*h,E[D+1]=a-b[D+1]*g;u.push(E)}return u}get box(){return this.#e}}class ms{#e;#t=[];#n;#i;#r=[];#s=new Float64Array(18);#a;#l;#d;#c;#u;#o;#h=[];static#p=8;static#f=2;static#g=ms.#p+ms.#f;constructor({x:e,y:n},s,a,c,u,h=0){this.#e=s,this.#o=c*a,this.#i=u,this.#s.set([NaN,NaN,NaN,NaN,e,n],6),this.#n=h,this.#c=ms.#p*a,this.#d=ms.#g*a,this.#u=a,this.#h.push(e,n)}get free(){return!0}isEmpty(){return isNaN(this.#s[8])}#v(){const e=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,a,c,u]=this.#e;return[(this.#a+(e[0]-n[0])/2-s)/c,(this.#l+(e[1]-n[1])/2-a)/u,(this.#a+(n[0]-e[0])/2-s)/c,(this.#l+(n[1]-e[1])/2-a)/u]}add({x:e,y:n}){this.#a=e,this.#l=n;const[s,a,c,u]=this.#e;let[h,g,b,E]=this.#s.subarray(8,12);const D=e-b,T=n-E,O=Math.hypot(D,T);if(O<this.#d)return!1;const k=O-this.#c,j=k/O,G=j*D,U=j*T;let ne=h,ue=g;h=b,g=E,b+=G,E+=U,this.#h?.push(e,n);const ye=-U/k*this.#o,Me=G/k*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([b+ye,E+Me],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([b-ye,E-Me],16),isNaN(this.#s[6])?(0===this.#r.length&&(this.#s.set([h+ye,g+Me],2),this.#r.push(NaN,NaN,NaN,NaN,(h+ye-s)/c,(g+Me-a)/u),this.#s.set([h-ye,g-Me],14),this.#t.push(NaN,NaN,NaN,NaN,(h-ye-s)/c,(g-Me-a)/u)),this.#s.set([ne,ue,h,g,b,E],6),!this.isEmpty()):(this.#s.set([ne,ue,h,g,b,E],6),Math.abs(Math.atan2(ue-g,ne-h)-Math.atan2(U,G))<Math.PI/2?([h,g,b,E]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+b)/2-s)/c,((g+E)/2-a)/u),[h,g,ne,ue]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((ne+h)/2-s)/c,((ue+g)/2-a)/u),!0):([ne,ue,h,g,b,E]=this.#s.subarray(0,6),this.#r.push(((ne+5*h)/6-s)/c,((ue+5*g)/6-a)/u,((5*h+b)/6-s)/c,((5*g+E)/6-a)/u,((h+b)/2-s)/c,((g+E)/2-a)/u),[b,E,h,g,ne,ue]=this.#s.subarray(12,18),this.#t.push(((ne+5*h)/6-s)/c,((ue+5*g)/6-a)/u,((5*h+b)/6-s)/c,((5*g+E)/6-a)/u,((h+b)/2-s)/c,((g+E)/2-a)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,n=this.#t,s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[c,u,h,g]=this.#e,[b,E,D,T]=this.#v();if(isNaN(this.#s[6])&&!this.isEmpty())return`M${(this.#s[2]-c)/h} ${(this.#s[3]-u)/g} L${(this.#s[4]-c)/h} ${(this.#s[5]-u)/g} L${b} ${E} L${D} ${T} L${(this.#s[16]-c)/h} ${(this.#s[17]-u)/g} L${(this.#s[14]-c)/h} ${(this.#s[15]-u)/g} Z`;const O=[];O.push(`M${e[4]} ${e[5]}`);for(let k=6;k<e.length;k+=6)isNaN(e[k])?O.push(`L${e[k+4]} ${e[k+5]}`):O.push(`C${e[k]} ${e[k+1]} ${e[k+2]} ${e[k+3]} ${e[k+4]} ${e[k+5]}`);O.push(`L${(s[0]-c)/h} ${(s[1]-u)/g} L${b} ${E} L${D} ${T} L${(a[0]-c)/h} ${(a[1]-u)/g}`);for(let k=n.length-6;k>=6;k-=6)isNaN(n[k])?O.push(`L${n[k+4]} ${n[k+5]}`):O.push(`C${n[k]} ${n[k+1]} ${n[k+2]} ${n[k+3]} ${n[k+4]} ${n[k+5]}`);return O.push(`L${n[4]} ${n[5]} Z`),O.join(" ")}getOutlines(){const e=this.#r,n=this.#t,s=this.#s,a=s.subarray(4,6),c=s.subarray(16,18),[u,h,g,b]=this.#e,E=new Float64Array((this.#h?.length??0)+2);for(let U=0,ne=E.length-2;U<ne;U+=2)E[U]=(this.#h[U]-u)/g,E[U+1]=(this.#h[U+1]-h)/b;E[E.length-2]=(this.#a-u)/g,E[E.length-1]=(this.#l-h)/b;const[D,T,O,k]=this.#v();if(isNaN(s[6])&&!this.isEmpty()){const U=new Float64Array(36);return U.set([NaN,NaN,NaN,NaN,(s[2]-u)/g,(s[3]-h)/b,NaN,NaN,NaN,NaN,(s[4]-u)/g,(s[5]-h)/b,NaN,NaN,NaN,NaN,D,T,NaN,NaN,NaN,NaN,O,k,NaN,NaN,NaN,NaN,(s[16]-u)/g,(s[17]-h)/b,NaN,NaN,NaN,NaN,(s[14]-u)/g,(s[15]-h)/b],0),new ll(U,E,this.#e,this.#u,this.#n,this.#i)}const j=new Float64Array(this.#r.length+24+this.#t.length);let G=e.length;for(let U=0;U<G;U+=2)isNaN(e[U])?j[U]=j[U+1]=NaN:(j[U]=e[U],j[U+1]=e[U+1]);j.set([NaN,NaN,NaN,NaN,(a[0]-u)/g,(a[1]-h)/b,NaN,NaN,NaN,NaN,D,T,NaN,NaN,NaN,NaN,O,k,NaN,NaN,NaN,NaN,(c[0]-u)/g,(c[1]-h)/b],G),G+=24;for(let U=n.length-6;U>=6;U-=6)for(let ne=0;ne<6;ne+=2)isNaN(n[U+ne])?(j[G]=j[G+1]=NaN,G+=2):(j[G]=n[U+ne],j[G+1]=n[U+ne+1],G+=2);return j.set([NaN,NaN,NaN,NaN,n[4],n[5]],G),new ll(j,E,this.#e,this.#u,this.#n,this.#i)}}class ll extends Pi{#e;#t=null;#n;#i;#r;#s;#a;constructor(e,n,s,a,c,u){super(),this.#a=e,this.#r=n,this.#e=s,this.#s=a,this.#n=c,this.#i=u,this.#c(u);const{x:h,y:g,width:b,height:E}=this.#t;for(let D=0,T=e.length;D<T;D+=2)e[D]=(e[D]-h)/b,e[D+1]=(e[D+1]-g)/E;for(let D=0,T=n.length;D<T;D+=2)n[D]=(n[D]-h)/b,n[D+1]=(n[D+1]-g)/E}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let n=6,s=this.#a.length;n<s;n+=6)isNaN(this.#a[n])?e.push(`L${this.#a[n+4]} ${this.#a[n+5]}`):e.push(`C${this.#a[n]} ${this.#a[n+1]} ${this.#a[n+2]} ${this.#a[n+3]} ${this.#a[n+4]} ${this.#a[n+5]}`);return e.push("Z"),e.join(" ")}serialize([e,n,s,a],c){const u=s-e,h=a-n;let g,b;switch(c){case 0:g=this.#l(this.#a,e,a,u,-h),b=this.#l(this.#r,e,a,u,-h);break;case 90:g=this.#d(this.#a,e,n,u,h),b=this.#d(this.#r,e,n,u,h);break;case 180:g=this.#l(this.#a,s,n,-u,h),b=this.#l(this.#r,s,n,-u,h);break;case 270:g=this.#d(this.#a,s,a,-u,-h),b=this.#d(this.#r,s,a,-u,-h)}return{outline:Array.from(g),points:[Array.from(b)]}}#l(e,n,s,a,c){const u=new Float64Array(e.length);for(let h=0,g=e.length;h<g;h+=2)u[h]=n+e[h]*a,u[h+1]=s+e[h+1]*c;return u}#d(e,n,s,a,c){const u=new Float64Array(e.length);for(let h=0,g=e.length;h<g;h+=2)u[h]=n+e[h+1]*a,u[h+1]=s+e[h]*c;return u}#c(e){const n=this.#a;let s=n[4],a=n[5],c=s,u=a,h=s,g=a,b=s,E=a;const D=e?Math.max:Math.min;for(let G=6,U=n.length;G<U;G+=6){if(isNaN(n[G]))c=Math.min(c,n[G+4]),u=Math.min(u,n[G+5]),h=Math.max(h,n[G+4]),g=Math.max(g,n[G+5]),E<n[G+5]?(b=n[G+4],E=n[G+5]):E===n[G+5]&&(b=D(b,n[G+4]));else{const ne=ze.bezierBoundingBox(s,a,...n.slice(G,G+6));c=Math.min(c,ne[0]),u=Math.min(u,ne[1]),h=Math.max(h,ne[2]),g=Math.max(g,ne[3]),E<ne[3]?(b=ne[2],E=ne[3]):E===ne[3]&&(b=D(b,ne[2]))}s=n[G+4],a=n[G+5]}const T=c-this.#n,O=u-this.#n,k=h-c+2*this.#n,j=g-u+2*this.#n;this.#t={x:T,y:O,width:k,height:j,lastPoint:[b,E]}}get box(){return this.#t}getNewOutline(e,n){const{x:s,y:a,width:c,height:u}=this.#t,[h,g,b,E]=this.#e,D=c*b,T=u*E,O=s*b+h,k=a*E+g,j=new ms({x:this.#r[0]*D+O,y:this.#r[1]*T+k},this.#e,this.#s,e,this.#i,n??this.#n);for(let G=2;G<this.#r.length;G+=2)j.add({x:this.#r[G]*D+O,y:this.#r[G+1]*T+k});return j.getOutlines()}}class ii{#e=this.#f.bind(this);#t=this.#v.bind(this);#n=null;#i=null;#r;#s=null;#a=!1;#l=!1;#d=null;#c;#u=null;#o;static get _keyboardManager(){return pt(this,"_keyboardManager",new Yi([[["Escape","mac+Escape"],ii.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ii.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ii.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ii.prototype._moveToPrevious],[["Home","mac+Home"],ii.prototype._moveToBeginning],[["End","mac+End"],ii.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#l=!1,this.#o=Ue.HIGHLIGHT_COLOR,this.#d=e):(this.#l=!0,this.#o=Ue.HIGHLIGHT_DEFAULT_COLOR),this.#u=e?._uiManager||n,this.#c=this.#u._eventBus,this.#r=e?.color||this.#u?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const e=this.#n=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const n=this.#u._signal;e.addEventListener("click",this.#g.bind(this),{signal:n}),e.addEventListener("keydown",this.#e,{signal:n});const s=this.#i=document.createElement("span");return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=this.#r,e.append(s),e}renderMainDropdown(){const e=this.#s=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),n=this.#u._signal;e.addEventListener("contextmenu",Sn,{signal:n}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,a]of this.#u.highlightColors){const c=document.createElement("button");c.tabIndex="0",c.role="option",c.setAttribute("data-color",a),c.title=s,c.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${s}`);const u=document.createElement("span");c.append(u),u.className="swatch",u.style.backgroundColor=a,c.setAttribute("aria-selected",a===this.#r),c.addEventListener("click",this.#p.bind(this,a),{signal:n}),e.append(c)}return e.addEventListener("keydown",this.#e,{signal:n}),e}#p(e,n){n.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#o,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#n)return void this.#g(e);const n=e.target.getAttribute("data-color");n&&this.#p(n,e)}_moveToNext(e){this.#m?e.target!==this.#n?e.target.nextSibling?.focus():this.#s.firstChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#s?.firstChild&&e.target!==this.#n?(this.#m||this.#g(e),e.target.previousSibling?.focus()):this.#m&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#m?this.#s.firstChild?.focus():this.#g(e)}_moveToEnd(e){this.#m?this.#s.lastChild?.focus():this.#g(e)}#f(e){ii._keyboardManager.exec(this,e)}#g(e){if(this.#m)return void this.hideDropdown();if(this.#a=0===e.detail,window.addEventListener("pointerdown",this.#t,{signal:this.#u._signal}),this.#s)return void this.#s.classList.remove("hidden");const n=this.#s=this.#h();this.#n.append(n)}#v(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#t)}get#m(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#l){if(!this.#m)return void this.#d?.unselect();this.hideDropdown(),this.#n.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#i&&(this.#i.style.backgroundColor=e),!this.#s)return;const n=this.#u.highlightColors.values();for(const s of this.#s.children)s.setAttribute("aria-selected",n.next().value===e)}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s?.remove(),this.#s=null}}class Cn extends mt{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#a=null;#l=0;#d=null;#c=null;#u=null;#o=!1;#h=null;#p;#f=null;#g="";#v;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=ge.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Cn.prototype;return pt(this,"_keyboardManager",new Yi([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Cn._defaultColor,this.#v=e.thickness||Cn._defaultThickness,this.#p=e.opacity||Cn._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#_(e),this.#M()):(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#l=e.focusOffset,this.#y(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#v,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new gs(this.#n,.001);this.#c=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#c.box);const n=new gs(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#s=n.getOutlines();const{lastPoint:s}=this.#s.box;this.#h=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:n,clipPathId:s}){if(this.#c=e,this.#s=e.getNewOutline(this.#v/2+1.5,.0025),n>=0)this.#u=n,this.#i=s,this.parent.drawLayer.finalizeLine(n,e),this.#f=this.parent.drawLayer.highlightOutline(this.#s);else if(this.parent){const E=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#u,e),this.parent.drawLayer.updateBox(this.#u,Cn.#A(this.#c.box,(E-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,Cn.#A(this.#s.box,E))}const{x:c,y:u,width:h,height:g}=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=h,this.height=g;break;case 90:{const[E,D]=this.parentDimensions;this.x=u,this.y=1-c,this.width=h*D/E,this.height=g*E/D;break}case 180:this.x=1-c,this.y=1-u,this.width=h,this.height=g;break;case 270:{const[E,D]=this.parentDimensions;this.x=1-u,this.y=c,this.width=h*D/E,this.height=g*E/D;break}}const{lastPoint:b}=this.#s.box;this.#h=[(b[0]-c)/h,(b[1]-u)/g]}static initialize(e,n){mt.initialize(e,n),Cn._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case Ue.HIGHLIGHT_DEFAULT_COLOR:Cn._defaultColor=n;break;case Ue.HIGHLIGHT_THICKNESS:Cn._defaultThickness=n}}translateInPage(e,n){}get toolbarPosition(){return this.#h}updateParams(e,n){switch(e){case Ue.HIGHLIGHT_COLOR:this.#w(n);break;case Ue.HIGHLIGHT_THICKNESS:this.#E(n)}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Cn._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Cn._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Cn._defaultColor],[Ue.HIGHLIGHT_THICKNESS,this.#v||Cn._defaultThickness],[Ue.HIGHLIGHT_FREE,this.#o]]}#w(e){const n=a=>{this.color=a,this.parent?.drawLayer.changeColor(this.#u,a),this.#r?.updateColor(a)},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#E(e){const n=this.#v,s=a=>{this.#v=a,this.#C(a)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){var e=()=>super.addEditToolbar,n=this;return(0,q.Z)(function*(){const s=yield e().call(n);return s?(n._uiManager.highlightColors&&(n.#r=new ii({editor:n}),s.addColorPicker(n.#r)),s):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#P())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#T():e&&(this.#M(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#C(e){if(!this.#o)return;this.#_({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}#T(){null===this.#u||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#M(e=this.parent){null===this.#u&&(({id:this.#u,clipPathId:this.#i}=e.drawLayer.highlight(this.#c,this.color,this.#p)),this.#f=e.drawLayer.highlightOutline(this.#s),this.#d&&(this.#d.style.clipPath=this.#i))}static#A({x:e,y:n,width:s,height:a},c){switch(c){case 90:return{x:1-n-a,y:e,width:a,height:s};case 180:return{x:1-e-s,y:1-n-a,width:s,height:a};case 270:return{x:n,y:1-e-s,width:a,height:s}}return{x:e,y:n,width:s,height:a}}rotate(e){const{drawLayer:n}=this.parent;let s;s=this.#o?Cn.#A(this.#c.box,e=(e-this.rotation+360)%360):Cn.#A(this,e),n.rotate(this.#u,e),n.rotate(this.#f,e),n.updateBox(this.#u,s),n.updateBox(this.#f,Cn.#A(this.#s.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#I.bind(this),{signal:this._uiManager._signal});const n=this.#d=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#i;const[s,a]=this.parentDimensions;return this.setDims(this.width*s,this.height*a),nr(this,this.#d,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#f,"hovered")}#I(e){Cn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1)}}#S(e){if(!this.#e)return;const n=window.getSelection();e?n.setPosition(this.#e,this.#t):n.setPosition(this.#a,this.#l)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#S(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#u,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#L(){if(this.#o)return null;const[e,n]=this.pageDimensions,[s,a]=this.pageTranslation,c=this.#n,u=new Float32Array(8*c.length);let h=0;for(const{x:g,y:b,width:E,height:D}of c){const T=g*e+s,O=(1-b-D)*n+a;u[h]=u[h+4]=T,u[h+1]=u[h+3]=O,u[h+2]=u[h+6]=T+E*e,u[h+5]=u[h+7]=O+D*n,h+=8}return u}#D(e){return this.#c.serialize(e,this.#P())}static startHighlighting(e,n,{target:s,x:a,y:c}){const{x:u,y:h,width:g,height:b}=s.getBoundingClientRect(),E=new AbortController,D=e.combinedSignal(E),O=k=>{E.abort(),this.#x(e,k)};window.addEventListener("blur",O,{signal:D}),window.addEventListener("pointerup",O,{signal:D}),window.addEventListener("pointerdown",k=>{k.preventDefault(),k.stopPropagation()},{capture:!0,passive:!1,signal:D}),window.addEventListener("contextmenu",Sn,{signal:D}),s.addEventListener("pointermove",this.#b.bind(this,e),{signal:D}),this._freeHighlight=new ms({x:a,y:c},[u,h,g,b],e.scale,this._defaultThickness/2,n,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#b(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#x(e,n){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,n,s){const a=super.deserialize(e,n,s),{rect:[c,u,h,g],color:b,quadPoints:E}=e;a.color=ze.makeHexColor(...b),a.#p=e.opacity;const[D,T]=a.pageDimensions;a.width=(h-c)/D,a.height=(g-u)/T;const O=a.#n=[];for(let k=0;k<E.length;k+=8)O.push({x:(E[4]-h)/D,y:(g-(1-E[k+5]))/T,width:(E[k+2]-E[k])/D,height:(E[k+5]-E[k+1])/T});return a.#y(),a}serialize(e=!1){if(this.isEmpty()||e)return null;const n=this.getRect(0,0),s=mt._colorManager.convert(this.color);return{annotationType:ge.HIGHLIGHT,color:s,opacity:this.#p,thickness:this.#v,quadPoints:this.#L(),outlines:this.#D(n),pageIndex:this.pageIndex,rect:n,rotation:this.#P(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class Jn extends mt{#e=0;#t=0;#n=null;#i=new Path2D;#r=!1;#s=null;#a=!1;#l=!1;#d=null;#c=null;#u=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ge.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){mt.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Ue.INK_THICKNESS:Jn._defaultThickness=n;break;case Ue.INK_COLOR:Jn._defaultColor=n;break;case Ue.INK_OPACITY:Jn._defaultOpacity=n/100}}updateParams(e,n){switch(e){case Ue.INK_THICKNESS:this.#p(n);break;case Ue.INK_COLOR:this.#f(n);break;case Ue.INK_OPACITY:this.#g(n)}}static get defaultPropertiesToUpdate(){return[[Ue.INK_THICKNESS,Jn._defaultThickness],[Ue.INK_COLOR,Jn._defaultColor||mt._defaultLineColor],[Ue.INK_OPACITY,Math.round(100*Jn._defaultOpacity)]]}get propertiesToUpdate(){return[[Ue.INK_THICKNESS,this.thickness||Jn._defaultThickness],[Ue.INK_COLOR,this.color||Jn._defaultColor||mt._defaultLineColor],[Ue.INK_OPACITY,Math.round(100*(this.opacity??Jn._defaultOpacity))]]}#p(e){const n=a=>{this.thickness=a,this.#H()},s=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const n=a=>{this.color=a,this.#A()},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){const n=a=>{this.opacity=a,this.#A()},s=this.opacity;this.addCommands({cmd:n.bind(this,e/=100),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#L(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#H()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#d?.disconnect(),this.#d=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions;this.setDimensions(this.width*e,this.height*n)}enableEditMode(){this.#r||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#I())}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#S())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#v(){const{parentRotation:e,parentDimensions:[n,s]}=this;switch(e){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}}#m(){const{ctx:e,color:n,opacity:s,thickness:a,parentScale:c,scaleFactor:u}=this;e.lineWidth=a*c/u,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${function aa(f){return Math.round(Math.min(255,Math.max(1,255*f))).toString(16).padStart(2,"0")}(s)}`}#y(e,n){this.canvas.addEventListener("contextmenu",Sn,{signal:this._uiManager._signal}),this.#S(),this.#s=new AbortController;const s=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,this.#l||(this.#l=!0,this.#b(),this.thickness||=Jn._defaultThickness,this.color||=Jn._defaultColor||mt._defaultLineColor,this.opacity??=Jn._defaultOpacity),this.currentPath.push([e,n]),this.#a=!1,this.#m(),this.#h=()=>{this.#C(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#_(e,n){const[s,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&n===a)return;const c=this.currentPath;let u=this.#i;if(c.push([e,n]),this.#a=!0,c.length<=2)return u.moveTo(...c[0]),void u.lineTo(e,n);3===c.length&&(this.#i=u=new Path2D,u.moveTo(...c[0])),this.#T(u,...c.at(-3),...c.at(-2),e,n)}#w(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#E(e,n){let s;if(this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),this.#_(e,n),this.#w(),1!==this.currentPath.length)s=this.#M();else{const g=[e,n];s=[[g,g.slice(),g.slice(),g]]}const a=this.#i,c=this.currentPath;this.currentPath=[],this.#i=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(c),this.paths.push(s),this.bezierPath2D.push(a),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#L(),this.#D()),this.#H())},mustExec:!0})}#C(){if(!this.#a)return;this.#a=!1;Math.ceil(this.thickness*this.parentScale);const n=this.currentPath.slice(-3),s=n.map(E=>E[0]),a=n.map(E=>E[1]),{ctx:b}=(Math.min(...s),Math.max(...s),Math.min(...a),Math.max(...a),this);b.save(),b.clearRect(0,0,this.canvas.width,this.canvas.height);for(const E of this.bezierPath2D)b.stroke(E);b.stroke(this.#i),b.restore()}#T(e,n,s,a,c,u,h){const g=(n+a)/2,b=(s+c)/2,E=(a+u)/2,D=(c+h)/2;e.bezierCurveTo(g+2*(a-g)/3,b+2*(c-b)/3,E+2*(a-E)/3,D+2*(c-D)/3,E,D)}#M(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let s,[a,c]=e[0];for(s=1;s<e.length-2;s++){const[T,O]=e[s],[k,j]=e[s+1],G=(T+k)/2,U=(O+j)/2;n.push([[a,c],[a+2*(T-a)/3,c+2*(O-c)/3],[G+2*(T-G)/3,U+2*(O-U)/3],[G,U]]),[a,c]=[G,U]}const[u,h]=e[s],[g,b]=e[s+1];return n.push([[a,c],[a+2*(u-a)/3,c+2*(h-c)/3],[g+2*(u-g)/3,b+2*(h-b)/3],[g,b]]),n}#A(){if(this.isEmpty())return void this.#R();this.#m();const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),this.#R();for(const s of this.bezierPath2D)n.stroke(s)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#H(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#I(){if(this.#c)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#S(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||this.#r||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#_(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#s?.abort(),this.#s=null,this.#I(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",Sn)},10),this.#E(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#L(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#d=new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)}),this.#d.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#d?.disconnect(),this.#d=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,a,c,u]=this.#v();if(this.setAt(s,a,0,0),this.setDims(c,u),this.#L(),this.width){const[h,g]=this.parentDimensions;this.setAspectRatio(this.width*h,this.height*g),this.setAt(e*h,n*g,this.width*h,this.height*g),this.#l=!0,this.#b(),this.setDims(this.width*h,this.height*g),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#b(){if(!this.#l)return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),this.#R()}setDimensions(e,n){const s=Math.round(e),a=Math.round(n);if(this.#u===s&&this.#o===a)return;this.#u=s,this.#o=a,this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=e/c,this.height=n/u,this.fixAndSetPosition(),this.#r&&this.#x(e,n),this.#b(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#x(e,n){const s=this.#B(),a=(e-s)/this.#t,c=(n-s)/this.#e;this.scaleFactor=Math.min(a,c)}#R(){const e=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#k(e){const n=new Path2D;for(let s=0,a=e.length;s<a;s++){const[c,u,h,g]=e[s];0===s&&n.moveTo(...c),n.bezierCurveTo(u[0],u[1],h[0],h[1],g[0],g[1])}return n}static#V(e,n,s){const[a,c,u,h]=n;switch(s){case 0:for(let g=0,b=e.length;g<b;g+=2)e[g]+=a,e[g+1]=h-e[g+1];break;case 90:for(let g=0,b=e.length;g<b;g+=2){const E=e[g];e[g]=e[g+1]+a,e[g+1]=E+c}break;case 180:for(let g=0,b=e.length;g<b;g+=2)e[g]=u-e[g],e[g+1]+=c;break;case 270:for(let g=0,b=e.length;g<b;g+=2){const E=e[g];e[g]=u-e[g+1],e[g+1]=h-E}break;default:throw new Error("Invalid rotation")}return e}static#j(e,n,s){const[a,c,u,h]=n;switch(s){case 0:for(let g=0,b=e.length;g<b;g+=2)e[g]-=a,e[g+1]=h-e[g+1];break;case 90:for(let g=0,b=e.length;g<b;g+=2){const E=e[g];e[g]=e[g+1]-c,e[g+1]=E-a}break;case 180:for(let g=0,b=e.length;g<b;g+=2)e[g]=u-e[g],e[g+1]-=c;break;case 270:for(let g=0,b=e.length;g<b;g+=2){const E=e[g];e[g]=h-e[g+1],e[g+1]=u-E}break;default:throw new Error("Invalid rotation")}return e}#N(e,n,s,a){const c=[],u=this.thickness/2,h=e*n+u,g=e*s+u;for(const b of this.paths){const E=[],D=[];for(let T=0,O=b.length;T<O;T++){const[k,j,G,U]=b[T];if(k[0]===U[0]&&k[1]===U[1]&&1===O){const je=e*k[0]+h,nt=e*k[1]+g;E.push(je,nt),D.push(je,nt);break}const ne=e*k[0]+h,ue=e*k[1]+g,de=e*j[0]+h,ve=e*j[1]+g,ye=e*G[0]+h,Me=e*G[1]+g,He=e*U[0]+h,re=e*U[1]+g;0===T&&(E.push(ne,ue),D.push(ne,ue)),E.push(de,ve,ye,Me,He,re),D.push(de,ve),T===O-1&&D.push(He,re)}c.push({bezier:Jn.#V(E,a,this.rotation),points:Jn.#V(D,a,this.rotation)})}return c}#F(){let e=1/0,n=-1/0,s=1/0,a=-1/0;for(const c of this.paths)for(const[u,h,g,b]of c){const E=ze.bezierBoundingBox(...u,...h,...g,...b);e=Math.min(e,E[0]),s=Math.min(s,E[1]),n=Math.max(n,E[2]),a=Math.max(a,E[3])}return[e,s,n,a]}#B(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#H(e=!1){if(this.isEmpty())return;if(!this.#r)return void this.#A();const n=this.#F(),s=this.#B();this.#t=Math.max(mt.MIN_SIZE,n[2]-n[0]),this.#e=Math.max(mt.MIN_SIZE,n[3]-n[1]);const a=Math.ceil(s+this.#t*this.scaleFactor),c=Math.ceil(s+this.#e*this.scaleFactor),[u,h]=this.parentDimensions;this.width=a/u,this.height=c/h,this.setAspectRatio(a,c);const g=this.translationX,b=this.translationY;this.translationX=-n[0],this.translationY=-n[1],this.#b(),this.#A(),this.#u=a,this.#o=c,this.setDims(a,c);const E=e?s/this.scaleFactor/2:0;this.translate(g-this.translationX-E,b-this.translationY-E)}static deserialize(e,n,s){if(e instanceof Ys)return null;const a=super.deserialize(e,n,s);a.thickness=e.thickness,a.color=ze.makeHexColor(...e.color),a.opacity=e.opacity;const[c,u]=a.pageDimensions,h=a.width*c,g=a.height*u,b=a.parentScale,E=e.thickness/2;a.#r=!0,a.#u=Math.round(h),a.#o=Math.round(g);const{paths:D,rect:T,rotation:O}=e;for(let{bezier:j}of D){j=Jn.#j(j,T,O);const G=[];a.paths.push(G);let U=b*(j[0]-E),ne=b*(j[1]-E);for(let de=2,ve=j.length;de<ve;de+=6){const je=b*(j[de+4]-E),nt=b*(j[de+5]-E);G.push([[U,ne],[b*(j[de]-E),b*(j[de+1]-E)],[b*(j[de+2]-E),b*(j[de+3]-E)],[je,nt]]),U=je,ne=nt}const ue=this.#k(G);a.bezierPath2D.push(ue)}const k=a.#F();return a.#t=Math.max(mt.MIN_SIZE,k[2]-k[0]),a.#e=Math.max(mt.MIN_SIZE,k[3]-k[1]),a.#x(h,g),a}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=mt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ge.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#N(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class Ea extends mt{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#a=null;#l=null;#d=null;#c=!1;#u=!1;static _type="stamp";static _editorType=ge.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,n){mt.initialize(e,n)}static get supportedTypes(){return pt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return pt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(ge.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#o(e,n=!1){e?(this.#e=e.bitmap,n||(this.#t=e.id,this.#c=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()):this.remove()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,n=!0){var s=this;return(0,q.Z)(function*(){if(s.hasAltTextData())return null;const{mlManager:a}=s._uiManager;if(!a)throw new Error("No ML.");if(!(yield a.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:c,width:u,height:h}=e||s.copyCanvas(null,!0).imageData,g=yield a.guess({name:"altText",request:{data:c,width:u,height:h,channels:c.length/(u*h)}});if(!g)throw new Error("No response from the AI service.");if(g.error)throw new Error("Error from the AI service.");if(g.cancel)return null;if(!g.output)throw new Error("No valid response from the AI service.");const b=g.output;return yield s.setGuessedAltText(b),n&&!s.hasAltTextData()&&(s.altTextData={alt:b,decorative:!1}),b})()}#p(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(a=>this.#o(a,!0)).finally(()=>this.#h());if(this.#i){const a=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(a).then(c=>this.#o(c)).finally(()=>this.#h()))}if(this.#r){const a=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(a).then(c=>this.#o(c)).finally(()=>this.#h()))}const n=document.createElement("input");n.type="file",n.accept=Ea.supportedTypesStr;const s=this._uiManager._signal;this.#n=new Promise(a=>{n.addEventListener("change",(0,q.Z)(function*(){if(n.files&&0!==n.files.length){e._uiManager.enableWaiting(!0);const c=yield e._uiManager.imageManager.getFromFile(n.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#o(c)}else e.remove();a()}),{signal:s}),n.addEventListener("cancel",()=>{this.remove(),a()},{signal:s})}).finally(()=>this.#h()),n.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#l?.disconnect(),this.#l=null,this.#d&&(clearTimeout(this.#d),this.#d=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#a&&this.#p(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#p()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width){const[s,a]=this.parentDimensions;this.setAt(e*s,n*a,this.width*s,this.height*a)}return this.div}#f(){const{div:e}=this;let{width:n,height:s}=this.#e;const[a,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*a,s=this.height*c;else if(n>u*a||s>u*c){const E=Math.min(u*a/n,u*c/s);n*=E,s*=E}const[h,g]=this.parentDimensions;this.setDims(n*h/a,s*g/c),this._uiManager.enableWaiting(!1);const b=this.#a=document.createElement("canvas");e.append(b),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow)&&(e.hidden=!1),this.#m(n,s),this.#_(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&b.setAttribute("aria-label",this.#s)}copyCanvas(e,n=!1){e||(e=224);const{width:s,height:a}=this.#e,c=document.createElement("canvas");let u=this.#e,h=s,g=a;if(s>e||a>e){const j=Math.min(e/s,e/a);h=Math.floor(s*j),g=Math.floor(a*j),this.#c||(u=this.#v(h,g))}c.width=h,c.height=g;const b=c.getContext("2d");b.filter=this._uiManager.hcmFilter;let E="white",D="#cfcfd8";"none"!==this._uiManager.hcmFilter?D="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",D="#42414d");const T=15,O=new OffscreenCanvas(30,30),k=O.getContext("2d");if(k.fillStyle=E,k.fillRect(0,0,30,30),k.fillStyle=D,k.fillRect(0,0,T,T),k.fillRect(T,T,T,T),b.fillStyle=b.createPattern(O,"repeat"),b.fillRect(0,0,h,g),n){const j=new OffscreenCanvas(h,g),G=j.getContext("2d",{willReadFrequently:!0});G.drawImage(u,0,0,u.width,u.height,0,0,h,g);const U=G.getImageData(0,0,h,g).data;return b.drawImage(j,0,0),{canvas:c,imageData:{width:h,height:g,data:U}}}return b.drawImage(u,0,0,u.width,u.height,0,0,h,g),{canvas:c,imageData:null}}#g(e,n){const[s,a]=this.parentDimensions;this.width=e/s,this.height=n/a,this.setDims(e,n),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#d&&clearTimeout(this.#d),this.#d=setTimeout(()=>{this.#d=null,this.#m(e,n)},200)}#v(e,n){const{width:s,height:a}=this.#e;let c=s,u=a,h=this.#e;for(;c>2*e||u>2*n;){const g=c,b=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const E=new OffscreenCanvas(c,u);E.getContext("2d").drawImage(h,0,0,g,b,0,0,c,u),h=E.transferToImageBitmap()}return h}#m(e,n){e=Math.ceil(e),n=Math.ceil(n);const s=this.#a;if(!s||s.width===e&&s.height===n)return;s.width=e,s.height=n;const a=this.#c?this.#e:this.#v(e,n),c=s.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(a,0,0,a.width,a.height,0,0,e,n)}getImageForAltText(){return this.#a}#y(e){if(e){if(this.#c){const a=this._uiManager.imageManager.getSvgUrl(this.#t);if(a)return a}const n=document.createElement("canvas");return({width:n.width,height:n.height}=this.#e),n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#c){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*Qe.PDF_TO_CSS_UNITS),c=Math.round(this.height*s*Qe.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,c);return u.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,a,c),u.transferToImageBitmap()}return structuredClone(this.#e)}#_(){this._uiManager._signal&&(this.#l=new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.#g(n.width,n.height)}),this.#l.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#l?.disconnect(),this.#l=null},{once:!0}))}static deserialize(e,n,s){if(e instanceof jo)return null;const a=super.deserialize(e,n,s),{rect:c,bitmapUrl:u,bitmapId:h,isSvg:g,accessibilityData:b}=e;h&&s.imageManager.isValidId(h)?a.#t=h:a.#i=u,a.#c=g;const[E,D]=a.pageDimensions;return a.width=(c[2]-c[0])/E,a.height=(c[3]-c[1])/D,b&&(a.altTextData=b),a}serialize(e=!1,n=null){if(this.isEmpty())return null;const s={annotationType:ge.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:a,altText:c}=this.serializeAltText(!1);if(!a&&c&&(s.accessibilityData={type:"Figure",alt:c}),null===n)return s;n.stamps||=new Map;const u=this.#c?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(n.stamps.has(this.#t)){if(this.#c){const h=n.stamps.get(this.#t);u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}}else n.stamps.set(this.#t,{area:u,serialized:s}),s.bitmap=this.#y(!1);return s}}let wa=(()=>{class f{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#a=!1;#l=!1;#d=!1;#c=null;#u=null;#o;static _initialized=!1;static#h=new Map([Pn,Jn,Ea,Cn].map(n=>[n._editorType,n]));constructor({uiManager:n,pageIndex:s,div:a,accessibilityManager:c,annotationLayer:u,drawLayer:h,textLayer:g,viewport:b,l10n:E}){const D=[...f.#h.values()];if(!f._initialized){f._initialized=!0;for(const T of D)T.initialize(E,n)}n.registerEditorTypes(D),this.#o=n,this.pageIndex=s,this.div=a,this.#e=c,this.#n=u,this.viewport=b,this.#c=g,this.drawLayer=h,this.#o.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ge.NONE}updateToolbar(n){this.#o.updateToolbar(n)}updateMode(n=this.#o.getMode()){switch(this.#m(),n){case ge.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case ge.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ge.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;for(const a of f.#h.values())s.toggle(`${a._type}Editing`,n===a._editorType);this.div.hidden=!1}hasTextLayer(n){return n===this.#c?.div}addInkEditorIfNeeded(n){if(this.#o.getMode()===ge.INK){if(!n)for(const a of this.#s.values())if(a.isEmpty())return void a.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(n){this.#o.setEditingState(n)}addCommands(n){this.#o.addCommands(n)}toggleDrawing(n=!1){this.div.classList.toggle("drawing",!n)}togglePointerEvents(n=!1){this.div.classList.toggle("disabled",!n)}toggleAnnotationLayerPointerEvents(n=!1){this.#n?.div.classList.toggle("disabled",!n)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const n=new Set;for(const a of this.#s.values())a.enableEditing(),a.show(!0),a.annotationElementId&&(this.#o.removeChangedExistingAnnotation(a),n.add(a.annotationElementId));if(!this.#n)return;const s=this.#n.getEditableAnnotations();for(const a of s){if(a.hide(),this.#o.isDeletedAnnotationElement(a.data.id)||n.has(a.data.id))continue;const c=this.deserialize(a);c&&(this.addOrRebuild(c),c.enableEditing())}}disable(){this.#d=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const n=new Map,s=new Map;for(const c of this.#s.values())if(c.disableEditing(),c.annotationElementId){if(null!==c.serialize()){n.set(c.annotationElementId,c);continue}s.set(c.annotationElementId,c),this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}if(this.#n){const c=this.#n.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#o.isDeletedAnnotationElement(h))continue;let g=s.get(h);g?(g.resetAnnotationElement(u),g.show(!1),u.show()):(g=n.get(h),g&&(this.#o.addChangedExistingAnnotation(g),g.renderAnnotationElement(u),g.show(!1)),u.show())}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:a}=this.div;for(const c of f.#h.values())a.remove(`${c._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#d=!1}getEditableAnnotation(n){return this.#n?.getEditableAnnotation(n)||null}setActiveEditor(n){this.#o.getActive()!==n&&this.#o.setActiveEditor(n)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#u){this.#u=new AbortController;const n=this.#o.combinedSignal(this.#u);this.#c.div.addEventListener("pointerdown",this.#p.bind(this),{signal:n}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#c.div.classList.remove("highlighting"))}#p(n){this.#o.unselectAll();const{target:s}=n;if(s===this.#c.div||s.classList.contains("endOfContent")&&this.#c.div.contains(s)){const{isMac:a}=lt.platform;if(0!==n.button||n.ctrlKey&&a)return;this.#o.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),Cn.startHighlighting(this,"ltr"===this.#o.direction,n),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),n.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const n=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:n}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:n})}disableClick(){this.#i?.abort(),this.#i=null}attach(n){this.#s.set(n.id,n);const{annotationElementId:s}=n;s&&this.#o.isDeletedAnnotationElement(s)&&this.#o.removeDeletedAnnotationElement(n)}detach(n){this.#s.delete(n.id),this.#e?.removePointerInTextLayer(n.contentDiv),!this.#d&&n.annotationElementId&&this.#o.addDeletedAnnotationElement(n)}remove(n){this.detach(n),this.#o.removeEditor(n),n.div.remove(),n.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(n){n.parent!==this&&(n.parent&&n.annotationElementId&&(this.#o.addDeletedAnnotationElement(n.annotationElementId),mt.deleteAnnotationElement(n),n.annotationElementId=null),this.attach(n),n.parent?.detach(n),n.setParent(this),n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))}add(n){if(n.parent!==this||!n.isAttachedToDOM){if(this.changeParent(n),this.#o.addEditor(n),this.attach(n),!n.isAttachedToDOM){const s=n.render();this.div.append(s),n.isAttachedToDOM=!0}n.fixAndSetPosition(),n.onceAdded(),this.#o.addToAnnotationStorage(n),n._reportTelemetry(n.telemetryInitialData)}}moveEditorInDOM(n){if(!n.isAttachedToDOM)return;const{activeElement:s}=document;n.div.contains(s)&&!this.#r&&(n._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,n.div.contains(document.activeElement)?n._focusEventsAllowed=!0:(n.div.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),s.focus())},0)),n._structTreeParentId=this.#e?.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addOrRebuild(n){n.needsToBeRebuilt()?(n.parent||=this,n.rebuild(),n.show()):this.add(n)}addUndoableEditor(n){this.addCommands({cmd:()=>n._uiManager.rebuild(n),undo:()=>{n.remove()},mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return f.#h.get(this.#o.getMode())}combinedSignal(n){return this.#o.combinedSignal(n)}#g(n){const s=this.#f;return s?new s.prototype.constructor(n):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(n,s){this.#o.updateToolbar(n),this.#o.updateMode(n);const{offsetX:a,offsetY:c}=this.#v(),u=this.getNextId(),h=this.#g({parent:this,id:u,x:a,y:c,uiManager:this.#o,isCentered:!0,...s});h&&this.add(h)}deserialize(n){return f.#h.get(n.annotationType??n.annotationEditorType)?.deserialize(n,this,this.#o)||null}createAndAddNewEditor(n,s,a={}){const c=this.getNextId(),u=this.#g({parent:this,id:c,x:n.offsetX,y:n.offsetY,uiManager:this.#o,isCentered:s,...a});return u&&this.add(u),u}#v(){const{x:n,y:s,width:a,height:c}=this.div.getBoundingClientRect(),u=Math.max(0,n),h=Math.max(0,s),E=(u+Math.min(window.innerWidth,n+a))/2-n,D=(h+Math.min(window.innerHeight,s+c))/2-s,[T,O]=this.viewport.rotation%180==0?[E,D]:[D,E];return{offsetX:T,offsetY:O}}addNewEditor(){this.createAndAddNewEditor(this.#v(),!0)}setSelected(n){this.#o.setSelected(n)}toggleSelected(n){this.#o.toggleSelected(n)}isSelected(n){return this.#o.isSelected(n)}unselect(n){this.#o.unselect(n)}pointerup(n){const{isMac:s}=lt.platform;if(!(0!==n.button||n.ctrlKey&&s)&&n.target===this.div&&this.#a){if(this.#a=!1,!this.#t)return void(this.#t=!0);if(this.#o.getMode()===ge.STAMP)return void this.#o.unselectAll();this.createAndAddNewEditor(n,!1)}}pointerdown(n){if(this.#o.getMode()===ge.HIGHLIGHT&&this.enableTextSelection(),this.#a)return void(this.#a=!1);const{isMac:s}=lt.platform;if(0!==n.button||n.ctrlKey&&s||n.target!==this.div)return;this.#a=!0;const a=this.#o.getActive();this.#t=!a||a.isEmpty()}findNewParent(n,s,a){const c=this.#o.findParent(s,a);return null!==c&&c!==this&&(c.changeParent(n),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const n of this.#s.values())this.#e?.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#m(){this.#l=!0;for(const n of this.#s.values())n.isEmpty()&&n.remove();this.#l=!1}render({viewport:n}){this.viewport=n,Wi(this.div,n);for(const s of this.#o.getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:n}){this.#o.commitOrRemove(),this.#m();const s=this.viewport.rotation,a=n.rotation;if(this.viewport=n,Wi(this.div,{rotation:a}),s!==a)for(const c of this.#s.values())c.rotate(a);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:n,pageHeight:s}=this.viewport.rawDims;return[n,s]}get scale(){return this.#o.viewParameters.realScale}}return f})();class vn{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#n.size>0)for(const n of this.#n.values())n.remove(),e.append(n);this.#e=e}}else this.#e=e}static get _svgFactory(){return pt(this,"_svgFactory",new Di)}static#r(e,{x:n=0,y:s=0,width:a=1,height:c=1}={}){const{style:u}=e;u.top=100*s+"%",u.left=100*n+"%",u.width=100*a+"%",u.height=100*c+"%"}#s(e){const n=vn._svgFactory.create(1,1,!0);return this.#e.append(n),n.setAttribute("aria-hidden",!0),vn.#r(n,e),n}#a(e,n){const s=vn._svgFactory.createElement("clipPath");e.append(s);const a=`clip_${n}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const c=vn._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${n}`),c.classList.add("clip"),a}highlight(e,n,s,a=!1){const c=this.#t++,u=this.#s(e.box);u.classList.add("highlight"),e.free&&u.classList.add("free");const h=vn._svgFactory.createElement("defs");u.append(h);const g=vn._svgFactory.createElement("path");h.append(g);const b=`path_p${this.pageIndex}_${c}`;g.setAttribute("id",b),g.setAttribute("d",e.toSVGPath()),a&&this.#i.set(c,g);const E=this.#a(h,b),D=vn._svgFactory.createElement("use");return u.append(D),u.setAttribute("fill",n),u.setAttribute("fill-opacity",s),D.setAttribute("href",`#${b}`),this.#n.set(c,u),{id:c,clipPathId:`url(#${E})`}}highlightOutline(e){const n=this.#t++,s=this.#s(e.box);s.classList.add("highlightOutline");const a=vn._svgFactory.createElement("defs");s.append(a);const c=vn._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${n}`;let h;if(c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),c.setAttribute("vector-effect","non-scaling-stroke"),e.free){s.classList.add("free");const E=vn._svgFactory.createElement("mask");a.append(E),h=`mask_p${this.pageIndex}_${n}`,E.setAttribute("id",h),E.setAttribute("maskUnits","objectBoundingBox");const D=vn._svgFactory.createElement("rect");E.append(D),D.setAttribute("width","1"),D.setAttribute("height","1"),D.setAttribute("fill","white");const T=vn._svgFactory.createElement("use");E.append(T),T.setAttribute("href",`#${u}`),T.setAttribute("stroke","none"),T.setAttribute("fill","black"),T.setAttribute("fill-rule","nonzero"),T.classList.add("mask")}const g=vn._svgFactory.createElement("use");s.append(g),g.setAttribute("href",`#${u}`),h&&g.setAttribute("mask",`url(#${h})`);const b=g.cloneNode();return s.append(b),g.classList.add("mainOutline"),b.classList.add("secondaryOutline"),this.#n.set(n,s),n}finalizeLine(e,n){const s=this.#i.get(e);this.#i.delete(e),this.updateBox(e,n.box),s.setAttribute("d",n.toSVGPath())}updateLine(e,n){this.#n.get(e).firstChild.firstChild.setAttribute("d",n.toSVGPath())}removeFreeHighlight(e){this.remove(e),this.#i.delete(e)}updatePath(e,n){this.#i.get(e).setAttribute("d",n.toSVGPath())}updateBox(e,n){vn.#r(this.#n.get(e),n)}show(e,n){this.#n.get(e).classList.toggle("hidden",!n)}rotate(e,n){this.#n.get(e).setAttribute("data-main-rotation",n)}changeColor(e,n){this.#n.get(e).setAttribute("fill",n)}changeOpacity(e,n){this.#n.get(e).setAttribute("fill-opacity",n)}addClass(e,n){this.#n.get(e).classList.add(n)}removeClass(e,n){this.#n.get(e).classList.remove(n)}remove(e){null!==this.#e&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear()}}var Sc=fe.AbortException,xh=fe.AnnotationEditorLayer,cl=fe.AnnotationEditorParamsType,Aa=fe.AnnotationEditorType,Ca=fe.AnnotationEditorUIManager,ul=fe.AnnotationLayer,Ks=fe.AnnotationMode,Lu=fe.CMapCompressionType,dl=fe.ColorPicker,Mc=fe.DOMSVGFactory,Nu=fe.DrawLayer,ku=fe.FeatureTest,Oe=fe.GlobalWorkerOptions,zt=fe.ImageKind,Ic=fe.InvalidPDFException,Da=fe.MissingPDFException,ri=fe.OPS,hl=fe.PDFDataRangeTransport,po=fe.PDFDateString,_r=fe.PDFWorker,Sa=fe.PasswordResponses,Ma=fe.PermissionFlag,xc=fe.PixelsPerInch,Fu=fe.RenderingCancelledException,Ia=fe.TextLayer,vi=fe.UnexpectedResponseException,Qr=fe.Util,fl=fe.VerbosityLevel,go=fe.XfaLayer,Jr=fe.build,Bu=fe.createValidAbsoluteUrl,Tc=fe.fetchData,y=fe.getDocument,C=fe.getFilenameFromUrl,m=fe.getPdfFilenameFromUrl,A=fe.getXfaPageViewport,x=fe.isDataScheme,N=fe.isPdfFile,H=fe.noContextMenu,ie=fe.normalizeUnicode,Z=fe.setLayerDimensions,Xe=fe.shadow,_t=fe.version;function Qt(f,e){this.v=f,this.k=e}function Ut(f){return new Qt(f,0)}function yi(f){var e,n;function s(c,u){try{var h=f[c](u),g=h.value,b=g instanceof Qt;Promise.resolve(b?g.v:g).then(function(E){if(b){var D="return"===c?"return":"next";if(!g.k||E.done)return s(D,E);E=f[D](E).value}a(h.done?"return":"normal",E)},function(E){s("throw",E)})}catch(E){a("throw",E)}}function a(c,u){switch(c){case"return":e.resolve({value:u,done:!0});break;case"throw":e.reject(u);break;default:e.resolve({value:u,done:!1})}(e=e.next)?s(e.key,e.arg):n=null}this._invoke=function(c,u){return new Promise(function(h,g){var b={key:c,arg:u,resolve:h,reject:g,next:null};n?n=n.next=b:(e=n=b,s(c,u))})},"function"!=typeof f.return&&(this.return=void 0)}function qs(f){return function(){return new yi(f.apply(this,arguments))}}function Un(f){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var s=n.done;return Promise.resolve(n.value).then(function(a){return{value:a,done:s}})}return(Un=function(s){this.s=s,this.n=s.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(s){var a=this.s.return;return void 0===a?Promise.resolve({value:s,done:!0}):e(a.apply(this.s,arguments))},throw:function(s){var a=this.s.return;return void 0===a?Promise.reject(s):e(a.apply(this.s,arguments))}},new Un(f)}yi.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yi.prototype.next=function(f){return this._invoke("next",f)},yi.prototype.throw=function(f){return this._invoke("throw",f)},yi.prototype.return=function(f){return this._invoke("return",f)};var di={d:(f,e)=>{for(var n in e)di.o(e,n)&&!di.o(f,n)&&Object.defineProperty(f,n,{enumerable:!0,get:e[n]})},o:(f,e)=>Object.prototype.hasOwnProperty.call(f,e)},xt=globalThis.pdfjsViewer={};di.d(xt,{AnnotationLayerBuilder:()=>ud,DownloadManager:()=>Al,EventBus:()=>Zh,FindState:()=>_s,GenericL10n:()=>ts,LinkTarget:()=>_o,PDFFindController:()=>$o,PDFHistory:()=>Af,PDFLinkService:()=>$n,PDFPageView:()=>ru,PDFScriptingManager:()=>Mf,PDFSinglePageViewer:()=>ou,PDFViewer:()=>Ga,ProgressBar:()=>vl,RenderingStates:()=>Dn,ScrollMode:()=>Kt,SimpleLinkService:()=>Fc,SpreadMode:()=>bi,StructTreeLayerBuilder:()=>Bl,TextLayerBuilder:()=>Co,XfaLayerBuilder:()=>Rd,parseQueryString:()=>Ho});const Dn={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},Kt={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},bi={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};class Ta{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}}function $u(f,e,n=!1){let s=f.offsetParent;if(!s)return void console.error("offsetParent is not set -- cannot scroll");let a=f.offsetTop+f.clientTop,c=f.offsetLeft+f.clientLeft;for(;s.clientHeight===s.scrollHeight&&s.clientWidth===s.scrollWidth||n&&(s.classList.contains("markedContent")||"hidden"===getComputedStyle(s).overflow);)if(a+=s.offsetTop,c+=s.offsetLeft,s=s.offsetParent,!s)return;e&&(void 0!==e.top&&(a+=e.top),void 0!==e.left&&(c+=e.left,s.scrollLeft=c)),s.scrollTop=a}function Ho(f){const e=new Map;for(const[n,s]of new URLSearchParams(f))e.set(n.toLowerCase(),s);return e}const Ph=/[\x00-\x1F]/g;function ml(f,e=!1){return Ph.test(f)?e?f.replaceAll(Ph,n=>"\0"===n?"":" "):f.replaceAll("\0",""):f}function Pa(f,e,n=0){let s=n,a=f.length-1;if(a<0||!e(f[a]))return f.length;if(e(f[s]))return s;for(;s<a;){const c=s+a>>1;e(f[c])?a=c:s=c+1}return s}function Rh(f){if(Math.floor(f)===f)return[f,1];const e=1/f;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const s=f>1?e:f;let g,a=0,c=1,u=1,h=1;for(;;){const b=a+u,E=c+h;if(E>8)break;s<=b/E?(u=b,h=E):(a=b,c=E)}return g=s-a/c<u/h-s?s===f?[a,c]:[c,a]:s===f?[u,h]:[h,u],g}function Rc(f,e){return f-f%e}function La(f){return Number.isInteger(f)&&f%90==0}function Oc(f){return f.width<=f.height}new Promise(function(f){window.requestAnimationFrame(f)});const es=document.documentElement.style;class vl{#e=null;#t=null;#n=0;#i=null;#r=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){this.#n=function Lh(f,e,n){return Math.min(Math.max(f,e),n)}(e,0,100),isNaN(e)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(e){if(!e)return;const s=e.parentNode.offsetWidth-e.offsetWidth;s>0&&this.#i.setProperty("--progressBar-end-offset",`${s}px`)}setDisableAutoFetch(e=5e3){100===this.#n||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#r&&(this.#r=!1,this.#e.add("hidden"))}show(){this.#r||(this.#r=!0,this.#e.remove("hidden"))}}function bl(f){return function Xu(f){return f<11904}(f)?function Zu(f){return 0==(65408&f)}(f)?function yl(f){return 32===f||9===f||13===f||10===f}(f)?0:function Qu(f){return f>=97&&f<=122||f>=65&&f<=90}(f)||function Nh(f){return f>=48&&f<=57}(f)||95===f?1:2:function Na(f){return 3584==(65408&f)}(f)?7:160===f?0:1:function vo(f){return f>=13312&&f<=40959||f>=63744&&f<=64255}(f)?3:function kh(f){return f>=12448&&f<=12543}(f)?4:function Ju(f){return f>=12352&&f<=12447}(f)?5:function ed(f){return f>=65376&&f<=65439}(f)?6:1}let Ri;const _s={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},_l={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},yo=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let bo;const Vo=/\p{M}+/gu,nd=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,kc=/([^\p{M}])\p{M}*$/u,Uo=/^\p{M}*([^\p{M}])/u,Pg=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,id=new Map,jh=new Map;let rd=null,sd=null;function od(f){const e=[];let n,s;for(;null!==(n=Pg.exec(f));){let{index:O}=n;for(const k of n[0]){let j=id.get(k);j||(j=k.normalize("NFD").length,id.set(k,j)),e.push([j,O++])}}if(0===e.length&&rd)s=rd;else if(e.length>0&&sd)s=sd;else{const U=`([${Object.keys(_l).join("")}])|([${function Fh(){return Ri||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",Ri}()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;s=0===e.length?rd=new RegExp(U+"|(\\u0000)","gum"):sd=new RegExp(U+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const a=[];for(;null!==(n=Vo.exec(f));)a.push([n[0].length,n.index]);let c=f.normalize("NFD");const u=[[0,0]];let h=0,g=0,b=0,E=0,D=0,T=!1;return c=c.replace(s,(O,k,j,G,U,ne,ue,de,ve,ye)=>{if(ye-=E,k){const Me=_l[k],He=Me.length;for(let re=1;re<He;re++)u.push([ye-b+re,b-re]);return b-=He-1,Me}if(j){let Me=jh.get(j);Me||(Me=j.normalize("NFKC"),jh.set(j,Me));const He=Me.length;for(let re=1;re<He;re++)u.push([ye-b+re,b-re]);return b-=He-1,Me}if(G)return T=!0,ye+D===a[h]?.[1]?++h:(u.push([ye-1-b+1,b-1]),b-=1,E+=1),u.push([ye-b+1,b]),E+=1,D+=1,G.charAt(0);if(U){const Me=U.endsWith("\n"),He=Me?U.length-2:U.length;T=!0;let re=He;ye+D===a[h]?.[1]&&(re-=a[h][0],++h);for(let je=1;je<=re;je++)u.push([ye-1-b+je,b-je]);return b-=re,E+=re,Me?(u.push([(ye+=He-1)-b+1,1+b]),b+=1,E+=1,D+=1,U.slice(0,He)):U}if(ne)return u.push([ye-b+(ne.length-2),1+b]),b+=1,E+=1,D+=1,ne.slice(0,-2);if(ue)return u.push([ye-b+(ue.length-1),b]),E+=1,D+=1,ue.slice(0,-1);if(de)return u.push([ye-b+1,b-1]),b-=1,E+=1,D+=1," ";if(ye+D===e[g]?.[1]){const Me=e[g][0]-1;++g;for(let He=1;He<=Me;He++)u.push([ye-(b-He),b-He]);b-=Me,E+=Me}return ve}),u.push([c.length,b]),[c,u,T]}class $o{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:n,updateMatchesCountOnProgress:s=!0}){this._linkService=e,this._eventBus=n,this.#t=s,this.onIsPageVisible=null,this.#r(),n._on("find",this.#i.bind(this)),n._on("findbarclose",this.#y.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#r(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;const n=this._pdfDocument,{type:s}=e;(null===this.#e||this.#a(e))&&(this._dirtyMatch=!0),this.#e=e,"highlightallchange"!==s&&this.#E(_s.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||n&&this._pdfDocument!==n)return;this.#u();const a=!this._highlightMatches,c=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),s?this._dirtyMatch?this.#p():"again"===s?(this.#p(),a&&this.#e.highlightAll&&this.#h()):"highlightallchange"===s?(c?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},250)})}scrollMatchIntoView({element:e=null,selectedLeft:n=0,pageIndex:s=-1,matchIndex:a=-1}){this._scrollMatches&&e&&-1!==a&&a===this._selected.matchIdx&&-1!==s&&s===this._selected.pageIdx&&(this._scrollMatches=!1,$u(e,{top:-50,left:n+-400},!0))}#r(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){const{query:e}=this.#e;return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=od(e)),this._normalizedQuery):(e||[]).filter(n=>!!n).map(n=>od(n)[0])}#a(e){const n=e.query,s=this.#e.query,a=typeof n;if(a!==typeof s)return!0;if("string"===a){if(n!==s)return!0}else if(JSON.stringify(n)!==JSON.stringify(s))return!0;switch(e.type){case"again":const u=this._selected.pageIdx+1,h=this._linkService;return u>=1&&u<=h.pagesCount&&u!==h.page&&!(this.onIsPageVisible?.(u)??1);case"highlightallchange":return!1}return!0}#l(e,n,s){let a=e.slice(0,n).match(kc);if(a){const c=e.charCodeAt(n),u=a[1].charCodeAt(0);if(bl(c)===bl(u))return!1}if(a=e.slice(n+s).match(Uo),a){const c=e.charCodeAt(n+s-1),u=a[1].charCodeAt(0);if(bl(c)===bl(u))return!1}return!0}#d(e,n){const{matchDiacritics:s}=this.#e;let a=!1;return(e=e.replaceAll(nd,(u,h,g,b,E,D)=>h?`[ ]*\\${h}[ ]*`:g?`[ ]*${g}[ ]*`:b?"[ ]+":s?E||D:E?yo.has(E.charCodeAt(0))?E:"":n?(a=!0,`${D}\\p{M}*`):D)).endsWith("[ ]*")&&(e=e.slice(0,e.length-4)),s&&n&&(bo||=String.fromCharCode(...yo),a=!0,e=`${e}(?=[${bo}]|[^\\p{M}]|$)`),[a,e]}#c(e){const n=this.#s;if(0===n.length)return;const a=this.match(n,this._pageContents[e],e),c=this._pageMatches[e]=[],u=this._pageMatchesLength[e]=[],h=this._pageDiffs[e];a?.forEach(({index:b,length:E})=>{const[D,T]=function Og(f,e,n){if(!f)return[e,n];const s=e,a=e+n-1;let c=Pa(f,E=>E[0]>=s);f[c][0]>s&&--c;let u=Pa(f,E=>E[0]>=a,c);f[u][0]>a&&--u;const h=s+f[c][1];return[h,a+f[u][1]+1-h]}(h,b,E);T&&(c.push(D),u.push(T))}),this.#e.highlightAll&&this.#o(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());const g=c.length;this._matchesCountTotal+=g,this.#t?g>0&&this.#w():++this.#n===this._linkService.pagesCount&&this.#w()}match(e,n,s){const a=this._hasDiacritics[s];let c=!1;if("string"==typeof e?[c,e]=this.#d(e,a):e=e.sort().reverse().map(D=>{const[T,O]=this.#d(D,a);return c||=T,`(${O})`}).join("|"),!e)return;const{caseSensitive:u,entireWord:h}=this.#e;e=new RegExp(e,`g${c?"u":""}${u?"":"i"}`);const b=[];let E;for(;null!==(E=e.exec(n));)h&&!this.#l(n,E.index,E[0].length)||b.push({index:E.index,length:E[0].length});return b}#u(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const n={disableNormalization:!0};for(let s=0,a=this._linkService.pagesCount;s<a;s++){const{promise:c,resolve:u}=Promise.withResolvers();this._extractTextPromises[s]=c,e=e.then(()=>this._pdfDocument.getPage(s+1).then(h=>h.getTextContent(n)).then(h=>{const g=[];for(const b of h.items)g.push(b.str),b.hasEOL&&g.push("\n");[this._pageContents[s],this._pageDiffs[s],this._hasDiacritics[s]]=od(g.join("")),u()},h=>{console.error(`Unable to get text content for page ${s+1}`,h),this._pageContents[s]="",this._pageDiffs[s]=null,this._hasDiacritics[s]=!1,u()}))}}#o(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){const e=this.#e.findPrevious,n=this._linkService.page-1,s=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=n,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let u=0;u<s;u++)this._pendingFindMatches.has(u)||(this._pendingFindMatches.add(u),this._extractTextPromises[u].then(()=>{this._pendingFindMatches.delete(u),this.#c(u)}))}if(0===this.#s.length)return void this.#E(_s.FOUND);if(this._resumePageIdx)return;const c=this._offset;if(this._pagesToSearch=s,null!==c.matchIdx){if(!e&&c.matchIdx+1<this._pageMatches[c.pageIdx].length||e&&c.matchIdx>0)return c.matchIdx=e?c.matchIdx-1:c.matchIdx+1,void this.#m(!0);this.#v(e)}this.#g()}#f(e){const n=this._offset,s=e.length,a=this.#e.findPrevious;return s?(n.matchIdx=a?s-1:0,this.#m(!0),!0):(this.#v(a),!!(n.wrapped&&(n.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let e=null;do{const n=this._offset.pageIdx;if(e=this._pageMatches[n],!e){this._resumePageIdx=n;break}}while(!this.#f(e))}#v(e){const n=this._offset,s=this._linkService.pagesCount;n.pageIdx=e?n.pageIdx-1:n.pageIdx+1,n.matchIdx=null,this._pagesToSearch--,(n.pageIdx>=s||n.pageIdx<0)&&(n.pageIdx=e?s-1:0,n.wrapped=!0)}#m(e=!1){let n=_s.NOT_FOUND;const s=this._offset.wrapped;if(this._offset.wrapped=!1,e){const a=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,n=s?_s.WRAPPED:_s.FOUND,-1!==a&&a!==this._selected.pageIdx&&this.#o(a)}this.#E(n,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#y(e){const n=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||n&&this._pdfDocument!==n||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#E(_s.FOUND),this._highlightMatches=!1,this.#h())})}#_(){const{pageIdx:e,matchIdx:n}=this._selected;let s=0,a=this._matchesCountTotal;if(-1!==n){for(let c=0;c<e;c++)s+=this._pageMatches[c]?.length||0;s+=n+1}return(s<1||s>a)&&(s=a=0),{current:s,total:a}}#w(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#_()})}#E(e,n=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===_s.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:n,entireWord:this.#e?.entireWord??null,matchesCount:this.#_(),rawQuery:this.#e?.query??null})}}const _o={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class $n{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:n=null,externalLinkRel:s=null,ignoreDestinationZoom:a=!1}={}){this.eventBus=e,this.externalLinkTarget=n,this.externalLinkRel=s,this._ignoreDestinationZoom=a,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,n=null){this.baseUrl=n,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(e){var n=this;return(0,q.Z)(function*(){if(!n.pdfDocument)return;let s,a,c;if("string"==typeof e?(s=e,a=yield n.pdfDocument.getDestination(e)):(s=null,a=yield e),!Array.isArray(a))return void console.error(`goToDestination: "${a}" is not a valid destination array, for dest="${e}".`);const[u]=a;if(u&&"object"==typeof u){if(c=n.pdfDocument.cachedPageNumber(u),!c)try{c=(yield n.pdfDocument.getPageIndex(u))+1}catch{return void console.error(`goToDestination: "${u}" is not a valid page reference, for dest="${e}".`)}}else Number.isInteger(u)&&(c=u+1);!c||c<1||c>n.pagesCount?console.error(`goToDestination: "${c}" is not a valid page number, for dest="${e}".`):(n.pdfHistory&&(n.pdfHistory.pushCurrentPosition(),n.pdfHistory.push({namedDest:s,explicitDest:a,pageNumber:c})),n.pdfViewer.scrollPageIntoView({pageNumber:c,destArray:a,ignoreDestinationZoom:n._ignoreDestinationZoom}))})()}goToPage(e){if(!this.pdfDocument)return;const n="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(n)&&n>0&&n<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(n)),this.pdfViewer.scrollPageIntoView({pageNumber:n})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,n,s=!1){if(!n||"string"!=typeof n)throw new Error('A valid "url" parameter must provided.');const a=s?_o.BLANK:this.externalLinkTarget,c=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=n:(e.href="",e.title=`Disabled: ${n}`,e.onclick=()=>!1);let u="";switch(a){case _o.NONE:break;case _o.SELF:u="_self";break;case _o.BLANK:u="_blank";break;case _o.PARENT:u="_parent";break;case _o.TOP:u="_top"}e.target=u,e.rel="string"==typeof c?c:"noopener noreferrer nofollow"}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const n=JSON.stringify(e);if(n.length>0)return this.getAnchorUrl("#"+escape(n))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let n,s;if(e.includes("=")){const a=Ho(e);if(a.has("search")){const c=a.get("search").replaceAll('"',""),u="true"===a.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:u?c:c.match(/\S+/g)})}if(a.has("page")&&(n=0|a.get("page")||1),a.has("zoom")){const c=a.get("zoom").split(","),u=c[0],h=parseFloat(u);u.includes("Fit")?"Fit"===u||"FitB"===u?s=[null,{name:u}]:"FitH"===u||"FitBH"===u||"FitV"===u||"FitBV"===u?s=[null,{name:u},c.length>1?0|c[1]:null]:"FitR"===u?5!==c.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):s=[null,{name:u},0|c[1],0|c[2],0|c[3],0|c[4]]:console.error(`PDFLinkService.setHash: "${u}" is not a valid zoom value.`):s=[null,{name:"XYZ"},c.length>1?0|c[1]:null,c.length>2?0|c[2]:null,h?h/100:u]}return s?this.pdfViewer.scrollPageIntoView({pageNumber:n||this.page,destArray:s,allowNegativeOffset:!0}):n&&(this.page=n),a.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:a.get("pagemode")}),void(a.has("nameddest")&&this.goToDestination(a.get("nameddest")))}s=unescape(e);try{s=JSON.parse(s),Array.isArray(s)||(s=s.toString())}catch{}"string"==typeof s||$n.#e(s)?this.goToDestination(s):console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){var n=this;return(0,q.Z)(function*(){if(!n.pdfDocument)return;const s=n.pdfDocument,a=yield n.pdfViewer.optionalContentConfigPromise;s===n.pdfDocument&&(a.setOCGState(e),n.pdfViewer.optionalContentConfigPromise=Promise.resolve(a))})()}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...a]=e;if(("object"!=typeof n||!Number.isInteger(n?.num)||!Number.isInteger(n?.gen))&&!Number.isInteger(n)||"object"!=typeof s||"string"!=typeof s?.name)return!1;const c=a.length;let u=!0;switch(s.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return 0===c;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(4!==c)return!1;u=!1;break;default:return!1}for(const h of a)if(!("number"==typeof h||u&&null===h))return!1;return!0}}class Fc extends $n{setDocument(e,n=null){}}const{AbortException:ka,AnnotationEditorLayer:Vh,AnnotationEditorType:hi,AnnotationEditorUIManager:ad,AnnotationLayer:El,AnnotationMode:ur,createValidAbsoluteUrl:kg,DrawLayer:Bc,fetchData:Uh,getPdfFilenameFromUrl:zh,isPdfFile:wl,normalizeUnicode:Wh,PermissionFlag:Ba,PixelsPerInch:Es,RenderingCancelledException:Uc,setLayerDimensions:zo,shadow:Xs,TextLayer:Yh,version:qh,XfaLayer:$c}=globalThis.pdfjsLib;class ud{#e=null;#t=null;constructor({pdfPage:e,linkService:n,downloadManager:s,annotationStorage:a=null,imageResourcesPath:c="",renderForms:u=!0,enableScripting:h=!1,hasJSActionsPromise:g=null,fieldObjectsPromise:b=null,annotationCanvasMap:E=null,accessibilityManager:D=null,annotationEditorUIManager:T=null,onAppend:O=null}){this.pdfPage=e,this.linkService=n,this.downloadManager=s,this.imageResourcesPath=c,this.renderForms=u,this.annotationStorage=a,this.enableScripting=h,this._hasJSActionsPromise=g||Promise.resolve(!1),this._fieldObjectsPromise=b||Promise.resolve(null),this._annotationCanvasMap=E,this._accessibilityManager=D,this._annotationEditorUIManager=T,this.#e=O,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=n.eventBus}render(e,n="display"){var s=this;return(0,q.Z)(function*(){if(s.div){if(s._cancelled||!s.annotationLayer)return;return void s.annotationLayer.update({viewport:e.clone({dontFlip:!0})})}const[a,c,u]=yield Promise.all([s.pdfPage.getAnnotations({intent:n}),s._hasJSActionsPromise,s._fieldObjectsPromise]);if(s._cancelled)return;const h=s.div=document.createElement("div");h.className="annotationLayer",s.#e?.(h),0!==a.length?(s.annotationLayer=new El({div:h,accessibilityManager:s._accessibilityManager,annotationCanvasMap:s._annotationCanvasMap,annotationEditorUIManager:s._annotationEditorUIManager,page:s.pdfPage,viewport:e.clone({dontFlip:!0})}),yield s.annotationLayer.render({annotations:a,imageResourcesPath:s.imageResourcesPath,renderForms:s.renderForms,linkService:s.linkService,downloadManager:s.downloadManager,annotationStorage:s.annotationStorage,enableScripting:s.enableScripting,hasJSActions:c,fieldObjects:u}),s.linkService.isInPresentationMode&&s.#n(3),s.#t||(s.#t=new AbortController,s._eventBus?._on("presentationmodechanged",g=>{s.#n(g.state)},{signal:s.#t.signal}))):s.hide()})()}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let n=!1;switch(e){case 3:n=!0;break;case 1:break;default:return}for(const s of this.div.childNodes)s.hasAttribute("data-internal-link")||(s.inert=n)}}function dd(f,e){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=f,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).append(n),n.click(),n.remove()}class Al{#e=new WeakMap;downloadData(e,n,s){dd(URL.createObjectURL(new Blob([e],{type:s})),n)}openOrDownloadData(e,n,s=null){const c=wl(n)?"application/pdf":"";return this.downloadData(e,n,c),!1}download(e,n,s){let a;if(e)a=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!kg(n,"http://example.com"))return void console.error(`download - not a valid URL: ${n}`);a=n+"#pdfjs.action=download"}dd(a,s)}}const zc_EVENT="event",zc_TIMEOUT="timeout";function Cl(){return(Cl=(0,q.Z)(function*({target:f,name:e,delay:n=0}){if("object"!=typeof f||!e||"string"!=typeof e||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:s,resolve:a}=Promise.withResolvers(),c=new AbortController;function u(b){c.abort(),clearTimeout(g),a(b)}f[f instanceof Zh?"_on":"addEventListener"](e,u.bind(null,zc_EVENT),{signal:c.signal});const g=setTimeout(u.bind(null,zc_TIMEOUT),n);return s})).apply(this,arguments)}class Zh{#e=Object.create(null);on(e,n,s=null){this._on(e,n,{external:!0,once:s?.once,signal:s?.signal})}off(e,n,s=null){this._off(e,n)}dispatch(e,n){const s=this.#e[e];if(!s||0===s.length)return;let a;for(const{listener:c,external:u,once:h}of s.slice(0))h&&this._off(e,c),u?(a||=[]).push(c):c(n);if(a){for(const c of a)c(n);a=null}}_on(e,n,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:u}=s;if(u.aborted)return void console.error("Cannot use an `aborted` signal.");const h=()=>this._off(e,n);a=()=>u.removeEventListener("abort",h),u.addEventListener("abort",h)}(this.#e[e]||=[]).push({listener:n,external:!0===s?.external,once:!0===s?.once,rmAbort:a})}_off(e,n,s=null){const a=this.#e[e];if(a)for(let c=0,u=a.length;c<u;c++){const h=a[c];if(h.listener===n)return h.rmAbort?.(),void a.splice(c,1)}}}class Wc{constructor(e){this.value=e}valueOf(){return this.value}}class ei extends Wc{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class ws extends Wc{constructor(e,n={}){super(e),this.opts=n}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(n){return e.reportError(n),this.value.toString(10)}}}class Eo extends Wc{constructor(e,n={}){super(e),this.opts=n}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(n){return e.reportError(n),new Date(this.value).toISOString()}}}const Jh=100,Wg="\u2068",Gc="\u2069";function Gg(f,e,n){return n===e||n instanceof ws&&e instanceof ws&&n.value===e.value||e instanceof ws&&"string"==typeof n&&n===f.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function ef(f,e,n){return e[n]?wo(f,e[n].value):(f.reportError(new RangeError("No default")),new ei)}function hd(f,e){const n=[],s=Object.create(null);for(const a of e)"narg"===a.type?s[a.name]=Dl(f,a.value):n.push(Dl(f,a));return{positional:n,named:s}}function Dl(f,e){switch(e.type){case"str":return e.value;case"num":return new ws(e.value,{minimumFractionDigits:e.precision});case"var":return function Yg(f,{name:e}){let n;if(f.params){if(!Object.prototype.hasOwnProperty.call(f.params,e))return new ei(`$${e}`);n=f.params[e]}else{if(!f.args||!Object.prototype.hasOwnProperty.call(f.args,e))return f.reportError(new ReferenceError(`Unknown variable: $${e}`)),new ei(`$${e}`);n=f.args[e]}if(n instanceof Wc)return n;switch(typeof n){case"string":return n;case"number":return new ws(n);case"object":if(n instanceof Date)return new Eo(n.getTime());default:return f.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof n}`)),new ei(`$${e}`)}}(f,e);case"mesg":return function tf(f,{name:e,attr:n}){const s=f.bundle._messages.get(e);if(!s)return f.reportError(new ReferenceError(`Unknown message: ${e}`)),new ei(e);if(n){const a=s.attributes[n];return a?wo(f,a):(f.reportError(new ReferenceError(`Unknown attribute: ${n}`)),new ei(`${e}.${n}`))}return s.value?wo(f,s.value):(f.reportError(new ReferenceError(`No value: ${e}`)),new ei(e))}(f,e);case"term":return function Sl(f,{name:e,attr:n,args:s}){const a=`-${e}`,c=f.bundle._terms.get(a);if(!c)return f.reportError(new ReferenceError(`Unknown term: ${a}`)),new ei(a);if(n){const h=c.attributes[n];if(h){f.params=hd(f,s).named;const g=wo(f,h);return f.params=null,g}return f.reportError(new ReferenceError(`Unknown attribute: ${n}`)),new ei(`${a}.${n}`)}f.params=hd(f,s).named;const u=wo(f,c.value);return f.params=null,u}(f,e);case"func":return function Ml(f,{name:e,args:n}){let s=f.bundle._functions[e];if(!s)return f.reportError(new ReferenceError(`Unknown function: ${e}()`)),new ei(`${e}()`);if("function"!=typeof s)return f.reportError(new TypeError(`Function ${e}() is not callable`)),new ei(`${e}()`);try{let a=hd(f,n);return s(a.positional,a.named)}catch(a){return f.reportError(a),new ei(`${e}()`)}}(f,e);case"select":return function fd(f,{selector:e,variants:n,star:s}){let a=Dl(f,e);if(a instanceof ei)return ef(f,n,s);for(const c of n)if(Gg(f,a,Dl(f,c.key)))return wo(f,c.value);return ef(f,n,s)}(f,e);default:return new ei}}function Yc(f,e){if(f.dirty.has(e))return f.reportError(new RangeError("Cyclic reference")),new ei;f.dirty.add(e);const n=[],s=f.bundle._useIsolating&&e.length>1;for(const a of e)if("string"!=typeof a){if(f.placeables++,f.placeables>Jh)throw f.dirty.delete(e),new RangeError(`Too many placeables expanded: ${f.placeables}, max allowed is ${Jh}`);s&&n.push(Wg),n.push(Dl(f,a).toString(f)),s&&n.push(Gc)}else n.push(f.bundle._transform(a));return f.dirty.delete(e),n.join("")}function wo(f,e){return"string"==typeof e?f.bundle._transform(e):Yc(f,e)}class Wo{constructor(e,n,s){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=n,this.args=s}reportError(e){if(!(this.errors&&e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,n){let s=this.bundle._intls.get(e);s||(s={},this.bundle._intls.set(e,s));let a=JSON.stringify(n);return s[a]||(s[a]=new e(this.bundle.locales,n)),s[a]}}function ja(f,e){const n=Object.create(null);for(const[s,a]of Object.entries(f))e.includes(s)&&(n[s]=a.valueOf());return n}const Kc=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Il(f,e){let n=f[0];if(n instanceof ei)return new ei(`NUMBER(${n.valueOf()})`);if(n instanceof ws)return new ws(n.valueOf(),{...n.opts,...ja(e,Kc)});if(n instanceof Eo)return new ws(n.valueOf(),{...ja(e,Kc)});throw new TypeError("Invalid argument to NUMBER")}const Ha=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function xl(f,e){let n=f[0];if(n instanceof ei)return new ei(`DATETIME(${n.valueOf()})`);if(n instanceof Eo)return new Eo(n.valueOf(),{...n.opts,...ja(e,Ha)});if(n instanceof ws)return new Eo(n.valueOf(),{...ja(e,Ha)});throw new TypeError("Invalid argument to DATETIME")}const pd=new Map;class rf{constructor(e,{functions:n,useIsolating:s=!0,transform:a=(c=>c)}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:Il,DATETIME:xl,...n},this._useIsolating=s,this._transform=a,this._intls=function nf(f){const e=Array.isArray(f)?f.join(" "):f;let n=pd.get(e);return void 0===n&&(n=new Map,pd.set(e,n)),n}(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:n=!1}={}){const s=[];for(let a=0;a<e.body.length;a++){let c=e.body[a];if(c.id.startsWith("-")){if(!1===n&&this._terms.has(c.id)){s.push(new Error(`Attempt to override an existing term: "${c.id}"`));continue}this._terms.set(c.id,c)}else{if(!1===n&&this._messages.has(c.id)){s.push(new Error(`Attempt to override an existing message: "${c.id}"`));continue}this._messages.set(c.id,c)}}return s}formatPattern(e,n=null,s=null){if("string"==typeof e)return this._transform(e);let a=new Wo(this,s,n);try{return Yc(a,e).toString(a)}catch(c){if(a.errors&&c instanceof Error)return a.errors.push(c),(new ei).toString(a);throw c}}}const Tl=/^(-?[a-zA-Z][\w-]*) *= */gm,Pl=/\.([a-zA-Z][\w-]*) *= */y,sf=/\*?\[/y,qc=/(-?[0-9]+(?:\.([0-9]+))?)/y,af=/([a-zA-Z][\w-]*)/y,Xc=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,lf=/^[A-Z][A-Z0-9_-]*$/,Rl=/([^{}\n\r]+)/y,Qi=/([^\\"\n\r]*)/y,Ol=/\\([\\"])/y,Zc=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,Qc=/^\n+/,_i=/ +$/,Va=/ *\r?\n/g,gd=/( *)$/,md=/{\s*/y,vd=/\s*}/y,yd=/\[\s*/y,cf=/\s*] */y,bd=/\s*\(\s*/y,uf=/\s*->\s*/y,_d=/\s*:\s*/y,df=/\s*,?\s*/y,hf=/\s+/y;class Jc{constructor(e){this.body=[],Tl.lastIndex=0;let n=0;for(;;){let re=Tl.exec(e);if(null===re)break;n=Tl.lastIndex;try{this.body.push(g(re[1]))}catch(je){if(je instanceof SyntaxError)continue;throw je}}function s(re){return re.lastIndex=n,re.test(e)}function a(re,je){if(e[n]===re)return n++,!0;if(je)throw new je(`Expected ${re}`);return!1}function c(re,je){if(s(re))return n=re.lastIndex,!0;if(je)throw new je(`Expected ${re.toString()}`);return!1}function u(re){re.lastIndex=n;let je=re.exec(e);if(null===je)throw new SyntaxError(`Expected ${re.toString()}`);return n=re.lastIndex,je}function h(re){return u(re)[1]}function g(re){let je=E(),nt=function b(){let re=Object.create(null);for(;s(Pl);){let je=h(Pl),nt=E();if(null===nt)throw new SyntaxError("Expected attribute value");re[je]=nt}return re}();if(null===je&&0===Object.keys(nt).length)throw new SyntaxError("Expected message value or attributes");return{id:re,value:je,attributes:nt}}function E(){let re;if(s(Rl)&&(re=h(Rl)),"{"===e[n]||"}"===e[n])return D(re?[re]:[],1/0);let je=ye();return je?re?D([re,je],je.length):(je.value=Me(je.value,Qc),D([je],je.length)):re?Me(re,_i):null}function D(re=[],je){for(;;){if(s(Rl)){re.push(h(Rl));continue}if("{"===e[n]){re.push(T());continue}if("}"===e[n])throw new SyntaxError("Unbalanced closing brace");let en=ye();if(!en)break;re.push(en),je=Math.min(je,en.length)}let nt=re.length-1,Jt=re[nt];"string"==typeof Jt&&(re[nt]=Me(Jt,_i));let sn=[];for(let en of re)en instanceof Ll&&(en=en.value.slice(0,en.value.length-je)),en&&sn.push(en);return sn}function T(){c(md,SyntaxError);let re=O();if(c(vd))return re;if(c(uf)){let je=function G(){let nt,re=[],je=0;for(;s(sf);){a("*")&&(nt=je);let Jt=U(),sn=E();if(null===sn)throw new SyntaxError("Expected variant value");re[je++]={key:Jt,value:sn}}if(0===je)return null;if(void 0===nt)throw new SyntaxError("Expected default variant");return{variants:re,star:nt}}();return c(vd,SyntaxError),{type:"select",selector:re,...je}}throw new SyntaxError("Unclosed placeable")}function O(){if("{"===e[n])return T();if(s(Xc)){let[,re,je,nt=null]=u(Xc);if("$"===re)return{type:"var",name:je};if(c(bd)){let Jt=function k(){let re=[];for(;;){switch(e[n]){case")":return n++,re;case void 0:throw new SyntaxError("Unclosed argument list")}re.push(j()),c(df)}}();if("-"===re)return{type:"term",name:je,attr:nt,args:Jt};if(lf.test(je))return{type:"func",name:je,args:Jt};throw new SyntaxError("Function names must be all upper-case")}return"-"===re?{type:"term",name:je,attr:nt,args:[]}:{type:"mesg",name:je,attr:nt}}return ne()}function j(){let re=O();return"mesg"!==re.type?re:c(_d)?{type:"narg",name:re.name,value:ne()}:re}function U(){let re;return c(yd,SyntaxError),re=s(qc)?ue():{type:"str",value:h(af)},c(cf,SyntaxError),re}function ne(){if(s(qc))return ue();if('"'===e[n])return function de(){a('"',SyntaxError);let re="";for(;;){if(re+=h(Qi),"\\"!==e[n]){if(a('"'))return{type:"str",value:re};throw new SyntaxError("Unclosed string literal")}re+=ve()}}();throw new SyntaxError("Invalid expression")}function ue(){let[,re,je=""]=u(qc),nt=je.length;return{type:"num",value:parseFloat(re),precision:nt}}function ve(){if(s(Ol))return h(Ol);if(s(Zc)){let[,re,je]=u(Zc),nt=parseInt(re||je,16);return nt<=55295||57344<=nt?String.fromCodePoint(nt):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function ye(){let re=n;switch(c(hf),e[n]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return He(e.slice(re,n))}return" "===e[n-1]&&He(e.slice(re,n))}function Me(re,je){return re.replace(je,"")}function He(re){let je=re.replace(Va,"\n"),nt=gd.exec(re)[1].length;return new Ll(je,nt)}}}class Ll{constructor(e,n){this.value=e,this.length=n}}const ff=/<|&#?\w+;/,Ua={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},pf={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function gf(f,e){const{value:n}=e;if("string"==typeof n)if("title"===f.localName&&"http://www.w3.org/1999/xhtml"===f.namespaceURI)f.textContent=n;else if(ff.test(n)){const s=f.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");s.innerHTML=n,function Ed(f,e){for(const n of f.childNodes)if(n.nodeType!==n.TEXT_NODE){if(n.hasAttribute("data-l10n-name")){const s=Go(e,n);f.replaceChild(s,n);continue}if(tu(n)){const s=Nl(n);f.replaceChild(s,n);continue}console.warn(`An element of forbidden type "${n.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),f.replaceChild(kl(n),n)}e.textContent="",e.appendChild(f)}(s.content,f)}else f.textContent=n;eu(e,f)}function wd(f,e){if(!f)return!1;for(let n of f)if(n.name===e)return!0;return!1}function eu(f,e){const n=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(s=>s.trim()):null;for(const s of Array.from(e.attributes))$a(s.name,e,n)&&!wd(f.attributes,s.name)&&e.removeAttribute(s.name);if(f.attributes)for(const s of Array.from(f.attributes))$a(s.name,e,n)&&e.getAttribute(s.name)!==s.value&&e.setAttribute(s.name,s.value)}function Go(f,e){const n=e.getAttribute("data-l10n-name"),s=f.querySelector(`[data-l10n-name="${n}"]`);return s?s.localName!==e.localName?(console.warn(`An element named "${n}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${s.localName}).`),kl(e)):(f.removeChild(s),Ad(e,s.cloneNode(!1))):(console.warn(`An element named "${n}" wasn't found in the source.`),kl(e))}function Nl(f){const e=f.ownerDocument.createElement(f.localName);return Ad(f,e)}function kl(f){return f.ownerDocument.createTextNode(f.textContent)}function tu(f){const e=Ua[f.namespaceURI];return e&&e.includes(f.localName)}function $a(f,e,n=null){if(n&&n.includes(f))return!0;const s=pf[e.namespaceURI];if(!s)return!1;const a=f.toLowerCase(),c=e.localName;if(s.global.includes(a))return!0;if(!s[c])return!1;if(s[c].includes(a))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===c&&"value"===a){const u=e.type.toLowerCase();if("submit"===u||"button"===u||"reset"===u)return!0}return!1}function Ad(f,e){return e.textContent=f.textContent,eu(f,e),e}class Cd extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol;class mf extends Cd{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let n=0;return{next:()=>(0,q.Z)(function*(){return e.length<=n&&e.push(e.iterator.next()),e[n++]})()}}touchNext(e=1){var n=this;return(0,q.Z)(function*(){let s=0;for(;s++<e;){const a=n[n.length-1];if(a&&(yield a).done)break;n.push(n.iterator.next())}return n[n.length-1]})()}}class vf{constructor(e=[],n){this.resourceIds=e,this.generateBundles=n,this.onChange(!0)}addResourceIds(e,n=!1){return this.resourceIds.push(...e),this.onChange(n),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(n=>!e.includes(n)),this.onChange(),this.resourceIds.length}formatWithFallback(e,n){var s=this;return(0,q.Z)(function*(){const a=[];let c=!1;var g,u=!1,h=!1;try{for(var E,b=function mo(f){var e,n,s,a=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,s=Symbol.iterator);a--;){if(n&&null!=(e=f[n]))return e.call(f);if(s&&null!=(e=f[s]))return new Un(e.call(f));n="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}(s.bundles);u=!(E=yield b.next()).done;u=!1){const D=E.value;{c=!0;const T=Fl(n,D,e,a);if(0===T.size)break;if(typeof console<"u"){const O=D.locales[0],k=Array.from(T).join(", ");console.warn(`[fluent] Missing translations in ${O}: ${k}`)}}}}catch(D){h=!0,g=D}finally{try{u&&null!=b.return&&(yield b.return())}finally{if(h)throw g}}return!c&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(s.resourceIds)}.`),a})()}formatMessages(e){return this.formatWithFallback(e,Dd)}formatValues(e){return this.formatWithFallback(e,yf)}formatValue(e,n){var s=this;return(0,q.Z)(function*(){const[a]=yield s.formatValues([{id:e,args:n}]);return a})()}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=mf.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function yf(f,e,n,s){return n.value?f.formatPattern(n.value,s,e):null}function Dd(f,e,n,s){const a={value:null,attributes:null};n.value&&(a.value=f.formatPattern(n.value,s,e));let c=Object.keys(n.attributes);if(c.length>0){a.attributes=new Array(c.length);for(let[u,h]of c.entries()){let g=f.formatPattern(n.attributes[h],s,e);a.attributes[u]={name:h,value:g}}}return a}function Fl(f,e,n,s){const a=[],c=new Set;return n.forEach(({id:u,args:h},g)=>{if(void 0!==s[g])return;let b=e.getMessage(u);if(b){if(a.length=0,s[g]=f(e,a,b,h),a.length>0&&typeof console<"u"){const E=e.locales[0],D=a.join(", ");console.warn(`[fluent][resolver] errors in ${E}/${u}: ${D}.`)}}else c.add(u)}),c}const As="data-l10n-id",Ao="data-l10n-args",bf=`[${As}]`;class _f extends vf{constructor(e,n){super(e,n),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[As,Ao]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,n,s){return e.setAttribute(As,n),s?e.setAttribute(Ao,JSON.stringify(s)):e.removeAttribute(Ao),e}getAttributes(e){return{id:e.getAttribute(As),args:JSON.parse(e.getAttribute(Ao)||null)}}connectRoot(e){for(const n of this.roots)if(n===e||n.contains(e)||e.contains(n))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(n=>this.translateMutations(n));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(n=>this.translateFragment(n)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const n of e)switch(n.type){case"attributes":n.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(n.target);break;case"childList":for(const s of n.addedNodes)if(s.nodeType===s.ELEMENT_NODE)if(s.childElementCount)for(const a of this.getTranslatables(s))this.pendingElements.add(a);else s.hasAttribute(As)&&this.pendingElements.add(s)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var n=this;return(0,q.Z)(function*(){if(!e.length)return;const s=e.map(n.getKeysForElement),a=yield n.formatMessages(s);return n.applyTranslations(e,a)})()}applyTranslations(e,n){this.pauseObserving();for(let s=0;s<e.length;s++)void 0!==n[s]&&gf(e[s],n[s]);this.resumeObserving()}getTranslatables(e){const n=Array.from(e.querySelectorAll(bf));return"function"==typeof e.hasAttribute&&e.hasAttribute(As)&&n.push(e),n}getKeysForElement(e){return{id:e.getAttribute(As),args:JSON.parse(e.getAttribute(Ao)||null)}}}class Yo{#e;#t=new Set;#n;#i;constructor({lang:e,isRTL:n},s=null){this.#n=Yo.#r(e),this.#i=s,this.#e=n??Yo.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e,n=null,s){var a=this;return(0,q.Z)(function*(){return Array.isArray(e)?(e=e.map(h=>({id:h})),(yield a.#i.formatMessages(e)).map(h=>h.value)):(yield a.#i.formatMessages([{id:e,args:n}]))[0]?.value||s})()}translate(e){var n=this;return(0,q.Z)(function*(){n.#t.add(e);try{n.#i.connectRoot(e),yield n.#i.translateRoots()}catch{}})()}translateOnce(e){var n=this;return(0,q.Z)(function*(){try{yield n.#i.translateElements([e])}catch(s){console.error(`translateOnce: "${s}".`)}})()}destroy(){var e=this;return(0,q.Z)(function*(){for(const n of e.#t)e.#i.disconnectRoot(n);e.#t.clear(),e.#i.pauseObserving()})()}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#r(e){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e=e?.toLowerCase()||"en-us"]||e}static#s(e){const n=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(n)}}function Zs(f,e){const n=new Jc(e),s=new rf(f),a=s.addResource(n);return a.length&&console.error("L10n errors",a),s}class ts extends Yo{constructor(e){super({lang:e});const n=e?ts.#e.bind(ts,"en-us",this.getLanguage()):ts.#i.bind(ts,this.getLanguage());this._setL10n(new _f([],n))}static#e(e,n){var s=this;return qs(function*(){const{baseURL:a,paths:c}=yield Ut(s.#n()),u=[n];if(e!==n){const h=n.split("-",1)[0];h!==n&&u.push(h),u.push(e)}for(const h of u){const g=yield Ut(s.#t(h,a,c));g?yield g:"en-us"===h&&(yield s.#r(h))}})()}static#t(e,n,s){return(0,q.Z)(function*(){const a=s[e];if(!a)return null;const c=new URL(a,n),u=yield Uh(c,"text");return Zs(e,u)})()}static#n(){return(0,q.Z)(function*(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),n=yield Uh(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:n}}catch{}return{baseURL:"./",paths:Object.create(null)}})()}static#i(e){var n=this;return qs(function*(){yield n.#r(e)})()}static#r(e){return(0,q.Z)(function*(){return Zs(e,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties\u2026\npdfjs-document-properties-button-label = Document Properties\u2026\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } \xd7 { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } \xd7 { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing\u2026\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document\u2026\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text =\n    .aria-label = Text Editor\npdfjs-free-text-default-content = Start typing\u2026\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, \u201cA young man sits down at a table to eat a meal\u201d\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner \u2014 resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle \u2014 resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner \u2014 resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right \u2014 resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner \u2014 resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle \u2014 resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner \u2014 resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left \u2014 resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here\u2026\npdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close')})()}}function Ko(){return document.location.hash}class Af{#e=null;constructor({linkService:e,eventBus:n}){this.linkService=e,this.eventBus=n,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",s=>{this._isPagesLoaded=!!s.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:n=!1,updateUrl:s=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const a=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===s,this._initialized=!0,this.#u();const c=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=Ko(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#r(c,!0)||n){const{hash:h,page:g,rotation:b}=this.#a(!0);return!h||a||n?void this.#t(null,!0):void this.#t({hash:h,page:g,rotation:b},!0)}const u=c.destination;this.#s(u,c.uid,!0),void 0!==u.rotation&&(this._initialRotation=u.rotation),u.dest?(this._initialBookmark=JSON.stringify(u.dest),this._destination.page=null):u.hash?this._initialBookmark=u.hash:u.page&&(this._initialBookmark=`page=${u.page}`)}reset(){this._initialized&&(this.#c(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:n,pageNumber:s}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(n))return void console.error(`PDFHistory.push: "${n}" is not a valid explicitDest parameter.`);if(!this.#i(s)&&(null!==s||this._destination))return void console.error(`PDFHistory.push: "${s}" is not a valid pageNumber parameter.`);const a=e||JSON.stringify(n);if(!a)return;let c=!1;if(this._destination&&(function Md(f,e){return"string"==typeof f&&"string"==typeof e&&(f===e||Ho(f).get("nameddest")===e)}(this._destination.hash,a)||function Id(f,e){function n(s,a){if(typeof s!=typeof a||Array.isArray(s)||Array.isArray(a))return!1;if(null!==s&&"object"==typeof s&&null!==a){if(Object.keys(s).length!==Object.keys(a).length)return!1;for(const c in s)if(!n(s[c],a[c]))return!1;return!0}return s===a||Number.isNaN(s)&&Number.isNaN(a)}if(!Array.isArray(f)||!Array.isArray(e)||f.length!==e.length)return!1;for(let s=0,a=f.length;s<a;s++)if(!n(f[s],e[s]))return!1;return!0}(this._destination.dest,n))){if(this._destination.page)return;c=!0}this._popStateInProgress&&!c||(this.#t({dest:n,hash:a,page:s,rotation:this.linkService.rotation},c),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,n=!1){const s=n||!this._destination,a={fingerprint:this._fingerprint,uid:s?this._uid:this._uid+1,destination:e};let c;if(this.#s(e,a.uid),this._updateUrl&&e?.hash){const u=document.location.href.split("#",1)[0];u.startsWith("file://")||(c=`${u}#${e.hash}`)}s?window.history.replaceState(a,"",c):window.history.pushState(a,"",c)}#n(e=!1){if(!this._position)return;let n=this._position;if(e&&(n=Object.assign(Object.create(null),this._position),n.temporary=!0),!this._destination)return void this.#t(n);if(this._destination.temporary)return void this.#t(n,!0);if(this._destination.hash===n.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let s=!1;if(this._destination.page>=n.first&&this._destination.page<=n.page){if(void 0!==this._destination.dest||!this._destination.first)return;s=!0}this.#t(n,s)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#r(e,n=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!n)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[s]=performance.getEntriesByType("navigation");if("reload"!==s?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}#s(e,n,s=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),s&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=n,this._maxUid=Math.max(this._maxUid,n),this._numPositionUpdates=0}#a(e=!1){const n=unescape(Ko()).substring(1),s=Ho(n),a=s.get("nameddest")||"";let c=0|s.get("page");return(!this.#i(c)||e&&a.length>0)&&(c=null),{hash:n,page:c,rotation:this.linkService.rotation}}#l({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},1e3))}#d({state:e}){const n=Ko(),s=this._currentHash!==n;if(this._currentHash=n,!e){this._uid++;const{hash:c,page:u,rotation:h}=this.#a();return void this.#t({hash:c,page:u,rotation:h},!0)}if(!this.#r(e))return;this._popStateInProgress=!0,s&&(this._blockHashChange++,function Xh(f){return Cl.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const a=e.destination;this.#s(a,e.uid,!0),La(a.rotation)&&(this.linkService.rotation=a.rotation),a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#c(){(!this._destination||this._destination.temporary)&&this.#n()}#u(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#l.bind(this),{signal:e}),window.addEventListener("popstate",this.#d.bind(this),{signal:e}),window.addEventListener("pagehide",this.#c.bind(this),{signal:e})}#o(){this.#e?.abort(),this.#e=null}}class xd{#e=null;#t=null;#n=null;#i=null;#r;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new ts,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#r=e.uiManager,this.#e=e.annotationLayer||null,this.#i=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null}render(e,n="display"){var s=this;return(0,q.Z)(function*(){if("display"!==n||s._cancelled)return;const a=e.clone({dontFlip:!0});if(s.div)return s.annotationEditorLayer.update({viewport:a}),void s.show();const c=s.div=document.createElement("div");c.className="annotationEditorLayer",c.hidden=!0,c.dir=s.#r.direction,s.#n?.(c),s.annotationEditorLayer=new Vh({uiManager:s.#r,div:c,accessibilityManager:s.accessibilityManager,pageIndex:s.pdfPage.pageNumber-1,l10n:s.l10n,viewport:a,annotationLayer:s.#e,textLayer:s.#i,drawLayer:s.#t}),s.annotationEditorLayer.render({viewport:a,div:c,annotations:null,intent:n}),s.show()})()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var za=new Map;const f=navigator.userAgent||"",e=navigator.platform||"",n=navigator.maxTouchPoints||1,s=/Android/.test(f);(/\b(iPad|iPhone|iPod)(?=;)/.test(f)||"MacIntel"===e&&n>1||s)&&za.set("maxCanvasPixels",5242880),s&&za.set("useSystemFonts",!1)}const qo={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Ji={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.mjs",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:qo.BOOLEAN+qo.UNDEFINED},verbosity:{value:1,kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.mjs",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.mjs",kind:2},viewerCssTheme:{value:0,kind:130},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}};class Td{static eventBus;static#e=new Map;static#t=(()=>{for(const e in Ji)this.#e.set(e,Ji[e].value);for(const[e,n]of za)this.#e.set(e,n);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)})();static get(e){return this.#e.get(e)}static getAll(e=null,n=!1){const s=Object.create(null);for(const a in Ji){const c=Ji[a];e&&!(e&c.kind)||(s[a]=n?c.value:this.#e.get(a))}return s}static set(e,n){this.setAll({[e]:n})}static setAll(e,n=!1){let s;this._hasInvokedSet||=!0;for(const a in e){const c=Ji[a],u=e[a];if(!c||!(typeof u==typeof c.value||qo[(typeof u).toUpperCase()]&c.type))continue;const{kind:h}=c;n&&!(1&h||128&h)||(this.eventBus&&16&h&&(s||=new Map).set(a,u),this.#e.set(a,u))}if(s)for(const[a,c]of s)this.eventBus.dispatch(a.toLowerCase(),{source:this,value:c})}}class iu{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(e="display"){var n=this;return(0,q.Z)(function*(){"display"!==e||n.#e||n._cancelled||(n.#e=new Bc({pageIndex:n.pageIndex}))})()}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const Wa={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Pd=/^H(\d+)$/;class Bl{#e=void 0;get renderingDone(){return void 0!==this.#e}render(e){if(void 0!==this.#e)return this.#e;const n=this.#n(e);return n?.classList.add("structTree"),this.#e=n}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(e,n){const{alt:s,id:a,lang:c}=e;void 0!==s&&n.setAttribute("aria-label",ml(s)),void 0!==a&&n.setAttribute("aria-owns",a),void 0!==c&&n.setAttribute("lang",ml(c,!0))}#n(e){if(!e)return null;const n=document.createElement("span");if("role"in e){const{role:s}=e,a=s.match(Pd);a?(n.setAttribute("role","heading"),n.setAttribute("aria-level",a[1])):Wa[s]&&n.setAttribute("role",Wa[s])}if(this.#t(e,n),e.children)if(1===e.children.length&&"id"in e.children[0])this.#t(e.children[0],n);else for(const s of e.children)n.append(this.#n(s));return n}}class Cs{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#r(e,n){const s=e.getBoundingClientRect(),a=n.getBoundingClientRect();if(0===s.width&&0===s.height)return 1;if(0===a.width&&0===a.height)return-1;const h=s.y+s.height/2,E=a.y+a.height/2;return h<=a.y&&E>=s.y+s.height?-1:E<=s.y&&h>=a.y+a.height?1:s.x+s.width/2-(a.x+a.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(Cs.#r),this.#n.size>0){const e=this.#t;for(const[n,s]of this.#n)document.getElementById(n)?this.#s(n,e[s]):this.#n.delete(n)}for(const[e,n]of this.#i)this.addPointerInTextLayer(e,n);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e)return void this.#i.delete(e);const n=this.#t;if(!n||0===n.length)return;const{id:s}=e,a=this.#n.get(s);if(void 0===a)return;const c=n[a];this.#n.delete(s);let u=c.getAttribute("aria-owns");u?.includes(s)&&(u=u.split(" ").filter(h=>h!==s).join(" "),u?c.setAttribute("aria-owns",u):(c.removeAttribute("aria-owns"),c.setAttribute("role","presentation")))}#s(e,n){const s=n.getAttribute("aria-owns");s?.includes(e)||n.setAttribute("aria-owns",s?`${s} ${e}`:e),n.removeAttribute("role")}addPointerInTextLayer(e,n){const{id:s}=e;if(!s)return null;if(!this.#e)return this.#i.set(e,n),null;n&&this.removePointerInTextLayer(e);const a=this.#t;if(!a||0===a.length)return null;const c=Pa(a,b=>Cs.#r(e,b)<0),u=Math.max(0,c-1),h=a[u];this.#s(s,h),this.#n.set(s,u);const g=h.parentNode;return g?.classList.contains("markedContent")?g.id:null}moveElementInDOM(e,n,s,a){const c=this.addPointerInTextLayer(s,a);if(!e.hasChildNodes())return e.append(n),c;const u=Array.from(e.childNodes).filter(b=>b!==n);if(0===u.length)return c;const h=s||n,g=Pa(u,b=>Cs.#r(h,b)<0);return 0===g?u[0].before(n):u[g-1].after(n),c}}class Cf{#e=null;constructor({findController:e,eventBus:n,pageIndex:s}){this.findController=e,this.matches=[],this.eventBus=n,this.pageIdx=s,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,n){this.textDivs=e,this.textContentItemsStr=n}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||-1===e.pageIndex)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,n){if(!e)return[];const{textContentItemsStr:s}=this;let a=0,c=0;const u=s.length-1,h=[];for(let g=0,b=e.length;g<b;g++){let E=e[g];for(;a!==u&&E>=c+s[a].length;)c+=s[a].length,a++;a===s.length&&console.error("Could not find a matching mapping");const D={begin:{divIdx:a,offset:E-c}};for(E+=n[g];a!==u&&E>c+s[a].length;)c+=s[a].length,a++;D.end={divIdx:a,offset:E-c},h.push(D)}return h}_renderMatches(e){if(0===e.length)return;const{findController:n,pageIdx:s}=this,{textContentItemsStr:a,textDivs:c}=this,u=s===n.selected.pageIdx,h=n.selected.matchIdx;let b=null;function D(U,ne){const ue=U.divIdx;return c[ue].textContent="",T(ue,0,U.offset,ne)}function T(U,ne,ue,de){let ve=c[U];if(ve.nodeType===Node.TEXT_NODE){const He=document.createElement("span");ve.before(He),He.append(ve),c[U]=He,ve=He}const ye=a[U].substring(ne,ue),Me=document.createTextNode(ye);if(de){const He=document.createElement("span");return He.className=`${de} appended`,He.append(Me),ve.append(He),de.includes("selected")?He.offsetLeft:0}return ve.append(Me),0}let O=h,k=O+1;if(n.state.highlightAll)O=0,k=e.length;else if(!u)return;let j=-1,G=-1;for(let U=O;U<k;U++){const ne=e[U],ue=ne.begin;if(ue.divIdx===j&&ue.offset===G)continue;j=ue.divIdx,G=ue.offset;const de=ne.end,ve=u&&U===h,ye=ve?" selected":"";let Me=0;if(b&&ue.divIdx===b.divIdx?T(b.divIdx,b.offset,ue.offset):(null!==b&&T(b.divIdx,b.offset,undefined),D(ue)),ue.divIdx===de.divIdx)Me=T(ue.divIdx,ue.offset,de.offset,"highlight"+ye);else{Me=T(ue.divIdx,ue.offset,undefined,"highlight begin"+ye);for(let He=ue.divIdx+1,re=de.divIdx;He<re;He++)c[He].className="highlight middle"+ye;D(de,"highlight end"+ye)}b=de,ve&&n.scrollMatchIntoView({element:c[ue.divIdx],selectedLeft:Me,pageIndex:s,matchIndex:h})}b&&T(b.divIdx,b.offset,undefined)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:n,matches:s,pageIdx:a}=this,{textContentItemsStr:c,textDivs:u}=this;let h=-1;for(const E of s){for(let T=Math.max(h,E.begin.divIdx),O=E.end.divIdx;T<=O;T++){const k=u[T];k.textContent=c[T],k.className=""}h=E.end.divIdx+1}n?.highlightMatches&&!e&&(this.matches=this._convertMatches(n.pageMatches[a]||null,n.pageMatchesLength[a]||null),this._renderMatches(this.matches))}}class Co{#e=!1;#t=null;#n=!1;#i=null;static#r=new Map;static#s=null;constructor({pdfPage:e,highlighter:n=null,accessibilityManager:s=null,enablePermissions:a=!1,onAppend:c=null}){this.pdfPage=e,this.highlighter=n,this.accessibilityManager=s,this.#e=!0===a,this.#t=c,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e,n=null){var s=this;return(0,q.Z)(function*(){if(s.#n&&s.#i)return s.#i.update({viewport:e,onBefore:s.hide.bind(s)}),void s.show();s.cancel(),s.#i=new Yh({textContentSource:s.pdfPage.streamTextContent(n||{includeMarkedContent:!0,disableNormalization:!0}),container:s.div,viewport:e});const{textDivs:a,textContentItemsStr:c}=s.#i;s.highlighter?.setTextMapping(a,c),s.accessibilityManager?.setTextMapping(a),yield s.#i.render(),s.#n=!0;const u=document.createElement("div");u.className="endOfContent",s.div.append(u),s.#a(u),s.#t?.(s.div),s.highlighter?.enable(),s.accessibilityManager?.enable()})()}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),Co.#l(this.div)}#a(e){const{div:n}=this;n.addEventListener("mousedown",()=>{n.classList.add("selecting")}),n.addEventListener("copy",s=>{if(!this.#e){const a=document.getSelection();s.clipboardData.setData("text/plain",ml(Wh(a.toString())))}s.preventDefault(),s.stopPropagation()}),Co.#r.set(n,e),Co.#d()}static#l(e){this.#r.delete(e),0===this.#r.size&&(this.#s?.abort(),this.#s=null)}static#d(){if(this.#s)return;this.#s=new AbortController;const{signal:e}=this.#s,n=(u,h)=>{h.append(u),u.style.width="",u.style.height="",h.classList.remove("selecting")};let s=!1;var a,c;document.addEventListener("pointerdown",()=>{s=!0},{signal:e}),document.addEventListener("pointerup",()=>{s=!1,this.#r.forEach(n)},{signal:e}),window.addEventListener("blur",()=>{s=!1,this.#r.forEach(n)},{signal:e}),document.addEventListener("keyup",()=>{s||this.#r.forEach(n)},{signal:e}),document.addEventListener("selectionchange",()=>{const u=document.getSelection();if(0===u.rangeCount)return void this.#r.forEach(n);const h=new Set;for(let O=0;O<u.rangeCount;O++){const k=u.getRangeAt(O);for(const j of this.#r.keys())!h.has(j)&&k.intersectsNode(j)&&h.add(j)}for(const[O,k]of this.#r)h.has(O)?O.classList.add("selecting"):n(k,O);if(a??="none"===getComputedStyle(this.#r.values().next().value).getPropertyValue("-moz-user-select"),a)return;const g=u.getRangeAt(0),b=c&&(0===g.compareBoundaryPoints(Range.END_TO_END,c)||0===g.compareBoundaryPoints(Range.START_TO_END,c));let E=b?g.startContainer:g.endContainer;E.nodeType===Node.TEXT_NODE&&(E=E.parentNode);const D=E.parentElement.closest(".textLayer"),T=this.#r.get(D);T&&(T.style.width=D.style.width,T.style.height=D.style.height,E.parentElement.insertBefore(T,b?E:E.nextSibling)),c=g.cloneRange()},{signal:e})}}class Rd{constructor({pdfPage:e,annotationStorage:n=null,linkService:s,xfaHtml:a=null}){this.pdfPage=e,this.annotationStorage=n,this.linkService=s,this.xfaHtml=a,this.div=null,this._cancelled=!1}render(e,n="display"){var s=this;return(0,q.Z)(function*(){if("print"===n){const u={viewport:e.clone({dontFlip:!0}),div:s.div,xfaHtml:s.xfaHtml,annotationStorage:s.annotationStorage,linkService:s.linkService,intent:n};return s.div=document.createElement("div"),u.div=s.div,$c.render(u)}const a=yield s.pdfPage.getXfa();if(s._cancelled||!a)return{textDivs:[]};const c={viewport:e.clone({dontFlip:!0}),div:s.div,xfaHtml:a,annotationStorage:s.annotationStorage,linkService:s.linkService,intent:n};return s.div?$c.update(c):(s.div=document.createElement("div"),c.div=s.div,$c.render(c))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const Df={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Fc}},Sf=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class ru{#e=ur.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#r=null;#s=null;#a=null;#l=null;#d=Dn.INITIAL;#c=1;#u={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#o=new WeakMap;#h=[null,null,null,null];constructor(e){const n=e.container,s=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#r=e.layerProperties||Df,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=s,this.pdfPageRotate=s.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#c=e.textLayerMode??1,this.#e=e.annotationMode??ur.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??Td.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new ts,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=n,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const a=document.createElement("div");if(a.className="page",a.setAttribute("data-page-number",this.id),a.setAttribute("role","region"),a.setAttribute("data-l10n-id","pdfjs-page-landmark"),a.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=a,this.#f(),n?.append(a),this._isStandalone){n?.style.setProperty("--scale-factor",this.scale*Es.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:c}=e;c&&c.then(u=>{c===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=u.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#p(e,n){const s=Sf.get(n),a=this.#h[s];if(this.#h[s]=e,a)a.replaceWith(e);else{for(let c=s-1;c>=0;c--){const u=this.#h[c];if(u)return void u.after(e)}this.div.prepend(e)}}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case Dn.PAUSED:this.div.classList.remove("loading");break;case Dn.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case Dn.INITIAL:case Dn.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#f(){const{viewport:e}=this;if(this.pdfPage){if(this.#a===e.rotation)return;this.#a=e.rotation}zo(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate,this.viewport=e.getViewport({scale:this.scale*Es.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#f(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return Xs(this,"_textHighlighter",new Cf({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#r.findController}))}#g(e,n){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:n})}#v(){var e=this;return(0,q.Z)(function*(){let n=null;try{yield e.annotationLayer.render(e.viewport,"display")}catch(s){console.error(`#renderAnnotationLayer: "${s}".`),n=s}finally{e.#g("annotationlayerrendered",n)}})()}#m(){var e=this;return(0,q.Z)(function*(){let n=null;try{yield e.annotationEditorLayer.render(e.viewport,"display")}catch(s){console.error(`#renderAnnotationEditorLayer: "${s}".`),n=s}finally{e.#g("annotationeditorlayerrendered",n)}})()}#y(){var e=this;return(0,q.Z)(function*(){try{yield e.drawLayer.render("display")}catch(n){console.error(`#renderDrawLayer: "${n}".`)}})()}#_(){var e=this;return(0,q.Z)(function*(){let n=null;try{const s=yield e.xfaLayer.render(e.viewport,"display");s?.textDivs&&e._textHighlighter&&e.#C(s.textDivs)}catch(s){console.error(`#renderXfaLayer: "${s}".`),n=s}finally{e.xfaLayer?.div&&(e.l10n.pause(),e.#p(e.xfaLayer.div,"xfaLayer"),e.l10n.resume()),e.#g("xfalayerrendered",n)}})()}#w(){var e=this;return(0,q.Z)(function*(){if(!e.textLayer)return;let n=null;try{yield e.textLayer.render(e.viewport)}catch(s){if(s instanceof ka)return;console.error(`#renderTextLayer: "${s}".`),n=s}e.#g("textlayerrendered",n),e.#E()})()}#E(){var e=this;return(0,q.Z)(function*(){if(!e.textLayer)return;e.structTreeLayer||=new Bl;const n=yield e.structTreeLayer.renderingDone?null:e.pdfPage.getStructTree(),s=e.structTreeLayer?.render(n);s&&(e.l10n.pause(),e.canvas?.append(s),e.l10n.resume()),e.structTreeLayer?.show()})()}#C(e){var n=this;return(0,q.Z)(function*(){const s=yield n.pdfPage.getTextContent(),a=[];for(const c of s.items)a.push(c.str);n._textHighlighter.setTextMapping(e,a),n._textHighlighter.enable()})()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const n=this.zoomLayer.firstChild;this.#o.delete(n),n.width=0,n.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:n=!1,keepAnnotationEditorLayer:s=!1,keepXfaLayer:a=!1,keepTextLayer:c=!1}={}){this.cancelRendering({keepAnnotationLayer:n,keepAnnotationEditorLayer:s,keepXfaLayer:a,keepTextLayer:c}),this.renderingState=Dn.INITIAL;const u=this.div,h=u.childNodes,g=e&&this.zoomLayer||null,b=n&&this.annotationLayer?.div||null,E=s&&this.annotationEditorLayer?.div||null,D=a&&this.xfaLayer?.div||null,T=c&&this.textLayer?.div||null;for(let O=h.length-1;O>=0;O--){const k=h[O];switch(k){case g:case b:case E:case D:case T:continue}k.remove();const j=this.#h.indexOf(k);j>=0&&(this.#h[j]=null)}u.removeAttribute("data-loaded"),b&&this.annotationLayer.hide(),E&&this.annotationEditorLayer.hide(),D&&this.xfaLayer.hide(),T&&this.textLayer.hide(),this.structTreeLayer?.hide(),g||(this.canvas&&(this.#o.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:n=null,optionalContentConfigPromise:s=null,drawingDelay:a=-1}){if(this.scale=e||this.scale,"number"==typeof n&&(this.rotation=n),s instanceof Promise&&(this._optionalContentConfigPromise=s,s.then(u=>{s===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=u.hasInitialVisibility)})),this.#u.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*Es.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#f(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let u=!1;if(this.#n)if(0===this.maxCanvasPixels)u=!0;else if(this.maxCanvasPixels>0){const{width:g,height:b}=this.viewport,{sx:E,sy:D}=this.outputScale;u=(Math.floor(g)*E|0)*(Math.floor(b)*D|0)>this.maxCanvasPixels}const h=a>=0&&a<1e3;if(h||u){if(h&&!u&&this.renderingState!==Dn.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:a}),this.renderingState=Dn.FINISHED,this.#u.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!h,hideTextLayer:h}),h)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#l})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:n=!1,keepXfaLayer:s=!1,keepTextLayer:a=!1,cancelExtraDelay:c=0}={}){this.renderTask&&(this.renderTask.cancel(c),this.renderTask=null),this.resume=null,this.textLayer&&(!a||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!n||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!s||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:n=!1,redrawAnnotationEditorLayer:s=!1,redrawXfaLayer:a=!1,redrawTextLayer:c=!1,hideTextLayer:u=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:g}=e;g.width=g.height=""}const h=this.#o.get(e);if(this.viewport!==h){const g=this.viewport.rotation-h.rotation,b=Math.abs(g);let E=1,D=1;if(90===b||270===b){const{width:T,height:O}=this.viewport;E=O/T,D=T/O}e.style.transform=`rotate(${g}deg) scale(${E}, ${D})`}n&&this.annotationLayer&&this.#v(),s&&this.annotationEditorLayer&&(this.drawLayer&&this.#y(),this.#m()),a&&this.xfaLayer&&this.#_(),this.textLayer&&(u?(this.textLayer.hide(),this.structTreeLayer?.hide()):c&&this.#w())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,n){return this.viewport.convertToPdfPoint(e,n)}#T(e,n=null){var s=this;return(0,q.Z)(function*(){if(e===s.renderTask&&(s.renderTask=null),n instanceof Uc)s.#l=null;else if(s.#l=n,s.renderingState=Dn.FINISHED,s._resetZoomLayer(!0),s.#u.regularAnnotations=!e.separateAnnots,s.eventBus.dispatch("pagerendered",{source:s,pageNumber:s.id,cssTransform:!1,timestamp:performance.now(),error:s.#l}),n)throw n})()}draw(){var e=this;return(0,q.Z)(function*(){e.renderingState!==Dn.INITIAL&&(console.error("Must be in new state before drawing"),e.reset());const{div:n,l10n:s,pageColors:a,pdfPage:c,viewport:u}=e;if(!c)throw e.renderingState=Dn.FINISHED,new Error("pdfPage is not loaded");e.renderingState=Dn.RUNNING;const h=document.createElement("div");if(h.classList.add("canvasWrapper"),e.#p(h,"canvasWrapper"),!e.textLayer&&0!==e.#c&&!c.isPureXfa&&(e._accessibilityManager||=new Cs,e.textLayer=new Co({pdfPage:c,highlighter:e._textHighlighter,accessibilityManager:e._accessibilityManager,enablePermissions:2===e.#c,onAppend:Me=>{e.l10n.pause(),e.#p(Me,"textLayer"),e.l10n.resume()}})),!e.annotationLayer&&e.#e!==ur.DISABLE){const{annotationStorage:Me,annotationEditorUIManager:He,downloadManager:re,enableScripting:je,fieldObjectsPromise:nt,hasJSActionsPromise:Jt,linkService:sn}=e.#r;e._annotationCanvasMap||=new Map,e.annotationLayer=new ud({pdfPage:c,annotationStorage:Me,imageResourcesPath:e.imageResourcesPath,renderForms:e.#e===ur.ENABLE_FORMS,linkService:sn,downloadManager:re,enableScripting:je,hasJSActionsPromise:Jt,fieldObjectsPromise:nt,annotationCanvasMap:e._annotationCanvasMap,accessibilityManager:e._accessibilityManager,annotationEditorUIManager:He,onAppend:en=>{e.#p(en,"annotationLayer")}})}const{width:b,height:E}=u,D=document.createElement("canvas");D.setAttribute("role","presentation"),D.hidden=!0;const T=!(!a?.background||!a?.foreground);let O=Me=>{(!T||Me)&&(D.hidden=!1,O=null)};h.append(D),e.canvas=D;const k=D.getContext("2d",{alpha:!1,willReadFrequently:!e.#t}),j=e.outputScale=new Ta;if(0===e.maxCanvasPixels){const Me=1/e.scale;j.sx*=Me,j.sy*=Me,e.#n=!0}else if(e.maxCanvasPixels>0){const He=Math.sqrt(e.maxCanvasPixels/(b*E));j.sx>He||j.sy>He?(j.sx=He,j.sy=He,e.#n=!0):e.#n=!1}const G=Rh(j.sx),U=Rh(j.sy);D.width=Rc(b*j.sx,G[0]),D.height=Rc(E*j.sy,U[0]);const{style:ne}=D;ne.width=Rc(b,G[1])+"px",ne.height=Rc(E,U[1])+"px",e.#o.set(D,u);const de={canvasContext:k,transform:j.scaled?[j.sx,0,0,j.sy,0,0]:null,viewport:u,annotationMode:e.#e,optionalContentConfigPromise:e._optionalContentConfigPromise,annotationCanvasMap:e._annotationCanvasMap,pageColors:a,isEditing:e.#i},ve=e.renderTask=c.render(de);ve.onContinue=Me=>{if(O?.(!1),e.renderingQueue&&!e.renderingQueue.isHighestPriority(e))return e.renderingState=Dn.PAUSED,void(e.resume=()=>{e.renderingState=Dn.RUNNING,Me()});Me()};const ye=ve.promise.then((0,q.Z)(function*(){O?.(!0),yield e.#T(ve),e.#w(),e.annotationLayer&&(yield e.#v());const{annotationEditorUIManager:Me}=e.#r;Me&&(e.drawLayer||=new iu({pageIndex:e.id}),yield e.#y(),e.drawLayer.setParent(h),e.annotationEditorLayer||=new xd({uiManager:Me,pdfPage:c,l10n:s,accessibilityManager:e._accessibilityManager,annotationLayer:e.annotationLayer?.annotationLayer,textLayer:e.textLayer,drawLayer:e.drawLayer.getDrawLayer(),onAppend:He=>{e.#p(He,"annotationEditorLayer")}}),e.#m())}),Me=>(Me instanceof Uc||O?.(!0),e.#T(ve,Me)));if(c.isPureXfa){if(!e.xfaLayer){const{annotationStorage:Me,linkService:He}=e.#r;e.xfaLayer=new Rd({pdfPage:c,annotationStorage:Me,linkService:He})}e.#_()}return n.setAttribute("data-loaded",!0),e.eventBus.dispatch("pagerender",{source:e,pageNumber:e.id}),ye})()}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:n,regularAnnotations:s}=this.#u;return e&&n&&s?this.canvas:null}}function Xo(){return(Xo=(0,q.Z)(function*(f){const n="".split("#",1)[0];let{info:s,metadata:a,contentDispositionFilename:c,contentLength:u}=yield f.getMetadata();if(!u){const{length:h}=yield f.getDownloadInfo();u=h}return{...s,baseURL:n,filesize:u,filename:c||zh(""),metadata:a?.getRaw(),authors:a?.get("dc:creator"),numPages:f.numPages,URL:""}})).apply(this,arguments)}class su{constructor(e){this._ready=new Promise((n,s)=>{import(e).then(c=>{n(c.QuickJSSandbox())}).catch(s)})}createSandbox(e){var n=this;return(0,q.Z)(function*(){(yield n._ready).create(e)})()}dispatchEventInSandbox(e){var n=this;return(0,q.Z)(function*(){const s=yield n._ready;setTimeout(()=>s.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return(0,q.Z)(function*(){(yield e._ready).nukeSandbox()})()}}class Zo{#e=null;#t=null;#n=null;#i=null;#r=null;#s=null;#a=null;#l=null;#d=!1;#c=null;#u=null;constructor({eventBus:e,externalServices:n=null,docProperties:s=null}){this.#r=e,this.#s=n,this.#n=s}setViewer(e){this.#l=e}setDocument(e){var n=this;return(0,q.Z)(function*(){if(n.#a&&(yield n.#g()),n.#a=e,!e)return;const[s,a,c]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!s&&!c)return void(yield n.#g());if(e!==n.#a)return;try{n.#c=n.#f()}catch(g){return console.error(`setDocument: "${g.message}".`),void(yield n.#g())}const u=n.#r;n.#i=new AbortController;const{signal:h}=n.#i;u._on("updatefromsandbox",g=>{g?.source===window&&n.#o(g.detail)},{signal:h}),u._on("dispatcheventinsandbox",g=>{n.#c?.dispatchEventInSandbox(g.detail)},{signal:h}),u._on("pagechanging",({pageNumber:g,previous:b})=>{g!==b&&(n.#p(b),n.#h(g))},{signal:h}),u._on("pagerendered",({pageNumber:g})=>{n._pageOpenPending.has(g)&&g===n.#l.currentPageNumber&&n.#h(g)},{signal:h}),u._on("pagesdestroy",(0,q.Z)(function*(){yield n.#p(n.#l.currentPageNumber),yield n.#c?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),n.#e?.resolve()}),{signal:h});try{const g=yield n.#n(e);if(e!==n.#a)return;yield n.#c.createSandbox({objects:s,calculationOrder:a,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...g,actions:c}}),u.dispatch("sandboxcreated",{source:n})}catch(g){return console.error(`setDocument: "${g.message}".`),void(yield n.#g())}yield n.#c?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield n.#h(n.#l.currentPageNumber,!0),Promise.resolve().then(()=>{e===n.#a&&(n.#d=!0)})})()}dispatchWillSave(){var e=this;return(0,q.Z)(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return(0,q.Z)(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return(0,q.Z)(function*(){if(e.#c){yield e.#u?.promise,e.#u=Promise.withResolvers();try{yield e.#c.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(n){throw e.#u.resolve(),e.#u=null,n}yield e.#u.promise}})()}dispatchDidPrint(){var e=this;return(0,q.Z)(function*(){return e.#c?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#d}get _pageOpenPending(){return Xs(this,"_pageOpenPending",new Set)}get _visitedPages(){return Xs(this,"_visitedPages",new Map)}#o(e){var n=this;return(0,q.Z)(function*(){const s=n.#l,a=s.isInPresentationMode||s.isChangingPresentationMode,{id:c,siblings:u,command:h,value:g}=e;if(!c){switch(h){case"clear":console.clear();break;case"error":console.error(g);break;case"layout":if(!a){const E=function Ku(f){let e=Kt.VERTICAL,n=bi.NONE;switch(f){case"SinglePage":e=Kt.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=Kt.PAGE;case"TwoColumnLeft":n=bi.ODD;break;case"TwoPageRight":e=Kt.PAGE;case"TwoColumnRight":n=bi.EVEN}return{scrollMode:e,spreadMode:n}}(g);s.spreadMode=E.spreadMode}break;case"page-num":s.currentPageNumber=g+1;break;case"print":yield s.pagesPromise,n.#r.dispatch("print",{source:n});break;case"println":console.log(g);break;case"zoom":a||(s.currentScaleValue=g);break;case"SaveAs":n.#r.dispatch("download",{source:n});break;case"FirstPage":s.currentPageNumber=1;break;case"LastPage":s.currentPageNumber=s.pagesCount;break;case"NextPage":s.nextPage();break;case"PrevPage":s.previousPage();break;case"ZoomViewIn":a||s.increaseScale();break;case"ZoomViewOut":a||s.decreaseScale();break;case"WillPrintFinished":n.#u?.resolve(),n.#u=null}return}if(a&&e.focus)return;delete e.id,delete e.siblings;const b=u?[c,...u]:[c];for(const E of b){const D=document.querySelector(`[data-element-id="${E}"]`);D?D.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):n.#a?.annotationStorage.setValue(E,e)}})()}#h(e,n=!1){var s=this;return(0,q.Z)(function*(){const a=s.#a,c=s._visitedPages;if(n&&(s.#e=Promise.withResolvers()),!s.#e)return;const u=s.#l.getPageView(e-1);if(u?.renderingState!==Dn.FINISHED)return void s._pageOpenPending.add(e);s._pageOpenPending.delete(e);const h=(0,q.Z)(function*(){const g=yield c.has(e)?null:u.pdfPage?.getJSActions();a===s.#a&&(yield s.#c?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:g}))})();c.set(e,h)})()}#p(e){var n=this;return(0,q.Z)(function*(){const s=n.#a,a=n._visitedPages;if(!n.#e||n._pageOpenPending.has(e))return;const c=a.get(e);c&&(a.set(e,null),yield c,s===n.#a&&(yield n.#c?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#f(){if(this.#t=Promise.withResolvers(),this.#c)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){var e=this;return(0,q.Z)(function*(){if(!e.#c)return e.#a=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(n=>{setTimeout(n,1e3)})]).catch(()=>{}),e.#e=null),e.#a=null;try{yield e.#c.destroySandbox()}catch{}e.#u?.reject(new Error("Scripting destroyed.")),e.#u=null,e.#i?.abort(),e.#i=null,e._pageOpenPending.clear(),e._visitedPages.clear(),e.#c=null,e.#d=!1,e.#t?.resolve()})()}}class Mf extends Zo{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",n=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:n.detail})}),e.externalServices||={createScripting:()=>new su(e.sandboxBundleSrc)},e.docProperties||=n=>function Od(f){return Xo.apply(this,arguments)}(n),super(e)}}class qg{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,n,s,a=!1){const c=e.views,u=c.length;if(0===u)return null;for(let D=0;D<u;D++){const T=c[D].view;if(!this.isViewFinished(T))return T}const h=e.first.id,g=e.last.id;if(g-h+1>u){const D=e.ids;for(let T=1,O=g-h;T<O;T++){const k=s?h+T:g-T;if(D.has(k))continue;const j=n[k-1];if(!this.isViewFinished(j))return j}}let b=s?g:h-2,E=n[b];return E&&!this.isViewFinished(E)||a&&(b+=s?1:-1,E=n[b],E&&!this.isViewFinished(E))?E:null}isViewFinished(e){return e.renderingState===Dn.FINISHED}renderView(e){switch(e.renderingState){case Dn.FINISHED:return!1;case Dn.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case Dn.RUNNING:this.highestPriorityPage=e.renderingId;break;case Dn.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(n=>{n instanceof Uc||console.error(`renderView: "${n}"`)})}return!0}}function Nd(f){return Object.values(hi).includes(f)&&f!==hi.DISABLE}class Jo{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const n=this.#e;n.has(e)&&n.delete(e),n.add(e),n.size>this.#t&&this.#n()}resize(e,n=null){this.#t=e;const s=this.#e;if(n){const a=s.size;let c=1;for(const u of s)if(n.has(u.id)&&(s.delete(u),s.add(u)),++c>a)break}for(;s.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class Ga{#e=null;#t=null;#n=null;#i=hi.NONE;#r=null;#s=ur.ENABLE_FORMS;#a=null;#l=!1;#d=!1;#c=!1;#u=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=!1;#m=null;#y=!1;#_=0;#w=new ResizeObserver(this.#F.bind(this));#E=null;#C=null;#T=1;constructor(e){const n="4.6.82";if(qh!==n)throw new Error(`The API version "${qh}" does not match the Viewer version "${n}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#w.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new Fc,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=a=>this._getVisiblePages().ids.has(a)),this._scriptingManager=e.scriptingManager||null,this.#T=e.textLayerMode??1,this.#s=e.annotationMode??ur.ENABLE_FORMS,this.#i=e.annotationEditorMode??hi.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#d=!0===e.enableHighlightFloatingButton,this.#u=!0===e.enableUpdatedAddImage,this.#o=!0===e.enableNewAltTextWhenAddingImage,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new ts,this.#c=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#l=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new qg,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:s}=e;s?.addEventListener("abort",()=>{this.#w.disconnect(),this.#w=null},{once:!0}),this.scroll=function Mg(f,e,n){const s=function(u){c||(c=window.requestAnimationFrame(function(){c=null;const g=f.scrollLeft,b=a.lastX;g!==b&&(a.right=g>b),a.lastX=g;const E=f.scrollTop,D=a.lastY;E!==D&&(a.down=E>D),a.lastY=E,e(a)}))},a={right:!0,down:!0,lastX:f.scrollLeft,lastY:f.scrollTop,_eventHandler:s};let c=null;return f.addEventListener("scroll",s,{useCapture:!0,signal:n}),n?.addEventListener("abort",()=>window.cancelAnimationFrame(c),{once:!0}),a}(this.container,this._scrollUpdate.bind(this),s),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#N(),this.eventBus._on("thumbnailrendered",({pageNumber:a,pdfPage:c})=>{this.#e.has(this._pages[a-1])||c?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===ur.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,n=!1){if(this._currentPageNumber===e)return n&&this.#R(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const s=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:s}),n&&this.#R(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let n=0|e;if(this._pageLabels){const s=this._pageLabels.indexOf(e);s>=0&&(n=s+1)}this._setCurrentPageNumber(n,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#x(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#x(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!La(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((e%=360)<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const n=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#x(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:n}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return Xs(this,"_layerProperties",{get annotationEditorUIManager(){return e.#r},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#M(e){const n={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#T};return e&&(!e.includes(Ba.COPY)&&1===this.#T&&(n.textLayerMode=2),e.includes(Ba.MODIFY_CONTENTS)||(n.annotationEditorMode=hi.DISABLE),!e.includes(Ba.MODIFY_ANNOTATIONS)&&!e.includes(Ba.FILL_INTERACTIVE_FORMS)&&this.#s===ur.ENABLE_FORMS&&(n.annotationMode=ur.ENABLE)),n}#A(e){var n=this;return(0,q.Z)(function*(){if("hidden"===document.visibilityState||!n.container.offsetParent||0===n._getVisiblePages().views.length)return;const s=Promise.withResolvers();function a(){"hidden"===document.visibilityState&&s.resolve()}document.addEventListener("visibilitychange",a,{signal:e}),yield Promise.race([n._onePageRenderedCapability.promise,s.promise]),document.removeEventListener("visibilitychange",a)})()}getAllText(){var e=this;return(0,q.Z)(function*(){const n=[],s=[];for(let a=1,c=e.pdfDocument.numPages;a<=c;++a){if(e.#y)return null;s.length=0;const u=yield e.pdfDocument.getPage(a),{items:h}=yield u.getTextContent();for(const g of h)g.str&&s.push(g.str),g.hasEOL&&s.push("\n");n.push(ml(s.join("")))}return n.join("\n")})()}#I(e,n){const s=document.getSelection(),{focusNode:a,anchorNode:c}=s;if(c&&a&&s.containsNode(this.#m)){if(this.#v||2===e)return n.preventDefault(),void n.stopPropagation();this.#v=!0;const{classList:u}=this.viewer;u.add("copyAll");const h=new AbortController;window.addEventListener("keydown",g=>this.#y="Escape"===g.key,{signal:h.signal}),this.getAllText().then(function(){var g=(0,q.Z)(function*(b){null!==b&&(yield navigator.clipboard.writeText(b))});return function(b){return g.apply(this,arguments)}}()).catch(g=>{console.warn(`Something goes wrong when extracting the text: ${g.message}`)}).finally(()=>{this.#v=!1,this.#y=!1,h.abort(),u.remove("copyAll")}),n.preventDefault(),n.stopPropagation()}}setDocument(e){var n=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#r?.destroy(),this.#r=null),this.pdfDocument=e,!e)return;const s=e.numPages,a=e.getPage(1),c=e.getOptionalContentConfig({intent:"display"}),u=this.#c?e.getPermissions():Promise.resolve(),{eventBus:h,pageColors:g,viewer:b}=this;this.#h=new AbortController;const{signal:E}=this.#h;if(s>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const O=this._scrollMode=Kt.PAGE;h.dispatch("scrollmodechanged",{source:this,mode:O})}this._pagesCapability.promise.then(()=>{h.dispatch("pagesloaded",{source:this,pagesCount:s})},()=>{}),h._on("pagerender",O=>{const k=this._pages[O.pageNumber-1];k&&this.#e.push(k)},{signal:E});const T=O=>{O.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:O.timestamp}),h._off("pagerendered",T))};h._on("pagerendered",T,{signal:E}),Promise.all([a,u]).then(([O,k])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(O),this._optionalContentConfigPromise=c;const{annotationEditorMode:j,annotationMode:G,textLayerMode:U}=this.#M(k);if(0!==U){const ve=this.#m=document.createElement("div");ve.id="hiddenCopyElement",b.before(ve)}if("function"==typeof AbortSignal.any&&j!==hi.DISABLE){const ve=j;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):Nd(ve)?(this.#r=new ad(this.container,b,this.#t,h,e,g,this.#n,this.#d,this.#u,this.#o,this.#p),h.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#r}),ve!==hi.NONE&&(ve===hi.STAMP&&this.#p?.loadModel("altText"),this.#r.updateMode(ve))):console.error(`Invalid AnnotationEditor mode: ${ve}`)}const ne=this._scrollMode===Kt.PAGE?null:b,ue=this.currentScale,de=O.getViewport({scale:ue*Es.PDF_TO_CSS_UNITS});b.style.setProperty("--scale-factor",de.scale),("CanvasText"===g?.foreground||"Canvas"===g?.background)&&(b.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),b.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let ve=1;ve<=s;++ve){const ye=new ru({container:ne,eventBus:h,id:ve,scale:ue,defaultViewport:de.clone(),optionalContentConfigPromise:c,renderingQueue:this.renderingQueue,textLayerMode:U,annotationMode:G,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:g,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#l});this._pages.push(ye)}this._pages[0]?.setPdfPage(O),this._scrollMode===Kt.PAGE?this.#S():this._spreadMode!==bi.NONE&&this._updateSpreadMode(),this.#A(E).then((0,q.Z)(function*(){if(e!==n.pdfDocument)return;if(n.findController?.setDocument(e),n._scriptingManager?.setDocument(e),n.#m&&document.addEventListener("copy",n.#I.bind(n,U),{signal:E}),n.#r&&h.dispatch("annotationeditormodechanged",{source:n,mode:n.#i}),e.loadingParams.disableAutoFetch||s>5e3)return void n._pagesCapability.resolve();let ve=s-1;if(ve<=0)n._pagesCapability.resolve();else for(let ye=2;ye<=s;++ye){const Me=e.getPage(ye).then(He=>{const re=n._pages[ye-1];re.pdfPage||re.setPdfPage(He),0==--ve&&n._pagesCapability.resolve()},He=>{console.error(`Unable to get page ${ye} to initialize viewer`,He),0==--ve&&n._pagesCapability.resolve()});ye%250==0&&(yield Me)}})),h.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:ve})=>{e===this.pdfDocument&&ve.Language&&(b.lang=ve.Language)}),this.defaultRenderingQueue&&this.update()}).catch(O=>{console.error("Unable to initialize viewer",O),this._pagesCapability.reject(O)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let n=0,s=this._pages.length;n<s;n++)this._pages[n].setPageLabel(this._pageLabels?.[n]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#e=new Jo(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=Kt.VERTICAL,this._previousScrollMode=Kt.UNKNOWN,this._spreadMode=bi.NONE,this.#E={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#B()}#S(){if(this._scrollMode!==Kt.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,n=this.#E,s=this.viewer;if(s.textContent="",n.pages.length=0,this._spreadMode!==bi.NONE||this.isInPresentationMode){const a=new Set,c=this._spreadMode-1;-1===c?a.add(e-1):e%2!==c?(a.add(e-1),a.add(e)):(a.add(e-2),a.add(e-1));const u=document.createElement("div");if(u.className="spread",this.isInPresentationMode){const h=document.createElement("div");h.className="dummyPage",u.append(h)}for(const h of a){const g=this._pages[h];g&&(u.append(g.div),n.pages.push(g))}s.append(u)}else{const a=this._pages[e-1];s.append(a.div),n.pages.push(a)}n.scrollDown=e>=n.previousPageNumber,n.previousPageNumber=e}_scrollUpdate(){0!==this.pagesCount&&this.update()}#P(e,n=null){const{div:s,id:a}=e;if(this._currentPageNumber!==a&&this._setCurrentPageNumber(a),this._scrollMode===Kt.PAGE&&(this.#S(),this.update()),!n&&!this.isInPresentationMode){const c=s.offsetLeft+s.clientLeft,u=c+s.clientWidth,{scrollLeft:h,clientWidth:g}=this.container;(this._scrollMode===Kt.HORIZONTAL||c<h||u>h+g)&&(n={left:0,top:0})}$u(s,n),!this._currentScaleValue&&this._location&&(this._location=null)}#L(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#D(e,n,{noScroll:s=!1,preset:a=!1,drawingDelay:c=-1,origin:u=null}){if(this._currentScaleValue=n.toString(),this.#L(e))return void(a&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n}));this.viewer.style.setProperty("--scale-factor",e*Es.PDF_TO_CSS_UNITS);const h=c>=0&&c<1e3;this.refresh(!0,{scale:e,drawingDelay:h?c:-1}),h&&(this.#C=setTimeout(()=>{this.#C=null,this.refresh()},c));const g=this._currentScale;if(this._currentScale=e,!s){let E,b=this._currentPageNumber;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(b=this._location.pageNumber,E=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:b,destArray:E,allowNegativeOffset:!0}),Array.isArray(u)){const D=e/g-1,[T,O]=this.containerTopLeft;this.container.scrollLeft+=(u[0]-O)*D,this.container.scrollTop+=(u[1]-T)*D}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:a?n:void 0}),this.defaultRenderingQueue&&this.update()}get#b(){return this._spreadMode!==bi.NONE&&this._scrollMode!==Kt.HORIZONTAL?2:1}#x(e,n){let s=parseFloat(e);if(s>0)n.preset=!1,this.#D(s,e,n);else{const a=this._pages[this._currentPageNumber-1];if(!a)return;let c=40,u=5;this.isInPresentationMode?(c=u=4,this._spreadMode!==bi.NONE&&(c*=2)):this.removePageBorders?c=u=0:this._scrollMode===Kt.HORIZONTAL&&([c,u]=[u,c]);const h=(this.container.clientWidth-c)/a.width*a.scale/this.#b,g=(this.container.clientHeight-u)/a.height*a.scale;switch(e){case"page-actual":s=1;break;case"page-width":s=h;break;case"page-height":s=g;break;case"page-fit":s=Math.min(h,g);break;case"auto":const b=Oc(a)?h:Math.min(g,h);s=Math.min(1.25,b);break;default:return void console.error(`#setScale: "${e}" is an unknown zoom value.`)}n.preset=!0,this.#D(s,e,n)}}#R(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#x(this._currentScaleValue,{noScroll:!0}),this.#P(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const n=this._pageLabels.indexOf(e);return n<0?null:n+1}scrollPageIntoView({pageNumber:e,destArray:n=null,allowNegativeOffset:s=!1,ignoreDestinationZoom:a=!1}){if(!this.pdfDocument)return;const c=Number.isInteger(e)&&this._pages[e-1];if(!c)return void console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!n)return void this._setCurrentPageNumber(e,!0);let E,D,u=0,h=0,g=0,b=0;const T=c.rotation%180!=0,O=(T?c.height:c.width)/c.scale/Es.PDF_TO_CSS_UNITS,k=(T?c.width:c.height)/c.scale/Es.PDF_TO_CSS_UNITS;let j=0;switch(n[1].name){case"XYZ":u=n[2],h=n[3],j=n[4],u=null!==u?u:0,h=null!==h?h:k;break;case"Fit":case"FitB":j="page-fit";break;case"FitH":case"FitBH":h=n[2],j="page-width",null===h&&this._location?(u=this._location.left,h=this._location.top):("number"!=typeof h||h<0)&&(h=k);break;case"FitV":case"FitBV":u=n[2],g=O,b=k,j="page-height";break;case"FitR":u=n[2],h=n[3],g=n[4]-u,b=n[5]-h;let ue=40,de=5;this.removePageBorders&&(ue=de=0),E=(this.container.clientWidth-ue)/g/Es.PDF_TO_CSS_UNITS,D=(this.container.clientHeight-de)/b/Es.PDF_TO_CSS_UNITS,j=Math.min(Math.abs(E),Math.abs(D));break;default:return void console.error(`scrollPageIntoView: "${n[1].name}" is not a valid destination type.`)}if(a||(j&&j!==this._currentScale?this.currentScaleValue=j:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===j&&!n[4])return void this.#P(c);const G=[c.viewport.convertToViewportPoint(u,h),c.viewport.convertToViewportPoint(u+g,h+b)];let U=Math.min(G[0][0],G[1][0]),ne=Math.min(G[0][1],G[1][1]);s||(U=Math.max(U,0),ne=Math.max(ne,0)),this.#P(c,{left:U,top:ne})}_updateLocation(e){const n=this._currentScale,s=this._currentScaleValue,a=parseFloat(s)===n?Math.round(1e4*n)/100:s,c=e.id,h=this.container,g=this._pages[c-1].getPagePoint(h.scrollLeft-e.x,h.scrollTop-e.y),b=Math.round(g[0]),E=Math.round(g[1]);let D=`#page=${c}`;this.isInPresentationMode||(D+=`&zoom=${a},${b},${E}`),this._location={pageNumber:c,scale:a,top:E,left:b,rotation:this._pagesRotation,pdfOpenParams:D}}update(){const e=this._getVisiblePages(),n=e.views,s=n.length;if(0===s)return;const a=Math.max(10,2*s+1);this.#e.resize(a,e.ids),this.renderingQueue.renderHighestPriority(e);const c=this._spreadMode===bi.NONE&&(this._scrollMode===Kt.PAGE||this._scrollMode===Kt.VERTICAL),u=this._currentPageNumber;let h=!1;for(const g of n){if(g.percent<100)break;if(g.id===u&&c){h=!0;break}}this._setCurrentPageNumber(h?u:n[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#k(){const e=this._getVisiblePages(),n=[],{ids:s,views:a}=e;for(const c of a){const{view:u}=c;u.hasEditableAnnotations()?n.push(c):s.delete(u.id)}return 0===n.length?null:(this.renderingQueue.renderHighestPriority({first:n[0],last:n.at(-1),views:n,ids:s}),s)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===Kt.PAGE?this.#E.pages:this._pages,n=this._scrollMode===Kt.HORIZONTAL;return function Oh({scrollEl:f,views:e,sortByVisibility:n=!1,horizontal:s=!1,rtl:a=!1}){const c=f.scrollTop,u=c+f.clientHeight,h=f.scrollLeft,g=h+f.clientWidth,D=[],T=new Set,O=e.length;let k=Pa(e,s?function E(ne){const ue=ne.div,de=ue.offsetLeft+ue.clientLeft;return a?de<g:de+ue.clientWidth>h}:function b(ne){const ue=ne.div;return ue.offsetTop+ue.clientTop+ue.clientHeight>c});k>0&&k<O&&!s&&(k=function Ra(f,e,n){if(f<2)return f;let s=e[f].div,a=s.offsetTop+s.clientTop;a>=n&&(s=e[f-1].div,a=s.offsetTop+s.clientTop);for(let c=f-2;c>=0&&(s=e[c].div,!(s.offsetTop+s.clientTop+s.clientHeight<=a));--c)f=c;return f}(k,e,c));let j=s?g:-1;for(let ne=k;ne<O;ne++){const ue=e[ne],de=ue.div,ve=de.offsetLeft+de.clientLeft,ye=de.offsetTop+de.clientTop,Me=de.clientWidth,He=de.clientHeight,re=ve+Me,je=ye+He;if(-1===j)je>=u&&(j=je);else if((s?ve:ye)>j)break;if(je<=c||ye>=u||re<=h||ve>=g)continue;const nt=Math.max(0,c-ye)+Math.max(0,je-u),en=(Me-(Math.max(0,h-ve)+Math.max(0,re-g)))/Me;D.push({id:ue.id,x:ve,y:ye,view:ue,percent:(He-nt)/He*en*100|0,widthPercent:100*en|0}),T.add(ue.id)}const G=D[0],U=D.at(-1);return n&&D.sort(function(ne,ue){const de=ne.percent-ue.percent;return Math.abs(de)>.001?-de:ne.id-ue.id}),{first:G,last:U,views:D,ids:T}}({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:n,rtl:n&&this._isContainerRtl})}cleanup(){for(const e of this._pages)e.renderingState!==Dn.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}#V(e){var n=this;return(0,q.Z)(function*(){if(e.pdfPage)return e.pdfPage;try{const s=yield n.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(s),s}catch(s){return console.error("Unable to get page for page view",s),null}})()}#j(e){if(1===e.first?.id)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case Kt.PAGE:return this.#E.scrollDown;case Kt.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const n=e||this._getVisiblePages(),s=this.#j(n),c=this.renderingQueue.getHighestPriority(n,this._pages,s,this._spreadMode!==bi.NONE&&this._scrollMode!==Kt.HORIZONTAL);return!!c&&(this.#V(c).then(()=>{this.renderingQueue.renderView(c)}),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let n=1,s=this._pages.length;n<s;++n){const a=this._pages[n];if(a.width!==e.width||a.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(n=>{const s=n.pdfPage.getViewport({scale:1}),a=Oc(s);if(void 0===e)e=a;else if(this.enablePrintAutoRotate&&a!==e)return{width:s.height,height:s.width,rotation:(s.rotation-90)%360};return{width:s.width,height:s.height,rotation:s.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!function Ig(f){return Number.isInteger(f)&&Object.values(Kt).includes(f)&&f!==Kt.UNKNOWN}(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const n=this._scrollMode,s=this.viewer;s.classList.toggle("scrollHorizontal",n===Kt.HORIZONTAL),s.classList.toggle("scrollWrapped",n===Kt.WRAPPED),this.pdfDocument&&e&&(n===Kt.PAGE?this.#S():this._previousScrollMode===Kt.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!function Gu(f){return Number.isInteger(f)&&Object.values(bi).includes(f)&&f!==bi.UNKNOWN}(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const n=this.viewer,s=this._pages;if(this._scrollMode===Kt.PAGE)this.#S();else if(n.textContent="",this._spreadMode===bi.NONE)for(const a of this._pages)n.append(a.div);else{const a=this._spreadMode-1;let c=null;for(let u=0,h=s.length;u<h;++u)null===c?(c=document.createElement("div"),c.className="spread",n.append(c)):u%2===a&&(c=c.cloneNode(!1),n.append(c)),c.append(s[u].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,n=!1){switch(this._scrollMode){case Kt.WRAPPED:{const{views:s}=this._getVisiblePages(),a=new Map;for(const{id:c,y:u,percent:h,widthPercent:g}of s){if(0===h||g<100)continue;let b=a.get(u);b||a.set(u,b||=[]),b.push(c)}for(const c of a.values()){const u=c.indexOf(e);if(-1===u)continue;const h=c.length;if(1===h)break;if(n)for(let g=u-1,b=0;g>=b;g--){const D=c[g+1]-1;if(c[g]<D)return e-D}else for(let g=u+1,b=h;g<b;g++){const D=c[g-1]+1;if(c[g]>D)return D-e}if(n){const g=c[0];if(g<e)return e-g+1}else{const g=c[h-1];if(g>e)return g-e+1}break}break}case Kt.HORIZONTAL:break;case Kt.PAGE:case Kt.VERTICAL:{if(this._spreadMode===bi.NONE)break;const s=this._spreadMode-1;if(n&&e%2!==s)break;if(!n&&e%2===s)break;const{views:a}=this._getVisiblePages(),c=n?e-1:e+1;for(const{id:u,percent:h,widthPercent:g}of a)if(u===c){if(h>0&&100===g)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,n=this.pagesCount;if(e>=n)return!1;const s=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+s,n),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const n=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-n,1),!0}updateScale({drawingDelay:e,scaleFactor:n=null,steps:s=null,origin:a}){if(null===s&&null===n)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let c=this._currentScale;if(n>0&&1!==n)c=Math.round(c*n*100)/100;else if(s){const u=s>0?1.1:1/1.1,h=s>0?Math.ceil:Math.floor;s=Math.abs(s);do{c=h(10*(c*u).toFixed(2))/10}while(--s>0)}c=Math.max(.1,Math.min(10,c)),this.#x(c,{noScroll:!1,drawingDelay:e,origin:a})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#N(e=this.container.clientHeight){e!==this.#_&&(this.#_=e,es.setProperty("--viewer-container-height",`${e}px`))}#F(e){for(const n of e)if(n.target===this.container){this.#N(Math.floor(n.borderBoxSize[0].blockSize)),this.#a=null;break}}get containerTopLeft(){return this.#a||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#f&&(this.eventBus._off("pagerendered",this.#f),this.#f=null),null!==this.#g&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#r?this.#i:hi.DISABLE}set annotationEditorMode({mode:e,editId:n=null,isFromKeyboard:s=!1}){if(!this.#r)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!Nd(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===hi.STAMP&&this.#p?.loadModel("altText");const{eventBus:a}=this,c=()=>{this.#B(),this.#i=e,this.#r.updateMode(e,n,s),a.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===hi.NONE||this.#i===hi.NONE){const u=e!==hi.NONE;u||this.pdfDocument.annotationStorage.resetModifiedIds();for(const g of this._pages)g.toggleEditingMode(u);const h=this.#k();if(u&&h){this.#B(),this.#f=({pageNumber:b})=>{h.delete(b),0===h.size&&(this.#g=setTimeout(c,0))};const{signal:g}=this.#h;return void a._on("pagerendered",this.#f,{signal:g})}}c()}refresh(e=!1,n=Object.create(null)){if(this.pdfDocument){for(const s of this._pages)s.update(n);null!==this.#C&&(clearTimeout(this.#C),this.#C=null),e||this.update()}}}class ou extends Ga{_resetView(){super._resetView(),this._scrollMode=Kt.PAGE,this._spreadMode=bi.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}var kd=xt.AnnotationLayerBuilder,Fd=xt.DownloadManager,Pf=xt.EventBus,Rf=xt.FindState,Bd=xt.GenericL10n,ea=xt.LinkTarget,jd=xt.PDFFindController,Qs=xt.PDFHistory,ta=xt.PDFLinkService,Of=xt.PDFPageView,Xg=xt.PDFScriptingManager,Lf=xt.PDFSinglePageViewer,Nf=xt.PDFViewer,Zg=xt.ProgressBar,Qg=xt.RenderingStates,Hd=xt.ScrollMode,kf=xt.SimpleLinkService,Ff=xt.SpreadMode,Bf=xt.StructTreeLayerBuilder,jf=xt.TextLayerBuilder,au=xt.XfaLayerBuilder,Ds=xt.parseQueryString;const Ya=["pdfViewerContainer"];function jl(f,e,n){f[e]=n}function Hl(){return typeof window>"u"}Hl()||jl(M,"verbosity",fl.INFOS),typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let f,e;return{promise:new Promise((s,a)=>{f=s,e=a}),resolve:f,reject:e}});var $d=function(f){return f[f.DISABLED=0]="DISABLED",f[f.ENABLED=1]="ENABLED",f[f.ENHANCED=2]="ENHANCED",f}($d||{});let Jg=(()=>{class f{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof M<"u"?`https://unpkg.com/pdfjs-dist@${_t}/cmaps/`:null;_imageResourcesPath=typeof M<"u"?`https://unpkg.com/pdfjs-dist@${_t}/web/images/`:void 0;_renderText=!0;_renderTextMode=$d.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Q.x;afterLoadComplete=new se.vpe;pageRendered=new se.vpe;pageInitialized=new se.vpe;textLayerRendered=new se.vpe;onError=new se.vpe;onProgress=new se.vpe;pageChange=new se.vpe(!0);src;set cMapsUrl(n){this._cMapsUrl=n}set page(n){const s=n=parseInt(n,10)||1;this._pdf&&(n=this.getValidPageNumber(n)),this._page=n,s!==n&&this.pageChange.emit(n)}set renderText(n){this._renderText=n}set renderTextMode(n){this._renderTextMode=n}set originalSize(n){this._originalSize=n}set showAll(n){this._showAll=n}set stickToPage(n){this._stickToPage=n}set zoom(n){n<=0||(this._zoom=n)}get zoom(){return this._zoom}set zoomScale(n){this._zoomScale=n}get zoomScale(){return this._zoomScale}set rotation(n){"number"==typeof n&&n%90==0?this._rotation=n:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(n){this._externalLinkTarget=n}set autoresize(n){this._canAutoResize=!!n}set fitToPage(n){this._fitToPage=!!n}set showBorders(n){this._showBorders=!!n}static getLinkTarget(n){switch(n){case"blank":return ea.BLANK;case"none":return ea.NONE;case"self":return ea.SELF;case"parent":return ea.PARENT;case"top":return ea.TOP}return null}constructor(n,s){if(this.element=n,this.ngZone=s,Hl())return;let a;const c=_t;a=window[`pdfWorkerSrc${c}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${c}/legacy/build/pdf.worker.min.mjs`),jl(Oe,"workerSrc",a)}ngAfterViewChecked(){if(this.isInitialized)return;const n=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=n?!1===this.isVisible&&null!=n&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(n){if(!Hl()&&this.isVisible)if("src"in n)this.loadPDF();else if(this._pdf){if(("renderText"in n||"showAll"in n)&&(this.setupViewer(),this.resetPdfDocument()),"page"in n){const{page:s}=n;if(s.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,oe.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,ce.R)(this.destroy$)).subscribe({next:n=>{const s=this._rotation+n.rotate,a=n.getViewport({scale:this._zoom,rotation:s}).width*f.CSS_UNITS;let c=this._zoom,u=!0;if(!this._originalSize||this._fitToPage&&a>this.pdfViewerContainer.nativeElement.clientWidth){const h=n.getViewport({scale:1,rotation:s});c=this.getScale(h.width,h.height),u=!this._stickToPage}this.pdfViewer.currentScale=c,u&&this.pdfViewer.scrollPageIntoView({pageNumber:n.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const n=f.getLinkTarget(this._externalLinkTarget);return n?{externalLinkTarget:n}:{}}initEventBus(){this.eventBus=function Vd(f,e){const n=new f.EventBus;return function Ud(f,e){(0,ee.R)(f,"documentload").pipe((0,ce.R)(e)).subscribe(()=>{const n=document.createEvent("CustomEvent");n.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(n)}),(0,ee.R)(f,"pagerendered").pipe((0,ce.R)(e)).subscribe(({pageNumber:n,cssTransform:s,source:a})=>{const c=document.createEvent("CustomEvent");c.initCustomEvent("pagerendered",!0,!0,{pageNumber:n,cssTransform:s}),a.div.dispatchEvent(c)}),(0,ee.R)(f,"textlayerrendered").pipe((0,ce.R)(e)).subscribe(({pageNumber:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:n}),s.textLayerDiv?.dispatchEvent(a)}),(0,ee.R)(f,"pagechanging").pipe((0,ce.R)(e)).subscribe(({pageNumber:n,source:s})=>{const a=document.createEvent("UIEvents");a.initEvent("pagechanging",!0,!0),a.pageNumber=n,s.container.dispatchEvent(a)}),(0,ee.R)(f,"pagesinit").pipe((0,ce.R)(e)).subscribe(({source:n})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagesinit",!0,!0,null),n.container.dispatchEvent(s)}),(0,ee.R)(f,"pagesloaded").pipe((0,ce.R)(e)).subscribe(({pagesCount:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("pagesloaded",!0,!0,{pagesCount:n}),s.container.dispatchEvent(a)}),(0,ee.R)(f,"scalechange").pipe((0,ce.R)(e)).subscribe(({scale:n,presetValue:s,source:a})=>{const c=document.createEvent("UIEvents");c.initEvent("scalechange",!0,!0),c.scale=n,c.presetValue=s,a.container.dispatchEvent(c)}),(0,ee.R)(f,"updateviewarea").pipe((0,ce.R)(e)).subscribe(({location:n,source:s})=>{const a=document.createEvent("UIEvents");a.initEvent("updateviewarea",!0,!0),a.location=n,s.container.dispatchEvent(a)}),(0,ee.R)(f,"find").pipe((0,ce.R)(e)).subscribe(({source:n,type:s,query:a,phraseSearch:c,caseSensitive:u,highlightAll:h,findPrevious:g})=>{if(n===window)return;const b=document.createEvent("CustomEvent");b.initCustomEvent("find"+s,!0,!0,{query:a,phraseSearch:c,caseSensitive:u,highlightAll:h,findPrevious:g}),window.dispatchEvent(b)}),(0,ee.R)(f,"attachmentsloaded").pipe((0,ce.R)(e)).subscribe(({attachmentsCount:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:n}),s.container.dispatchEvent(a)}),(0,ee.R)(f,"sidebarviewchanged").pipe((0,ce.R)(e)).subscribe(({view:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("sidebarviewchanged",!0,!0,{view:n}),s.outerContainer.dispatchEvent(a)}),(0,ee.R)(f,"pagemode").pipe((0,ce.R)(e)).subscribe(({mode:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("pagemode",!0,!0,{mode:n}),s.pdfViewer.container.dispatchEvent(a)}),(0,ee.R)(f,"namedaction").pipe((0,ce.R)(e)).subscribe(({action:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("namedaction",!0,!0,{action:n}),s.pdfViewer.container.dispatchEvent(a)}),(0,ee.R)(f,"presentationmodechanged").pipe((0,ce.R)(e)).subscribe(({active:n,switchInProgress:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("presentationmodechanged",!0,!0,{active:n,switchInProgress:s}),window.dispatchEvent(a)}),(0,ee.R)(f,"outlineloaded").pipe((0,ce.R)(e)).subscribe(({outlineCount:n,source:s})=>{const a=document.createEvent("CustomEvent");a.initCustomEvent("outlineloaded",!0,!0,{outlineCount:n}),s.container.dispatchEvent(a)})}(n,e),n}(z,this.destroy$),(0,ee.R)(this.eventBus,"pagerendered").pipe((0,ce.R)(this.destroy$)).subscribe(n=>{this.pageRendered.emit(n)}),(0,ee.R)(this.eventBus,"pagesinit").pipe((0,ce.R)(this.destroy$)).subscribe(n=>{this.pageInitialized.emit(n)}),(0,ee.R)(this.eventBus,"pagechanging").pipe((0,ce.R)(this.destroy$)).subscribe(({pageNumber:n})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=n,this.pageChange.emit(n)},100)}),(0,ee.R)(this.eventBus,"textlayerrendered").pipe((0,ce.R)(this.destroy$)).subscribe(n=>{this.textLayerRendered.emit(n)})}initPDFServices(){this.pdfLinkService=new ta({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new jd({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:$d.DISABLED,findController:this.pdfFindController,l10n:new Bd("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Aa.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),jl(M,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new Nf(this.getPDFOptions()):new Lf(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(n){return n<1?1:n>this._pdf.numPages?this._pdf.numPages:n}getDocumentParams(){const n=typeof this.src;if(!this._cMapsUrl)return this.src;const s={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===n?s.url=this.src:"object"===n&&(void 0!==this.src.byteLength?s.data=this.src:Object.assign(s,this.src)),s}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=y(this.getDocumentParams()),this.loadingTask.onProgress=s=>{this.onProgress.emit(s)};const n=this.src;(0,oe.D)(this.loadingTask.promise).pipe((0,ce.R)(this.destroy$)).subscribe({next:s=>{this._pdf=s,this.lastLoaded=n,this.afterLoadComplete.emit(s),this.resetPdfDocument(),this.update()},error:s=>{this.lastLoaded=null,this.onError.emit(s)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{const n=this.pageInitialized.subscribe(()=>{this.updateSize(),n.unsubscribe()})}}getScale(n,s){const a=this._showBorders?2*f.BORDER_WIDTH:0,c=this.pdfViewerContainer.nativeElement.clientWidth-a,u=this.pdfViewerContainer.nativeElement.clientHeight-a;if(0===u||0===s||0===c||0===n)return 1;let h=1;switch(this._zoomScale){case"page-fit":h=Math.min(u/s,c/n);break;case"page-height":h=u/s;break;default:h=c/n}return this._zoom*h/f.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){Hl()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){Hl()||this.ngZone.runOutsideAngular(()=>{(0,ee.R)(window,"resize").pipe(function ae(f,e=ke.z){return(0,Re.e)((n,s)=>{let a=null,c=null,u=null;const h=()=>{if(a){a.unsubscribe(),a=null;const b=c;c=null,s.next(b)}};function g(){const b=u+f,E=e.now();if(E<b)return a=this.schedule(void 0,b-E),void s.add(a);h()}n.subscribe((0,xe.x)(s,b=>{c=b,u=e.now(),a||(a=e.schedule(g,f),s.add(a))},()=>{h(),s.complete()},void 0,()=>{c=a=null}))})}(100),(0,he.h)(()=>this._canAutoResize&&!!this._pdf),(0,ce.R)(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(s){return new(s||f)(se.Y36(se.SBq),se.Y36(se.R0b))};static \u0275cmp=se.Xpm({type:f,selectors:[["pdf-viewer"]],viewQuery:function(s,a){if(1&s&&se.Gf(Ya,5),2&s){let c;se.iGM(c=se.CRH())&&(a.pdfViewerContainer=c.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[se.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(s,a){1&s&&(se.TgZ(0,"div",0,1),se._UZ(2,"div",2),se.qZA())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return f})(),lu=(()=>{class f{static \u0275fac=function(s){return new(s||f)};static \u0275mod=se.oAB({type:f});static \u0275inj=se.cJS({})}return f})()},5861:(dt,Ce,F)=>{function M(se,ee,Q,oe,ce,ke,Re){try{var xe=se[ke](Re),ae=xe.value}catch(he){return void Q(he)}xe.done?ee(ae):Promise.resolve(ae).then(oe,ce)}function z(se){return function(){var ee=this,Q=arguments;return new Promise(function(oe,ce){var ke=se.apply(ee,Q);function Re(ae){M(ke,oe,ce,Re,xe,"next",ae)}function xe(ae){M(ke,oe,ce,Re,xe,"throw",ae)}Re(void 0)})}}F.d(Ce,{Z:()=>z})},7582:(dt,Ce,F)=>{function he(X,le,Ee,pe){return new(Ee||(Ee=Promise))(function(De,Et){function Mt($t){try{yt(pe.next($t))}catch(at){Et(at)}}function qn($t){try{yt(pe.throw($t))}catch(at){Et(at)}}function yt($t){$t.done?De($t.value):function Le(De){return De instanceof Ee?De:new Ee(function(Et){Et(De)})}($t.value).then(Mt,qn)}yt((pe=pe.apply(X,le||[])).next())})}function Ge(X){return this instanceof Ge?(this.v=X,this):new Ge(X)}function Ve(X,le,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,pe=Ee.apply(X,le||[]),De=[];return Le={},Et("next"),Et("throw"),Et("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function Et(wt){pe[wt]&&(Le[wt]=function(bt){return new Promise(function(it,ln){De.push([wt,bt,it,ln])>1||Mt(wt,bt)})})}function Mt(wt,bt){try{!function qn(wt){wt.value instanceof Ge?Promise.resolve(wt.value.v).then(yt,$t):at(De[0][2],wt)}(pe[wt](bt))}catch(it){at(De[0][3],it)}}function yt(wt){Mt("next",wt)}function $t(wt){Mt("throw",wt)}function at(wt,bt){wt(bt),De.shift(),De.length&&Mt(De[0][0],De[0][1])}}function ct(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,le=X[Symbol.asyncIterator];return le?le.call(X):(X=function st(X){var le="function"==typeof Symbol&&Symbol.iterator,Ee=le&&X[le],pe=0;if(Ee)return Ee.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&pe>=X.length&&(X=void 0),{value:X&&X[pe++],done:!X}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),Ee={},pe("next"),pe("throw"),pe("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function pe(De){Ee[De]=X[De]&&function(Et){return new Promise(function(Mt,qn){!function Le(De,Et,Mt,qn){Promise.resolve(qn).then(function(yt){De({value:yt,done:Mt})},Et)}(Mt,qn,(Et=X[De](Et)).done,Et.value)})}}}F.d(Ce,{FC:()=>Ve,KL:()=>ct,mG:()=>he,qq:()=>Ge}),"function"==typeof SuppressedError&&SuppressedError}},dt=>{dt(dt.s=714)}]);